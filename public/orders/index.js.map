{"version":3,"file":"index.js","sources":["../../node_modules/@kenzap/k-cloud/index.js","../../src/_/_helpers.js","../../src/_/_order_preview.js","../../src/_/_cnt_orders.js","../../src/orders/index.js"],"sourcesContent":["/**\n * @name initHeader\n * @description Initiates Kenzap Cloud extension header and related scripts. Verifies user sessions, handles SSO, does cloud space navigation, initializes i18n localization. \n * @param {object} response\n */\nexport const initHeader = (response) => {\n\n    // cache header from backend\n    if(response.header) localStorage.setItem('header', response.header);\n  \n    // load header to html if not present\n    if(!document.querySelector(\"#k-script\")){\n  \n        let child = document.createElement('div');\n        child.innerHTML = localStorage.getItem('header');\n        child = child.firstChild;\n        document.body.prepend(child);\n  \n        // run header scripts\n        Function(document.querySelector(\"#k-script\").innerHTML).call('test');\n    }\n  \n    // load locales if present\n    if(response.locale) window.i18n.init(response.locale); \n}\n\n/**\n * @name showLoader\n * @description Initiates full screen three dots loader.\n */\nexport const showLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'block';\n}\n\n/**\n * @name hideLoader\n * @description Removes full screen three dots loader.\n */\nexport const hideLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'none';\n}\n\n/**\n * @name initFooter\n * @description Removes full screen three dots loader.\n * @param {string} left - Text or html code to be present on the left bottom side of screen\n * @param {string} right - Text or html code to be present on the left bottom side of screen\n */\nexport const initFooter = (left, right) => {\n\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n/**\n * @name link\n * @description Handles Cloud navigation links between extensions and its pages. Takes care of custom url parameters.\n * @param {string} slug - Any inbound link\n * \n * @returns {string} link - Returns original link with kenzp cloud space ID identifier.\n */\nexport const link = (slug) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let sid = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    let postfix = slug.indexOf('?') == -1 ? '?sid='+sid : '&sid='+sid;\n\n    return slug + postfix;\n}\n\n/**\n * @name getSiteId\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\nexport const getSiteId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name setCookie\n * @description Set cookie by its name to all .kenzap.cloud subdomains\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {string} days - Number of days when cookie expires.\n */\n export const setCookie = (name, value, days) => {\n\n    let expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \";expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (escape(value) || \"\") + expires + \";path=/;domain=.kenzap.cloud\"; \n}\n\n/**\n * @name getCookie\n * @description Read cookie by its name.\n * @param {string} cname - Cookie name.\n * \n * @returns {string} value - Cookie value.\n */\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n/**\n * @name parseApiError\n * @description Set default logics for different API Error responses.\n * @param {object} object - API response.\n */\nexport const parseApiError = (data) => {\n\n    console.log(data);\n\n    // unstructured failure\n    if(isNaN(data.code)){\n    \n        alert('Can not connect to Kenzap Cloud');  \n        return;\n    }\n    \n    switch(data.code){\n\n        // unauthorized\n        case 401:\n\n            // dev mode\n            if(window.location.href.indexOf('localhost')!=-1){ \n\n                alert(data.reason); \n                return; \n            }\n\n            // production mode\n            location.href=\"https://auth.kenzap.com/?app=65432108792785&redirect=\"+window.location.href; break;\n        \n        // something else\n        default:\n\n            alert(data.reason); \n            break;\n    }\n}\n\n/**\n * @name initBreadcrumbs\n * @description Render ui breadcrumbs.\n * @param {array} data - List of link objects containing link text and url. If url is missing then renders breadcrumb as static text. Requires html holder with .bc class.\n */\nexport const initBreadcrumbs = (data) => {\n\n    let html = '<ol class=\"breadcrumb mt-2 mb-0\">';\n    for(let bc of data){\n        \n        if(typeof(bc.link) === 'undefined'){\n\n            html += `<li class=\"breadcrumb-item\">${ bc.text }</li>`;\n        }else{\n\n            html += `<li class=\"breadcrumb-item\"><a href=\"${ bc.link }\">${ bc.text }</a></li>`;\n        }\n    }\n    html += '</ol>';\n    \n    document.querySelector(\".bc\").innerHTML = html;\n}\n\n/**\n * @name onClick\n * @description One row click event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onClick = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n/**\n * @name onKeyUp\n * @description One row key up event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onKeyUp = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('keyup', fn, true);\n        e.addEventListener('keyup', fn, true);\n    }\n}\n\n/**\n * @name onChange\n * @description One row change event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onChange = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('change', fn, true);\n        e.addEventListener('change', fn, true);\n    }\n}\n\n/**\n * @name loadScript\n * @description Asynchronous script loader function.\n * @param {string} url - HTML selector, id, class, etc.\n * @param {string} cb - callback function fired immediately after script is loaded.\n */\n export const loadScript = (url, cb) => {\n\n    if (!Array.from(document.querySelectorAll('script')).some(elm => elm.src == url)) {\n      let script = document.createElement('script')\n      script.onload = cb\n      script.src = url\n      document.getElementsByTagName('head')[0].appendChild(script)\n    }\n}\n\n/**\n * @name simulateClick\n * @description Trigger on click event without user interaction.\n * @param {string} elem - HTML selector, id, class, etc.\n */\n export const simulateClick = (elem) => {\n\n\t// create our event (with options)\n\tlet evt = new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tview: window\n\t});\n\n\t// if cancelled, don't dispatch the event\n\t!elem.dispatchEvent(evt);\n};\n\n/**\n * Create a web friendly URL slug from a string.\n *\n * Requires XRegExp (http://xregexp.com) with unicode add-ons for UTF-8 support.\n *\n * Although supported, transliteration is discouraged because\n *     1) most web browsers support UTF-8 characters in URLs\n *     2) transliteration causes a loss of information\n *\n * @author Sean Murphy <sean@iamseanmurphy.com>\n * @copyright Copyright 2012 Sean Murphy. All rights reserved.\n * @license http://creativecommons.org/publicdomain/zero/1.0/\n *\n * @param string s\n * @param object opt\n * @return string\n */\n export const slugify = (s, opt) => {\n\n\ts = String(s);\n\topt = Object(opt);\n\t\n\tvar defaults = {\n\t\t'delimiter': '-',\n\t\t'limit': undefined,\n\t\t'lowercase': true,\n\t\t'replacements': {},\n\t\t'transliterate': (typeof(XRegExp) === 'undefined') ? true : false\n\t};\n\t\n\t// Merge options\n\tfor (var k in defaults) {\n\t\tif (!opt.hasOwnProperty(k)) {\n\t\t\topt[k] = defaults[k];\n\t\t}\n\t}\n\t\n\tvar char_map = {\n\t\t// Latin\n\t\t'À': 'A', 'Á': 'A', 'Â': 'A', 'Ã': 'A', 'Ä': 'A', 'Å': 'A', 'Æ': 'AE', 'Ç': 'C', \n\t\t'È': 'E', 'É': 'E', 'Ê': 'E', 'Ë': 'E', 'Ì': 'I', 'Í': 'I', 'Î': 'I', 'Ï': 'I', \n\t\t'Ð': 'D', 'Ñ': 'N', 'Ò': 'O', 'Ó': 'O', 'Ô': 'O', 'Õ': 'O', 'Ö': 'O', 'Å': 'O', \n\t\t'Ø': 'O', 'Ù': 'U', 'Ú': 'U', 'Û': 'U', 'Ü': 'U', 'Å°': 'U', 'Ý': 'Y', 'Þ': 'TH', \n\t\t'ß': 'ss', \n\t\t'à': 'a', 'á': 'a', 'â': 'a', 'ã': 'a', 'ä': 'a', 'å': 'a', 'æ': 'ae', 'ç': 'c', \n\t\t'è': 'e', 'é': 'e', 'ê': 'e', 'ë': 'e', 'ì': 'i', 'í': 'i', 'î': 'i', 'ï': 'i', \n\t\t'ð': 'd', 'ñ': 'n', 'ò': 'o', 'ó': 'o', 'ô': 'o', 'õ': 'o', 'ö': 'o', 'Å': 'o', \n\t\t'ø': 'o', 'ù': 'u', 'ú': 'u', 'û': 'u', 'ü': 'u', 'Å±': 'u', 'ý': 'y', 'þ': 'th', \n\t\t'ÿ': 'y',\n\n\t\t// Latin symbols\n\t\t'©': '(c)',\n\n\t\t// Greek\n\t\t'Α': 'A', 'Β': 'B', 'Γ': 'G', 'Δ': 'D', 'Ε': 'E', 'Ζ': 'Z', 'Η': 'H', 'Θ': '8',\n\t\t'Ι': 'I', 'Κ': 'K', 'Λ': 'L', 'Μ': 'M', 'Ν': 'N', 'Ξ': '3', 'Ο': 'O', 'Π': 'P',\n\t\t'Ρ': 'R', 'Σ': 'S', 'Τ': 'T', 'Υ': 'Y', 'Φ': 'F', 'Χ': 'X', 'Ψ': 'PS', 'Ω': 'W',\n\t\t'Î': 'A', 'Î': 'E', 'Î': 'I', 'Î': 'O', 'Î': 'Y', 'Î': 'H', 'Î': 'W', 'Îª': 'I',\n\t\t'Î«': 'Y',\n\t\t'α': 'a', 'β': 'b', 'γ': 'g', 'δ': 'd', 'ε': 'e', 'ζ': 'z', 'η': 'h', 'θ': '8',\n\t\t'ι': 'i', 'κ': 'k', 'λ': 'l', 'μ': 'm', 'ν': 'n', 'ξ': '3', 'ο': 'o', 'π': 'p',\n\t\t'ρ': 'r', 'σ': 's', 'τ': 't', 'υ': 'y', 'φ': 'f', 'χ': 'x', 'ψ': 'ps', 'ω': 'w',\n\t\t'Î¬': 'a', 'Î­': 'e', 'Î¯': 'i', 'Ï': 'o', 'Ï': 'y', 'Î®': 'h', 'Ï': 'w', 'ς': 's',\n\t\t'Ï': 'i', 'Î°': 'y', 'Ï': 'y', 'Î': 'i',\n\n\t\t// Turkish\n\t\t'Å': 'S', 'Ä°': 'I', 'Ç': 'C', 'Ü': 'U', 'Ö': 'O', 'Ä': 'G',\n\t\t'Å': 's', 'Ä±': 'i', 'ç': 'c', 'ü': 'u', 'ö': 'o', 'Ä': 'g', \n\n\t\t// Russian\n\t\t'Ð': 'A', 'Ð': 'B', 'Ð': 'V', 'Ð': 'G', 'Ð': 'D', 'Ð': 'E', 'Ð': 'Yo', 'Ð': 'Zh',\n\t\t'Ð': 'Z', 'Ð': 'I', 'Ð': 'J', 'Ð': 'K', 'Ð': 'L', 'Ð': 'M', 'Ð': 'N', 'Ð': 'O',\n\t\t'Ð': 'P', 'Ð ': 'R', 'Ð¡': 'S', 'Ð¢': 'T', 'Ð£': 'U', 'Ð¤': 'F', 'Ð¥': 'H', 'Ð¦': 'C',\n\t\t'Ð§': 'Ch', 'Ð¨': 'Sh', 'Ð©': 'Sh', 'Ðª': '', 'Ð«': 'Y', 'Ð¬': '', 'Ð­': 'E', 'Ð®': 'Yu',\n\t\t'Ð¯': 'Ya',\n\t\t'Ð°': 'a', 'Ð±': 'b', 'Ð²': 'v', 'Ð³': 'g', 'Ð´': 'd', 'Ðµ': 'e', 'Ñ': 'yo', 'Ð¶': 'zh',\n\t\t'Ð·': 'z', 'Ð¸': 'i', 'Ð¹': 'j', 'Ðº': 'k', 'Ð»': 'l', 'Ð¼': 'm', 'Ð½': 'n', 'Ð¾': 'o',\n\t\t'Ð¿': 'p', 'Ñ': 'r', 'Ñ': 's', 'Ñ': 't', 'Ñ': 'u', 'Ñ': 'f', 'Ñ': 'h', 'Ñ': 'c',\n\t\t'Ñ': 'ch', 'Ñ': 'sh', 'Ñ': 'sh', 'Ñ': '', 'Ñ': 'y', 'Ñ': '', 'Ñ': 'e', 'Ñ': 'yu',\n\t\t'Ñ': 'ya',\n\n\t\t// Ukrainian\n\t\t'Ð': 'Ye', 'Ð': 'I', 'Ð': 'Yi', 'Ò': 'G',\n\t\t'Ñ': 'ye', 'Ñ': 'i', 'Ñ': 'yi', 'Ò': 'g',\n\n\t\t// Czech\n\t\t'Ä': 'C', 'Ä': 'D', 'Ä': 'E', 'Å': 'N', 'Å': 'R', 'Š': 'S', 'Å¤': 'T', 'Å®': 'U', \n\t\t'Å½': 'Z', \n\t\t'Ä': 'c', 'Ä': 'd', 'Ä': 'e', 'Å': 'n', 'Å': 'r', 'š': 's', 'Å¥': 't', 'Å¯': 'u',\n\t\t'Å¾': 'z', \n\n\t\t// Polish\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'e', 'Å': 'L', 'Å': 'N', 'Ó': 'o', 'Å': 'S', 'Å¹': 'Z', \n\t\t'Å»': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Å': 'l', 'Å': 'n', 'ó': 'o', 'Å': 's', 'Åº': 'z',\n\t\t'Å¼': 'z',\n\n\t\t// Latvian\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'E', 'Ä¢': 'G', 'Äª': 'i', 'Ä¶': 'k', 'Ä»': 'L', 'Å': 'N', \n\t\t'Š': 'S', 'Åª': 'u', 'Å½': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Ä£': 'g', 'Ä«': 'i', 'Ä·': 'k', 'Ä¼': 'l', 'Å': 'n',\n\t\t'š': 's', 'Å«': 'u', 'Å¾': 'z'\n\t};\n\t\n\t// Make custom replacements\n\tfor (var k in opt.replacements) {\n\t\ts = s.replace(RegExp(k, 'g'), opt.replacements[k]);\n\t}\n\t\n\t// Transliterate characters to ASCII\n\tif (opt.transliterate) {\n\t\tfor (var k in char_map) {\n\t\t\ts = s.replace(RegExp(k, 'g'), char_map[k]);\n\t\t}\n\t}\n\t\n\t// Replace non-alphanumeric characters with our delimiter\n\tvar alnum = (typeof(XRegExp) === 'undefined') ? RegExp('[^a-z0-9]+', 'ig') : XRegExp('[^\\\\p{L}\\\\p{N}]+', 'ig');\n\ts = s.replace(alnum, opt.delimiter);\n\t\n\t// Remove duplicate delimiters\n\ts = s.replace(RegExp('[' + opt.delimiter + ']{2,}', 'g'), opt.delimiter);\n\t\n\t// Truncate slug to max. characters\n\ts = s.substring(0, opt.limit);\n\t\n\t// Remove delimiter from ends\n\ts = s.replace(RegExp('(^' + opt.delimiter + '|' + opt.delimiter + '$)', 'g'), '');\n\t\n\treturn opt.lowercase ? s.toLowerCase() : s;\n}\n\n/**\n * @name toast\n * @description Triggers toast notification. Adds toast html to the page if missing.\n * @param {string} text - Toast notification.\n */\n export const toast = (text) => {\n\n    // only add once\n    if(!document.querySelector(\".toast\")){\n\n        let html = `\n        <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n            <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n                <div class=\"d-flex\">\n                    <div class=\"toast-body\"></div>\n                    <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n                </div>\n            </div>\n        </div>`;\n        if(document.querySelector('body > div')) document.querySelector('body > div').insertAdjacentHTML('afterend', html);\n    }\n\n    let toast = new bootstrap.Toast(document.querySelector('.toast'));\n    document.querySelector('.toast .toast-body').innerHTML = text;  \n    toast.show();\n}\n\n/**\n * @name headers\n * @description Default headers object for all Kenzap Cloud fetch queries. \n * @param {object} headers\n */\n export const headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n    'Kenzap-Locale': getCookie('locale') ? getCookie('locale') : \"en\",\n    'Kenzap-Header': (localStorage.hasOwnProperty('header') && localStorage.hasOwnProperty('header-version')) ? localStorage.getItem('header-version') : 0,\n    'Kenzap-Token': getCookie('kenzap_token'),\n    'Kenzap-Sid': getSiteId(),\n}","import { getCookie, getSiteId } from '@kenzap/k-cloud';\n\nexport const getProductId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('id') ? urlParams.get('id') : \"\";\n    return id;\n}\n\nexport const getProductIdFromLink = () => {\n    \n    let url = new URL(window.location.href);\n    let id = url.pathname.trim().split('/').slice(-2)[0];\n    return id;\n}\n\nexport const replaceQueryParam = (param, newval, search) => {\n\n    let regex = new RegExp(\"([?;&])\" + param + \"[^&;]*[;&]?\");\n    let query = search.replace(regex, \"$1\").replace(/&$/, '');\n\n    return (query.length > 2 ? query + \"&\" : \"?\") + (newval ? param + \"=\" + newval : '');\n}\n\nexport const getPageNumberOld = () => {\n\n    let url = window.location.href.split('/');\n    let page = url[url.length-1];\n    let pageN = 1;\n    if(page.indexOf('page')==0){\n      pageN = page.replace('page', '').replace('#', '');\n    }\n    // console.log(pageN);\n    return parseInt(pageN);\n}\n\nexport const getPageNumber = () => {\n\n    let urlParams = new URLSearchParams(window.location.search);\n    let page = urlParams.get('page') ? urlParams.get('page') : 1;\n\n    return parseInt(page);\n}\n\nexport const getPagination = (__, meta, cb) => {\n\n    if(typeof(meta) === 'undefined'){ document.querySelector(\"#listing_info\").innerHTML = __('no records to display'); return; }\n\n    let offset = meta.limit+meta.offset;\n    if(offset>meta.total_records) offset = meta.total_records;\n\n    document.querySelector(\"#listing_info\").innerHTML = __(\"Showing %1$ to %2$ of %3$ entries\", (1+meta.offset), (offset), meta.total_records);\n    //  \"Showing \"+(1+meta.offset)+\" to \"+(offset)+\" of \"+meta.total_records+\" entries\";\n\n    let pbc = Math.ceil(meta.total_records / meta.limit);\n    document.querySelector(\"#listing_paginate\").style.display = (pbc < 2) ? \"none\" : \"block\";\n\n    let page = getPageNumber(); \n    let html = '<ul class=\"pagination d-flex justify-content-end pagination-flat\">';\n    html += '<li class=\"paginate_button page-item previous\" id=\"listing_previous\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"prev\" data-page=\"0\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&laquo;</span></li>';\n    let i = 0;\n    while(i<pbc){\n\n        i++; \n        if(((i >= page-3) && (i <= page)) || ((i <= page+3) && (i >=page))){\n\n            html += '<li class=\"paginate_button page-item '+((page==i)?'active':'')+'\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"page\" data-page=\"'+i+'\" tabindex=\"0\" class=\"page-link\">'+(page==i?i:i)+'</a></li>';      \n        }\n    }  \n    html += '<li class=\"paginate_button page-item next\" id=\"order-listing_next\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"next\" data-page=\"2\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&raquo;</span></a></li>';\n    html += '</ul>'\n\n    document.querySelector(\"#listing_paginate\").innerHTML = html;\n\n    let page_link = document.querySelectorAll(\".page-link\");\n    for (const l of page_link) {\n        l.addEventListener('click', function(e) {\n\n            let p = parseInt(getPageNumber());\n            let ps = p;\n            switch(l.dataset.type){ \n                case 'prev': p-=1; if(p<1) p = 1; break;\n                case 'page': p=l.dataset.page; break;\n                case 'next': p+=1; if(p>pbc) p = pbc; break;\n            }\n            \n            // update url\n            if (window.history.replaceState) {\n\n                // let url = window.location.href.split('/page');\n                // let urlF = (url[0]+'/page'+p).replace('//page', '/page');\n\n                let str = window.location.search;\n                str = replaceQueryParam('page', p, str);\n                // window.location = window.location.pathname + str\n\n                // prevents browser from storing history with each change:\n                window.history.replaceState(\"kenzap-cloud\", document.title, window.location.pathname + str);\n            }\n\n            // only refresh if page differs\n            if(ps!=p) cb();\n            \n            e.preventDefault();\n            return false;\n        });\n    }\n}\n\nexport const formatStatus = (__, st) => {\n\n    st = parseInt(st); \n    switch(st){ \n      case 0: return '<div class=\"badge bg-warning text-dark fw-light\">' + __('Draft') + '</div>';\n      case 1: return '<div class=\"badge bg-primary fw-light\">' + __('Published') + '</div>';\n      case 3: return '<div class=\"badge bg-secondary fw-light\">' + __('Unpublished') + '</div>';\n      default: return '<div class=\"badge bg-secondary fw-light\">' + __('Drafts') + '</div>';\n    }\n}\n\nexport const formatPrice = (price) => {\n\n    const formatter = new Intl.NumberFormat('en-US', { style: 'currency', currency: \"USD\", });\n    if(typeof(price) === 'undefined' || price == '') price = 0;\n    price = parseFloat(price);\n    price = formatter.format(price);\n    return price;\n}\n\nexport const formatTime = (__, timestamp) => {\n\t\n    let a = new Date(timestamp * 1000);\n    let months = [__('Jan'), __('Feb'), __('Mar'), __('Apr'), __('May'), __('Jun'), __('Jul'), __('Aug'), __('Sep'), __('Oct'), __('Nov'), __('Dec')];\n    let year = a.getFullYear();\n    let month = months[a.getMonth()];\n    let date = a.getDate();\n    let hour = a.getHours();\n    let min = a.getMinutes();\n    let sec = a.getSeconds();\n    let time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\n// nums only validation\nexport const numsOnly = (e, max) => {\n\n    // Only ASCII charactar in that range allowed \n    var ASCIICode = (e.which) ? e.which : e.keyCode \n    if (ASCIICode > 31 && ASCIICode != 46 && (ASCIICode < 48 || ASCIICode > 57)) \n    return false; \n\n    if(parseFloat(e.target.value)>max) \n    return false; \n\n    let dec = e.target.value.split('.');\n    if(dec.length>1)\n    if(dec[1].length>1)\n        return false;\n    \n    return true; \n}\n\nexport const onClick = (sel, fn) => {\n\n    // console.log('onClick');\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n// time elapsed since creation \nexport const timeConverterAgo = (now, time) => {\n\n    // console.log(now + \" \" + time);\n\n    now = parseInt(now);\n    time = parseInt(time);\n\n    // console.log(now + \" \" + time);\n\n    // parse as elapsed time\n    let past = now - time;\n    if(past < 60) return 'moments ago';\n    if(past < 3600) return parseInt(past / 60) + ' minutes ago';\n    if(past < 86400) return parseInt(past / 60 / 24) + ' hours ago';\n\n    // process as normal date\n    var a = new Date(time * 1000);\n    var months = [__('Jan'), __('Feb'), __('Mar'), __('Apr'), __('May'), __('Jun'), __('Jul'), __('Aug'), __('Sep'), __('Oct'), __('Nov'), __('Dec')];\n    var year = a.getFullYear();\n    var month = months[a.getMonth()];\n    var date = a.getDate();\n    var hour = a.getHours();\n    var min = a.getMinutes();\n    var sec = a.getSeconds();\n    var time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\nexport const getCurrencies = () => {\n\n    // length 164\n    return [\n        {\"name\":\"Afghan Afghani\",\"code\":\"AFA\",\"symbol\":\"؋\"},\n        {\"name\":\"Albanian Lek\",\"code\":\"ALL\",\"symbol\":\"Lek\"},\n        {\"name\":\"Algerian Dinar\",\"code\":\"DZD\",\"symbol\":\"دج\"},\n        {\"name\":\"Angolan Kwanza\",\"code\":\"AOA\",\"symbol\":\"Kz\"},\n        {\"name\":\"Argentine Peso\",\"code\":\"ARS\",\"symbol\":\"$\"},\n        {\"name\":\"Armenian Dram\",\"code\":\"AMD\",\"symbol\":\"֏\"},\n        {\"name\":\"Aruban Florin\",\"code\":\"AWG\",\"symbol\":\"ƒ\"},\n        {\"name\":\"Australian Dollar\",\"code\":\"AUD\",\"symbol\":\"$\"},\n        {\"name\":\"Azerbaijani Manat\",\"code\":\"AZN\",\"symbol\":\"m\"},\n        {\"name\":\"Bahamian Dollar\",\"code\":\"BSD\",\"symbol\":\"B$\"},\n        {\"name\":\"Bahraini Dinar\",\"code\":\"BHD\",\"symbol\":\".د.ب\"},\n        {\"name\":\"Bangladeshi Taka\",\"code\":\"BDT\",\"symbol\":\"৳\"},\n        {\"name\":\"Barbadian Dollar\",\"code\":\"BBD\",\"symbol\":\"Bds$\"},\n        {\"name\":\"Belarusian Ruble\",\"code\":\"BYR\",\"symbol\":\"Br\"},\n        {\"name\":\"Belgian Franc\",\"code\":\"BEF\",\"symbol\":\"fr\"},\n        {\"name\":\"Belize Dollar\",\"code\":\"BZD\",\"symbol\":\"$\"},\n        {\"name\":\"Bermudan Dollar\",\"code\":\"BMD\",\"symbol\":\"$\"},\n        {\"name\":\"Bhutanese Ngultrum\",\"code\":\"BTN\",\"symbol\":\"Nu.\"},\n        {\"name\":\"Bitcoin\",\"code\":\"BTC\",\"symbol\":\"฿\"},\n        {\"name\":\"Bolivian Boliviano\",\"code\":\"BOB\",\"symbol\":\"Bs.\"},\n        {\"name\":\"Bosnia-Herzegovina Convertible Mark\",\"code\":\"BAM\",\"symbol\":\"KM\"},\n        {\"name\":\"Botswanan Pula\",\"code\":\"BWP\",\"symbol\":\"P\"},\n        {\"name\":\"Brazilian Real\",\"code\":\"BRL\",\"symbol\":\"R$\"},\n        {\"name\":\"British Pound Sterling\",\"code\":\"GBP\",\"symbol\":\"£\"},\n        {\"name\":\"Brunei Dollar\",\"code\":\"BND\",\"symbol\":\"B$\"},\n        {\"name\":\"Bulgarian Lev\",\"code\":\"BGN\",\"symbol\":\"Лв.\"},\n        {\"name\":\"Burundian Franc\",\"code\":\"BIF\",\"symbol\":\"FBu\"},\n        {\"name\":\"Cambodian Riel\",\"code\":\"KHR\",\"symbol\":\"KHR\"},\n        {\"name\":\"Canadian Dollar\",\"code\":\"CAD\",\"symbol\":\"$\"},\n        {\"name\":\"Cape Verdean Escudo\",\"code\":\"CVE\",\"symbol\":\"$\"},\n        {\"name\":\"Cayman Islands Dollar\",\"code\":\"KYD\",\"symbol\":\"$\"},\n        {\"name\":\"CFA Franc BCEAO\",\"code\":\"XOF\",\"symbol\":\"CFA\"},\n        {\"name\":\"CFA Franc BEAC\",\"code\":\"XAF\",\"symbol\":\"FCFA\"},\n        {\"name\":\"CFP Franc\",\"code\":\"XPF\",\"symbol\":\"₣\"},\n        {\"name\":\"Chilean Peso\",\"code\":\"CLP\",\"symbol\":\"$\"},\n        {\"name\":\"Chinese Yuan\",\"code\":\"CNY\",\"symbol\":\"¥\"},\n        {\"name\":\"Colombian Peso\",\"code\":\"COP\",\"symbol\":\"$\"},\n        {\"name\":\"Comorian Franc\",\"code\":\"KMF\",\"symbol\":\"CF\"},\n        {\"name\":\"Congolese Franc\",\"code\":\"CDF\",\"symbol\":\"FC\"},\n        {\"name\":\"Costa Rican Colón\",\"code\":\"CRC\",\"symbol\":\"₡\"},\n        {\"name\":\"Croatian Kuna\",\"code\":\"HRK\",\"symbol\":\"kn\"},\n        {\"name\":\"Cuban Convertible Peso\",\"code\":\"CUC\",\"symbol\":\"$, CUC\"},\n        {\"name\":\"Czech Republic Koruna\",\"code\":\"CZK\",\"symbol\":\"Kč\"},\n        {\"name\":\"Danish Krone\",\"code\":\"DKK\",\"symbol\":\"Kr.\"},\n        {\"name\":\"Djiboutian Franc\",\"code\":\"DJF\",\"symbol\":\"Fdj\"},\n        {\"name\":\"Dominican Peso\",\"code\":\"DOP\",\"symbol\":\"$\"},\n        {\"name\":\"East Caribbean Dollar\",\"code\":\"XCD\",\"symbol\":\"$\"},\n        {\"name\":\"Egyptian Pound\",\"code\":\"EGP\",\"symbol\":\"ج.م\"},\n        {\"name\":\"Eritrean Nakfa\",\"code\":\"ERN\",\"symbol\":\"Nfk\"},\n        {\"name\":\"Estonian Kroon\",\"code\":\"EEK\",\"symbol\":\"kr\"},\n        {\"name\":\"Ethiopian Birr\",\"code\":\"ETB\",\"symbol\":\"Nkf\"},\n        {\"name\":\"Euro\",\"code\":\"EUR\",\"symbol\":\"€\"},\n        {\"name\":\"Falkland Islands Pound\",\"code\":\"FKP\",\"symbol\":\"£\"},\n        {\"name\":\"Fijian Dollar\",\"code\":\"FJD\",\"symbol\":\"FJ$\"},\n        {\"name\":\"Gambian Dalasi\",\"code\":\"GMD\",\"symbol\":\"D\"},\n        {\"name\":\"Georgian Lari\",\"code\":\"GEL\",\"symbol\":\"ლ\"},\n        {\"name\":\"German Mark\",\"code\":\"DEM\",\"symbol\":\"DM\"},\n        {\"name\":\"Ghanaian Cedi\",\"code\":\"GHS\",\"symbol\":\"GH₵\"},\n        {\"name\":\"Gibraltar Pound\",\"code\":\"GIP\",\"symbol\":\"£\"},\n        {\"name\":\"Greek Drachma\",\"code\":\"GRD\",\"symbol\":\"₯, Δρχ, Δρ\"},\n        {\"name\":\"Guatemalan Quetzal\",\"code\":\"GTQ\",\"symbol\":\"Q\"},\n        {\"name\":\"Guinean Franc\",\"code\":\"GNF\",\"symbol\":\"FG\"},\n        {\"name\":\"Guyanaese Dollar\",\"code\":\"GYD\",\"symbol\":\"$\"},\n        {\"name\":\"Haitian Gourde\",\"code\":\"HTG\",\"symbol\":\"G\"},\n        {\"name\":\"Honduran Lempira\",\"code\":\"HNL\",\"symbol\":\"L\"},\n        {\"name\":\"Hong Kong Dollar\",\"code\":\"HKD\",\"symbol\":\"$\"},\n        {\"name\":\"Hungarian Forint\",\"code\":\"HUF\",\"symbol\":\"Ft\"},\n        {\"name\":\"Icelandic króna\",\"code\":\"ISK\",\"symbol\":\"kr\"},\n        {\"name\":\"Indian Rupee\",\"code\":\"INR\",\"symbol\":\"₹\"},\n        {\"name\":\"Indonesian Rupiah\",\"code\":\"IDR\",\"symbol\":\"Rp\"},\n        {\"name\":\"Iranian Rial\",\"code\":\"IRR\",\"symbol\":\"﷼\"},\n        {\"name\":\"Iraqi Dinar\",\"code\":\"IQD\",\"symbol\":\"د.ع\"},\n        {\"name\":\"Israeli New Sheqel\",\"code\":\"ILS\",\"symbol\":\"₪\"},\n        {\"name\":\"Italian Lira\",\"code\":\"ITL\",\"symbol\":\"L,£\"},\n        {\"name\":\"Jamaican Dollar\",\"code\":\"JMD\",\"symbol\":\"J$\"},\n        {\"name\":\"Japanese Yen\",\"code\":\"JPY\",\"symbol\":\"¥\"},\n        {\"name\":\"Jordanian Dinar\",\"code\":\"JOD\",\"symbol\":\"ا.د\"},\n        {\"name\":\"Kazakhstani Tenge\",\"code\":\"KZT\",\"symbol\":\"лв\"},\n        {\"name\":\"Kenyan Shilling\",\"code\":\"KES\",\"symbol\":\"KSh\"},\n        {\"name\":\"Kuwaiti Dinar\",\"code\":\"KWD\",\"symbol\":\"ك.د\"},\n        {\"name\":\"Kyrgystani Som\",\"code\":\"KGS\",\"symbol\":\"лв\"},\n        {\"name\":\"Laotian Kip\",\"code\":\"LAK\",\"symbol\":\"₭\"},\n        {\"name\":\"Latvian Lats\",\"code\":\"LVL\",\"symbol\":\"Ls\"},\n        {\"name\":\"Lebanese Pound\",\"code\":\"LBP\",\"symbol\":\"£\"},\n        {\"name\":\"Lesotho Loti\",\"code\":\"LSL\",\"symbol\":\"L\"},\n        {\"name\":\"Liberian Dollar\",\"code\":\"LRD\",\"symbol\":\"$\"},\n        {\"name\":\"Libyan Dinar\",\"code\":\"LYD\",\"symbol\":\"د.ل\"},\n        {\"name\":\"Lithuanian Litas\",\"code\":\"LTL\",\"symbol\":\"Lt\"},\n        {\"name\":\"Macanese Pataca\",\"code\":\"MOP\",\"symbol\":\"$\"},\n        {\"name\":\"Macedonian Denar\",\"code\":\"MKD\",\"symbol\":\"ден\"},\n        {\"name\":\"Malagasy Ariary\",\"code\":\"MGA\",\"symbol\":\"Ar\"},\n        {\"name\":\"Malawian Kwacha\",\"code\":\"MWK\",\"symbol\":\"MK\"},\n        {\"name\":\"Malaysian Ringgit\",\"code\":\"MYR\",\"symbol\":\"RM\"},\n        {\"name\":\"Maldivian Rufiyaa\",\"code\":\"MVR\",\"symbol\":\"Rf\"},\n        {\"name\":\"Mauritanian Ouguiya\",\"code\":\"MRO\",\"symbol\":\"MRU\"},\n        {\"name\":\"Mauritian Rupee\",\"code\":\"MUR\",\"symbol\":\"₨\"},\n        {\"name\":\"Mexican Peso\",\"code\":\"MXN\",\"symbol\":\"$\"},\n        {\"name\":\"Moldovan Leu\",\"code\":\"MDL\",\"symbol\":\"L\"},\n        {\"name\":\"Mongolian Tugrik\",\"code\":\"MNT\",\"symbol\":\"₮\"},\n        {\"name\":\"Moroccan Dirham\",\"code\":\"MAD\",\"symbol\":\"MAD\"},\n        {\"name\":\"Mozambican Metical\",\"code\":\"MZM\",\"symbol\":\"MT\"},\n        {\"name\":\"Myanmar Kyat\",\"code\":\"MMK\",\"symbol\":\"K\"},\n        {\"name\":\"Namibian Dollar\",\"code\":\"NAD\",\"symbol\":\"$\"},\n        {\"name\":\"Nepalese Rupee\",\"code\":\"NPR\",\"symbol\":\"₨\"},\n        {\"name\":\"Netherlands Antillean Guilder\",\"code\":\"ANG\",\"symbol\":\"ƒ\"},\n        {\"name\":\"New Taiwan Dollar\",\"code\":\"TWD\",\"symbol\":\"$\"},\n        {\"name\":\"New Zealand Dollar\",\"code\":\"NZD\",\"symbol\":\"$\"},\n        {\"name\":\"Nicaraguan Córdoba\",\"code\":\"NIO\",\"symbol\":\"C$\"},\n        {\"name\":\"Nigerian Naira\",\"code\":\"NGN\",\"symbol\":\"₦\"},\n        {\"name\":\"North Korean Won\",\"code\":\"KPW\",\"symbol\":\"₩\"},\n        {\"name\":\"Norwegian Krone\",\"code\":\"NOK\",\"symbol\":\"kr\"},\n        {\"name\":\"Omani Rial\",\"code\":\"OMR\",\"symbol\":\".ع.ر\"},\n        {\"name\":\"Pakistani Rupee\",\"code\":\"PKR\",\"symbol\":\"₨\"},\n        {\"name\":\"Panamanian Balboa\",\"code\":\"PAB\",\"symbol\":\"B/.\"},\n        {\"name\":\"Papua New Guinean Kina\",\"code\":\"PGK\",\"symbol\":\"K\"},\n        {\"name\":\"Paraguayan Guarani\",\"code\":\"PYG\",\"symbol\":\"₲\"},\n        {\"name\":\"Peruvian Nuevo Sol\",\"code\":\"PEN\",\"symbol\":\"S/.\"},\n        {\"name\":\"Philippine Peso\",\"code\":\"PHP\",\"symbol\":\"₱\"},\n        {\"name\":\"Polish Zloty\",\"code\":\"PLN\",\"symbol\":\"zł\"},\n        {\"name\":\"Qatari Rial\",\"code\":\"QAR\",\"symbol\":\"ق.ر\"},\n        {\"name\":\"Romanian Leu\",\"code\":\"RON\",\"symbol\":\"lei\"},\n        {\"name\":\"Russian Ruble\",\"code\":\"RUB\",\"symbol\":\"₽\"},\n        {\"name\":\"Rwandan Franc\",\"code\":\"RWF\",\"symbol\":\"FRw\"},\n        {\"name\":\"Salvadoran Colón\",\"code\":\"SVC\",\"symbol\":\"₡\"},\n        {\"name\":\"Samoan Tala\",\"code\":\"WST\",\"symbol\":\"SAT\"},\n        {\"name\":\"Saudi Riyal\",\"code\":\"SAR\",\"symbol\":\"﷼\"},\n        {\"name\":\"Serbian Dinar\",\"code\":\"RSD\",\"symbol\":\"din\"},\n        {\"name\":\"Seychellois Rupee\",\"code\":\"SCR\",\"symbol\":\"SRe\"},\n        {\"name\":\"Sierra Leonean Leone\",\"code\":\"SLL\",\"symbol\":\"Le\"},\n        {\"name\":\"Singapore Dollar\",\"code\":\"SGD\",\"symbol\":\"$\"},\n        {\"name\":\"Slovak Koruna\",\"code\":\"SKK\",\"symbol\":\"Sk\"},\n        {\"name\":\"Solomon Islands Dollar\",\"code\":\"SBD\",\"symbol\":\"Si$\"},\n        {\"name\":\"Somali Shilling\",\"code\":\"SOS\",\"symbol\":\"Sh.so.\"},\n        {\"name\":\"South African Rand\",\"code\":\"ZAR\",\"symbol\":\"R\"},\n        {\"name\":\"South Korean Won\",\"code\":\"KRW\",\"symbol\":\"₩\"},\n        {\"name\":\"Special Drawing Rights\",\"code\":\"XDR\",\"symbol\":\"SDR\"},\n        {\"name\":\"Sri Lankan Rupee\",\"code\":\"LKR\",\"symbol\":\"Rs\"},\n        {\"name\":\"St. Helena Pound\",\"code\":\"SHP\",\"symbol\":\"£\"},\n        {\"name\":\"Sudanese Pound\",\"code\":\"SDG\",\"symbol\":\".س.ج\"},\n        {\"name\":\"Surinamese Dollar\",\"code\":\"SRD\",\"symbol\":\"$\"},\n        {\"name\":\"Swazi Lilangeni\",\"code\":\"SZL\",\"symbol\":\"E\"},\n        {\"name\":\"Swedish Krona\",\"code\":\"SEK\",\"symbol\":\"kr\"},\n        {\"name\":\"Swiss Franc\",\"code\":\"CHF\",\"symbol\":\"CHf\"},\n        {\"name\":\"Syrian Pound\",\"code\":\"SYP\",\"symbol\":\"LS\"},\n        {\"name\":\"São Tomé and Príncipe Dobra\",\"code\":\"STD\",\"symbol\":\"Db\"},\n        {\"name\":\"Tajikistani Somoni\",\"code\":\"TJS\",\"symbol\":\"SM\"},\n        {\"name\":\"Tanzanian Shilling\",\"code\":\"TZS\",\"symbol\":\"TSh\"},\n        {\"name\":\"Thai Baht\",\"code\":\"THB\",\"symbol\":\"฿\"},\n        {\"name\":\"Tongan Pa'anga\",\"code\":\"TOP\",\"symbol\":\"$\"},\n        {\"name\":\"Trinidad & Tobago Dollar\",\"code\":\"TTD\",\"symbol\":\"$\"},\n        {\"name\":\"Tunisian Dinar\",\"code\":\"TND\",\"symbol\":\"ت.د\"},\n        {\"name\":\"Turkish Lira\",\"code\":\"TRY\",\"symbol\":\"₺\"},\n        {\"name\":\"Turkmenistani Manat\",\"code\":\"TMT\",\"symbol\":\"T\"},\n        {\"name\":\"Ugandan Shilling\",\"code\":\"UGX\",\"symbol\":\"USh\"},\n        {\"name\":\"Ukrainian Hryvnia\",\"code\":\"UAH\",\"symbol\":\"₴\"},\n        {\"name\":\"United Arab Emirates Dirham\",\"code\":\"AED\",\"symbol\":\"إ.د\"},\n        {\"name\":\"Uruguayan Peso\",\"code\":\"UYU\",\"symbol\":\"$\"},\n        {\"name\":\"US Dollar\",\"code\":\"USD\",\"symbol\":\"$\"},\n        {\"name\":\"Uzbekistan Som\",\"code\":\"UZS\",\"symbol\":\"лв\"},\n        {\"name\":\"Vanuatu Vatu\",\"code\":\"VUV\",\"symbol\":\"VT\"},\n        {\"name\":\"Venezuelan  Bolívar\",\"code\":\"VEF\",\"symbol\":\"Bs\"},\n        {\"name\":\"Vietnamese Dong\",\"code\":\"VND\",\"symbol\":\"₫\"},\n        {\"name\":\"Yemeni Rial\",\"code\":\"YER\",\"symbol\":\"﷼\"},\n        {\"name\":\"Zambian Kwacha\",\"code\":\"ZMK\",\"symbol\":\"ZK\"}\n    ];\n}","import { headers, showLoader, hideLoader, onClick, onKeyUp, parseApiError } from '@kenzap/k-cloud';\nimport { timeConverterAgo, formatPrice, getPageNumber } from \"../_/_helpers.js\"\n\nexport const preview = {\n\n  viewOrder: (_this) => {\n\n    onClick('.view-order', (e) => {\n\n      let modal = document.querySelector(\".order-modal\");\n      let modalCont = new bootstrap.Modal(modal);\n      let i = e.currentTarget.dataset.index;\n      let items = '';\n\n      // get order status\n      Object.keys(_this.state.statuses).forEach((key, index) => { items += `<li><a class=\"dppi dropdown-item\" data-key=\"${ key }\" href=\"#\">${ _this.state.statuses[key].text }</a></li>` })\n      let statusSelect = `\n      <div class=\"st-modal st-opts mb-3 me-1 me-sm-3 dropdown\">\n          <a class=\"btn btn-sm ${ _this.state.statuses[_this.state.orders[i]['status']].class } dropdown-toggle order-form\" data-id=\"status\" data-type=\"key\" data-value=\"${ _this.state.orders[i]['status'] }\" href=\"#\" role=\"button\" id=\"order-status-modal\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\" >\n              ${ _this.state.statuses[_this.state.orders[i]['status']].text }\n          </a>\n          <ul class=\"dropdown-menu\" aria-labelledby=\"order-status-modal\">\n              ${ items }\n          </ul>\n      </div>`;\n\n      // structure modal\n      modal.querySelector(\".modal-dialog\").classList.add('modal-dialog-wide');\n      modal.querySelector(\".modal-header .modal-title\").innerHTML =  _this.state.orders[i]['from'];\n      modal.querySelector(\".modal-footer .btn-primary\").innerHTML = __('Update');\n      // modal.querySelector(\".btn-primary\").style.display = 'none';\n      modal.querySelector(\".modal-footer .btn-secondary\").innerHTML = __('Close');\n\n      let html = statusSelect;\n\n      // console.log(i);\n      // console.log(_this.state.orders[i]._id);\n\n      let fields = {_id: {l: __(\"ID\")}, from: {l: __(\"From\"), e: \"text\", editable: true}, items: {l: \"\", e: \"items\"}, fname: {l: __(\"Name\"), e: \"text\"}, lname: {l: __(\"Surname\"), e: \"text\"}, bios: {l: __(\"Bios\"), e: \"textarea\"}, avatar: {l: __(\"Avatar\"), e: \"text\"}, email: {l: __(\"Email\"), e: \"text\"}, countryr: {l: __(\"Country\"), e: \"text\"}, cityr: {l: __(\"City\"), e: \"text\"}, addr1: {l: __(\"Address 1\"), e: \"textarea\"}, addr2: {l: __(\"Address 2\"), e: \"textarea\"}, post: {l: __(\"Post\"), e: \"text\"}, state: {l: __(\"State\"), e: \"text\"}, c1: {l: __(\"Whatsapp\"), e: \"text\"}, c2: {l: __(\"Messenger\"), e: \"text\"}, c3: {l: __(\"Line\"), e: \"text\"}, c4: {l: __(\"Email\"), e: \"text\"}, c5: {l: __(\"Telegram\"), e: \"text\"}, email: {l: __(\"Email\"), e: \"text\"}, bio: {l: __(\"Bio\"), e: \"text\"}, y1: {l: __(\"Name\"), e: \"text\"}, y2: {l: __(\"IBAN\"), e: \"text\"}, y3: {l: __(\"SWIFT\"), e: \"text\"}, y4: {l: __(\"Bank\"), e: \"text\"}, y5: {l: __(\"Bank city\"), e: \"text\"}, y6: {l: __(\"Bank country\"), e: \"text\"}, note: {l: __(\"Note\"), e: \"textarea\"}, total: {l: __(\"Total\"), e: \"text\"}, s3: {l: __(\"Link 3\"), e: \"text\"}, company: {l: __(\"Company\"), e: \"text\"}, vat: {l: __(\"Tax ID\"), e: \"text\"}, grade: {l: __(\"Grade\"), e: \"text\"}, kenzap_ida: {l: __(\"Kenzap IDA\"), e: \"text\"} };\n\n      // order table details\n      for(let x in fields){\n\n          if(_this.state.orders[i][x] === undefined) continue;\n\n          let val = _this.state.orders[i][x];\n          let field = fields[x].l;\n\n          if (x=='total'){ val = formatPrice(val); }\n\n          html += `\n          <div class=\"mb-3 mt-3 order-row ${ x == '_id' || x == 'from' ? \"elipsized\": \"\" }\" >\n              <b>${ field }</b>&nbsp; ${ preview.renderField(fields[x], val, x) }\n          </div>`;\n\n      }\n\n      html += '';\n      modal.querySelector(\".modal-body\").innerHTML = html;\n      modalCont.show();\n\n      // table order item listners (remove, add note, adjust variations, etc)\n      preview.tableOrderItemListeners();\n\n      // order item product edit listener\n      preview.suggestOrderItem(_this);\n\n      // hide suggestion list if still present\n      modal.querySelector(\".edit-item\").addEventListener('blur', (e) => { setTimeout(()=>{ document.querySelector('.s-list').dataset.toggle = false; }, 500); });\n        \n      // add product item to order table\n      preview.addOrderItem(_this);\n      \n      // save changes to orders\n      _this.listeners.modalSuccessBtnFunc = (e) => {\n\n          e.preventDefault();\n\n          _this.updateOrder(_this.state.orders[i]._id);\n          \n          modalCont.hide();\n      }\n\n      onClick('.st-modal li a', (e) => {\n\n          e.preventDefault();\n\n          let osm = document.querySelector('#order-status-modal');\n          osm.innerHTML = _this.state.statuses[e.currentTarget.dataset.key].text;\n          osm.dataset.value = e.currentTarget.dataset.key;\n          let list = [];\n\n          // clear previous classes\n          Object.keys(_this.state.statuses).forEach((key) => {\n              list = _this.state.statuses[key].class.split(' ');\n              list.forEach((key) => { \n                  osm.classList.remove(key);\n              });    \n          });\n\n          // add new classes\n          list = _this.state.statuses[e.currentTarget.dataset.key].class.split(' ');\n          list.forEach((key) => { \n\n              osm.classList.add(key);\n          });    \n\n\n      });\n    });\n  },\n  renderField: (a, item, x) => {\n\n    switch(a.e){\n        \n        // case 'text': return '<input type=\"text\" class=\"form-control pv\" id=\"'+x+'\" value=\"'+b+'\">';\n        case 'text': return item;\n        case 'textarea': return '<textarea type=\"text\" rows=\"4\" class=\"form-control order-form pv \" data-type=\"textarea\" id=\"'+x+'\" value=\"'+item+'\">'+item+'</textarea>';\n        case 'items': \n\n            // parse product items\n            let html = `<table class=\"items order-form\" data-type=\"items\"><tr><th><div class=\"me-1 me-sm-3\">${ __('Product') }</div></th><th class=\"qty\"><div class=\"me-1 me-sm-3\">${ __('Qty') }</div></th><th class=\"tp\"><div class=\"me-1 me-sm-3\">${ __('Total') }</div></th><th></th></tr>`;\n            for(let x in item){ html += preview.structOrderItemTable(x, item); }\n\n            // add row for manual product entry\n            html += `<tr class=\"new-item-row\">\n                        <td>\n                            <div class=\"me-1 me-sm-3\">\n                                <input type=\"text\" value=\"\" autocomplete=\"off\" placeholder=\"${ __('Search..') }\" class=\"form-control edit-item\" data-id=\"\" data-index=\"\" list=\"item-suggestions\">\n                                <span class=\"select-list-group__toggle\"> </span>\n                                <ul class=\"s-list my-1 shadow-sm\" data-toggle=\"false\"></ul>\n                                <datalist id=\"item-suggestions\" class=\"fs-12 d-none\"></datalist>\n                            </div>\n                        </td>\n                        <td class=\"qty\">\n                            <div class=\"me-1 me-sm-3\">\n                                <input type=\"text\" value=\"\" autocomplete=\"off\" class=\"form-control text-right edit-qty\">\n                            </div>\n                        </td>\n                        <td class=\"tp\">\n                            <div class=\"me-1 me-sm-3\">\n                                <input type=\"text\" value=\"\" autocomplete=\"off\" class=\"form-control edit-tp\">\n                            </div>\n                        </td>\n                        <td class=\"align-middle text-center\"> \n                            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 16 16\" width=\"24\" height=\"24\" class=\"bi bi-plus-circle text-success align-middle add-item\"><path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"></path><path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"></path></svg>\n                        </td>\n                    </tr>`;\n\n            html += `</table>`;\n        \n        return html;\n        default: return item;\n    }\n  },\n  itemOptions: (item) => {\n\n    let options = `\n\n        <div class=\"dropdown text-center\">\n            <a  href=\"#\" role=\"button\" id=\"order-item-options\" data-id=\"status\" data-value=\"\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-three-dots-vertical order-item-options\" viewBox=\"0 0 16 16\"><path d=\"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"/></svg>\n            </a>\n            <ul class=\"dropdown-menu\" aria-labelledby=\"order-item-options\" >\n                <li><a class=\"oio dropdown-item edit-item-note\" data-key=\"edit-item-note\" href=\"#\">${ __('Add note') }</a></li>\n                <li><a class=\"oio dropdown-item\" data-key=\"edit-item-variation\" href=\"#\">${ __('Add variation') }</a></li>\n                <li><a class=\"oio dropdown-ite d-none\" data-key=\"edit-item-price\" href=\"#\">${ __('Adjust price') }</a></li>\n                <li><a class=\"oio dropdown-item text-danger remove-item\" data-key=\"remove-item\" href=\"#\">${ __('Remove') }</a></li>\n            </ul>\n        </div>\n    `;\n\n    return options;\n  },\n  structOrderItemTable: (x, item) => {\n\n    // parse variations\n    let vars = '', output = ''\n    for(let v in item[x].variations){\n\n        // parse variation list\n        let list = ''; for(let l in item[x].variations[v].list) list += item[x].variations[v].list[l].title + \" \";\n        vars += '<div><b>' + item[x].variations[v].title + \"</b> <span>\" + list + \"</span></div> \";\n\n        // meal note\n        if(item[x].variations[v].note !== undefined && item[x].variations[v].note.length > 0) vars += \"<div><b>\" + __('Note') + \"</b> \" + item[x].variations[v].note + \"</div> \";\n    }\n\n    output += '<tr class=\"order-item-row-active\" data-id=\"'+item[x].id+'\">';\n    output += '<td><div class=\"item-title\" contenteditable=\"false\" data-value=\"'+item[x].title+'\" data-sdesc=\"'+item[x].sdesc+'\">' + item[x].title + '</div><div class=\"item-note text-muted mb-1 '+( item[x].note.length==0 || item[x].note == '<br>' ? \"d-none\" : \"\" )+'\" contenteditable=\"true\" data-value=\"'+item[x].note+'\">' + item[x].note + '</div><div class=\"vars border-primary item-variations\">' + vars + '</div></td><td class=\"qty\"><div class=\"me-1 me-sm-3 item-qty\" data-value=\"'+item[x].qty+'\">' + item[x].qty + '</div></td><td class=\"tp\"><div class=\"me-1 me-sm-3 item-pricef\" data-price=\"'+item[x].price+'\" data-value=\"'+item[x].priceF+'\" >' + formatPrice(item[x].priceF) + '</div><td>'+preview.itemOptions(item[x])+'</td></td>';\n    output += '</tr>';\n\n    return output;\n  },\n  suggestOrderItem: (_this) => {\n            \n    onKeyUp('.edit-item', (e) => {\n        \n      // disbale some key for better UX\n      var key = e.keyCode || e.charCode;\n      if (key >= 34 && key <= 45) { return; }\n\n      let s  = e.currentTarget.value;\n\n      // empty search string\n      if(s.length==0 || e.currentTarget !==document.activeElement) { document.querySelector('.s-list').dataset.toggle = false; return; }\n\n      // do API query\n      fetch('https://api-v1.kenzap.cloud/', {\n          method: 'post',\n          headers: headers,\n          body: JSON.stringify({\n              query: {\n                  products: {\n                      type:       'find',\n                      key:        'ecommerce-product',\n                      fields:     ['_id', 'id', 'img', 'status', 'price', 'title'],\n                      limit:      _this.state.slist,\n                      offset:     s.length > 0 ? 0 : getPageNumber() * _this.state.slist - _this.state.slist,    // automatically calculate the offset of table pagination\n                      search:     {                                                           // if s is empty search query is ignored\n                                      field: 'title',\n                                      s: s\n                                  },\n                      sortby:     {\n                                      field: 'title',\n                                      order: 'DESC'\n                                  },\n                  }\n              }\n          })\n      })\n      .then(response => response.json())\n      .then(response => {\n\n          // hide UI loader\n          hideLoader();\n\n          console.log(response);\n\n          if(response.success){\n\n              _this.state.productsSuggestions = response.products;\n\n              let options = ``;\n              response.products.forEach((product, index) => {\n\n                  // options += `<option class=\"pso\" data-id=\"${ product._id }\" data-title=\"${ product.title }\" data-index=\"${ index }\" value=\"${ product.title }\">${ product.title }</option>`; \n                  options += `<li class=\"s-list-item py-1\" data-id=\"${ product._id }\" data-title=\"${ product.title }\" data-index=\"${ index }\"  data-display=\"true\" data-highlight=\"false\">${ product.title }</li>`; \n              });\n              document.querySelector('.s-list').innerHTML = options;\n              document.querySelector('.s-list').dataset.toggle = true;\n\n              // suggestion click listener \n              onClick('.s-list-item', (e) => {\n\n                  let index = e.currentTarget.dataset.index;\n\n                  // console.log(index);\n                  // console.log(_this.state.productsSuggestions[index]);\n                  \n                  document.querySelector('.edit-item').dataset.index = index;   \n                  document.querySelector('.edit-item').dataset.id = _this.state.productsSuggestions[index]._id;   \n                  document.querySelector('.edit-item').value = _this.state.productsSuggestions[index].title;   \n                  document.querySelector('.edit-qty').value = 1;\n                  document.querySelector('.edit-qty').dataset.price = _this.state.productsSuggestions[index].price;\n                  document.querySelector('.edit-tp').value = _this.state.productsSuggestions[index].price;\n                  document.querySelector('.s-list').dataset.toggle = false;\n\n                  let calcPriceF = () => {\n\n                      let priceF = parseFloat(document.querySelector('.edit-qty').value) * parseFloat(document.querySelector('.edit-qty').dataset.price);\n                      if(isNaN(priceF)) priceF = \"\";\n                      document.querySelector('.edit-tp').value = priceF;\n                  }\n\n                  // auto update price when quantity is changed\n                  document.querySelector('.edit-qty').addEventListener('keypress', (e)=>{\n\n                      console.log(e.which);\n\n                      if(e.which != 8 && isNaN(String.fromCharCode(e.which))){\n\n                          e.preventDefault(); // stop character from entering input\n                          return false;\n                      }\n\n                  });\n\n                  document.querySelector('.edit-qty').addEventListener('keydown', (e)=>{\n\n                      console.log('keydown');\n                      setTimeout(() => { calcPriceF(); }, 300);\n\n                  });\n\n                  // // auto update price when quantity is changed\n                  // document.querySelector('.edit-qty').addEventListener('keypress', (e)=>{\n\n                  //     console.log(e.which);\n\n                  //     setTimeout(() => {\n\n                  //         let priceF = parseFloat(document.querySelector('.edit-qty').value) * parseFloat(document.querySelector('.edit-qty').dataset.price);\n                  //         if(isNaN(priceF)) priceF = \"\";\n                  //         document.querySelector('.edit-tp').value = priceF;\n\n                  //     }, 300);\n\n                  //     if(e.which != 8 && isNaN(String.fromCharCode(e.which))){\n\n                  //         e.preventDefault(); // stop character from entering input\n                  //         return false;\n                  //     }\n\n                  // });\n\n                  // price can be float number only\n                  document.querySelector('.edit-tp').addEventListener('keypress', (e)=>{\n\n                      console.log(e.which);\n\n                      if(e.which != 8 && e.which != 46 && isNaN(String.fromCharCode(e.which))){\n\n                          e.preventDefault(); // stop character from entering input\n                          return false;\n                      }\n                  });\n                                          \n              });\n\n          }else{\n\n              parseApiError(response);\n          }\n      })\n      .catch(error => { console.log(error); parseApiError(error); });\n\n    });\n  },\n  tableOrderItemListeners: (e) => {\n\n    // make note field visible below the order item\n    onClick('.edit-item-note', (e) => {\n\n      let noteEl = e.currentTarget.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector('.item-note');\n      console.log(noteEl);\n      noteEl.classList.remove('d-none');\n      noteEl.focus();\n    });\n\n    // remove order item\n    onClick('.remove-item', (e) => {\n\n        e.currentTarget.parentElement.parentElement.parentElement.parentElement.parentElement.remove();\n    });\n  },\n  /*\n  order JSON structure example\n  {\n      \"id\": \"pDqeWHGI1648563700945\",\n      \"idd\": \"ItqvUvlY1648563462357\",\n      \"kid\": \"7851\",\n      \"sid\": \"1000452\",\n      \"from\": \"1 - WP Asia\",\n      \"name\": \"WP Asia\",\n      \"note\": \"\",\n      \"step\": 1,\n      \"items\": {\n          \"24adf24670cf977efe9386b781c9dc18124ac54b\": {\n              \"id\": \"24adf24670cf977efe9386b781c9dc18124ac54b\",\n              \"qty\": 2,\n              \"note\": \"\",\n              \"type\": \"new\",\n              \"index\": \"27\",\n              \"price\": 10,\n              \"sdesc\": \"Deep Fried Gyoza with Mentai Sauce\",\n              \"title\": \"11. MENTAI GYOZA\",\n              \"priceF\": 20,\n              \"variations\": []\n          },\n          \"c070bdb900bb47605b0056f96e7c4c9108fa22fe\": {\n              \"id\": \"c070bdb900bb47605b0056f96e7c4c9108fa22fe\",\n              \"qty\": 1,\n              \"note\": \"\",\n              \"type\": \"new\",\n              \"index\": \"24\",\n              \"price\": 8,\n              \"sdesc\": \"Deep-fried Sweet Prawn\",\n              \"title\": \"8. AMAEBI KARAAGE\",\n              \"priceF\": 8,\n              \"variations\": []\n          }\n      },\n      \"table\": \"1\",\n      \"total\": 28,\n      \"status\": \"new\",\n      \"created\": 1648563701,\n      \"updated\": 1648563701\n  }\n  */\n  addOrderItem: (_this) => {\n\n    onClick('.add-item', (e) =>{\n\n      let x = 0, itemArr = [], item = {};\n\n      item.id = document.querySelector('.edit-item').dataset.id;   \n      item.title = document.querySelector('.edit-item').value;   \n      item.priceF = document.querySelector('.edit-tp').value;\n      item.qty = document.querySelector('.edit-qty').value;\n      item.note = \"\";\n      item.variations = [];\n\n      if(item.title.length<2){ alert(__('Incorrect product data')); return; }\n\n      itemArr.push(item);\n\n      let itemRow = preview.structOrderItemTable(x, itemArr);\n\n      document.querySelector('.new-item-row').insertAdjacentHTML(\"beforebegin\", itemRow);\n\n      preview.tableOrderItemListeners();\n\n      // clear fields\n      item.title = document.querySelector('.edit-item').value = \"\";   \n      item.priceF = document.querySelector('.edit-tp').value = \"\";\n      item.qty = document.querySelector('.edit-qty').value = \"\";\n    });\n  },\n}","export const HTMLContent = (__) => {\n\n    return `\n      <div class=\"container ec-orders\">\n        <div class=\"d-md-flex justify-content-between bd-highlight mb-3\">\n            <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n            <button class=\"btn btn-primary btn-add mt-3 mb-1 mt-md-0 mb-md-0\" type=\"button\">${ __('New order') }</button>\n        </div>\n        <div class=\"row\">\n          <div class=\"col-md-12 page-title\">\n            <div class=\"st-opts st-table mb-3 dropdown\">\n                <a class=\"btn btn-outline-secondary dropdown-toggle\" href=\"#\" role=\"button\" id=\"order-status\" data-id=\"status\" data-value=\"\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                ${ __('All') }\n                </a>\n                <ul class=\"dropdown-menu\" aria-labelledby=\"order-status\">\n                  <li><a class=\"dppi dropdown-item\" data-key=\"\" href=\"#\" >${ __('All') }</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"new\" href=\"#\" >${ __('New') }</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"paid\" href=\"#\" >${ __('Paid') }</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"processing\" href=\"#\" >${ __('Processing') }</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"completed\" href=\"#\" >${ __('Completed') }</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"canceled\" href=\"#\" >${ __('Canceled') }</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"failed\" href=\"#\" >${ __('Failed') }</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"refunded\" href=\"#\" >${ __('Refunded') }</a></li>\n                </ul>\n            </div>\n            <div class=\"st-opts\" >\n              <div class=\"input-group-sm mb-0 justify-content-start mb-3 mb-sm-0\" >\n                <input id=\"usearch\" type=\"text\" class=\"inp form-control search-input\" autocomplete=\"off\" placeholder=\"${ __('Search order') }\">\n              </div>\n              <!-- <a id=\"viewSum\" href=\"#\" style=\"margin-left:16px;\">view summary</a> -->\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-md-12 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n            <div class=\"card border-white shadow-sm border-0\">\n              <div class=\"card-body p-0\">\n \n                <div class=\"table-responsive\">\n                  <table class=\"table table-hover table-borderless align-middle table-striped table-p-list mb-0\">\n                    <thead>\n                      <tr>\n                        <th><span class=\"ps-1\">${ __('From') }</span></th>\n                        <th class=\"d-none d-sm-table-cell\">${ __('Status') }</th>\n                        <th>${ __('Total') }</th>\n                        <th class=\"d-none d-sm-table-cell\">${ __('Time') }</th>\n                        <th></th>\n                      </tr>\n                    </thead>\n                    <tbody class=\"list\">\n\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"modal order-modal\" tabindex=\"-1\">\n        <div class=\"modal-dialog \">\n          <div class=\"modal-content\">\n              <div class=\"modal-header\">\n                <h5 class=\"modal-title\"></h5>\n                <button type=\"button\" class=\"btn-close align-self-start-remove\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n              </div>\n              <div class=\"modal-body\">\n              \n              </div>\n              <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-primary\"></button>\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"></button>\n              </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"position-fixed bottom-0 p-sm-2 m-sm-4 end-0 align-items-center\" >   \n        <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n          <div class=\"d-flex\">  \n            <div class=\"toast-body\"></div>\n            <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n          </div>\n        </div>\n      </div>\n    `;\n}","// js dependencies\nimport { headers, showLoader, hideLoader, initHeader, initFooter, initBreadcrumbs, parseApiError, getCookie, onClick, onKeyUp, getSiteId, toast, link, onChange } from '@kenzap/k-cloud';\nimport { timeConverterAgo, formatPrice, getPageNumber } from \"../_/_helpers.js\"\nimport { preview } from \"../_/_order_preview.js\"\nimport { HTMLContent } from \"../_/_cnt_orders.js\"\n\n// where everything happens\nconst _this = {\n  \n    state: {\n        firstLoad: true,\n        firstTouch: true,\n        playSoundNow: false,\n        newOrderCount: 0,\n        orderIDs: [],\n        orders: [],\n        playTitleTimer: null,\n        refreshTimer: null,\n        statuses: [],\n        audio: new Audio('https://kenzap.com/static/swiftly.mp3'),\n        limit: 50, // number of records to load per table\n        slistLimit: 10, // product suggestion fetch search limit\n        productsSuggestions: []\n    },\n    init: () => {\n         \n        _this.getData();\n\n        // _this.state.refreshTimer = setInterval(() => { _this.getData(); }, 7000);\n    },\n    getData: () => {\n\n        // show loader during first load\n        if (_this.state.firstLoad) showLoader();\n\n        // search content\n        let s = document.querySelector('.search-input') ? document.querySelector('.search-input').value : '';\n\n        // search term \n        let term = document.querySelector('#order-status') ? document.querySelector('#order-status').dataset.value: '';\n        \n        // do API query\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: headers,\n            body: JSON.stringify({\n                query: {\n                    user: {\n                        type:       'authenticate',\n                        fields:     ['avatar'],\n                        token:      getCookie('kenzap_token')\n                    },\n                    locale: {\n                        type:       'locale',\n                        source:      ['extension'],\n                        key:         'ecommerce',\n                    },\n                    orders: {\n                        type:       'find',\n                        key:        'ecommerce-order',\n                        fields:     '*',\n                        term:       term != '' ? 'status=\\'' + term +'\\'' : '',\n                        limit:      _this.state.limit,\n                        search:     {                                                           // if s is empty search query is ignored\n                            field: 'from',\n                            s: s\n                        },\n                        sortby:     {\n                            field: 'created',\n                            order: 'DESC'\n                        }\n                    }\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // hide UI loader\n            hideLoader();\n\n            if(response.success){\n                \n                // init header\n                initHeader(response);\n\n                // get core html content \n                _this.loadPageStructure();  \n\n                // render table\n                _this.renderPage(response);\n\n                // bind content listeners\n                _this.initListeners();\n            \n                // initiate footer\n                _this.initFooter();\n\n                // first load\n                _this.state.firstLoad = false;\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    },\n    authUser: (response) => {\n\n        if(response.user){\n            \n            if(response.user.success == true){\n\n                \n            }\n        }\n    },\n    loadPageStructure: () => {\n\n        if(!_this.state.firstLoad) return;\n\n        // get core html content \n        document.querySelector('#contents').innerHTML = HTMLContent(__);\n    },\n    renderPage: (response) => {\n\n        if(_this.state.firstLoad){\n\n            // initiate breadcrumbs\n            initBreadcrumbs(\n                [\n                    { link: link('https://dashboard.kenzap.cloud'), text: __('Dashboard') },\n                    { link: link('/'), text: __('E-commerce') },\n                    { text: __('Orders') }\n                ]\n            );\n\n            // initialize statuses\n            _this.state.statuses = {\n                'new': { \n                    text: __('New'),\n                    class: 'btn-warning text-dark fw-light'\n                },\n                'processing': { \n                    text: __('Processing'),\n                    class: 'btn-primary fw-light'\n                },\n                'completed': { \n                    text: __('Completed'),\n                    class: 'btn-success fw-light'\n                },\n                'canceled': { \n                    text: __('Canceled'),\n                    class: 'btn-secondary fw-light'\n                },\n                'failed': { \n                    text: __('Failed'),\n                    class: 'btn-danger fw-light'\n                }\n            };\n        }\n\n        // cache orders globally\n        _this.state.orders = response.orders;\n\n        // no orders in the list\n        if (response.orders.length == 0) {\n\n            document.querySelector(\".table tbody\").innerHTML = `<tr><td colspan=\"5\">${ __(\"No orders to display.\") }</td></tr>`;\n            return;\n        }\n\n        // generate website table\n        let orderIDsTemp = [];\n        _this.state.newOrderCount = [];\n\n        let list = '', count_new = 0;\n        for (let i in response.orders) {\n\n            let img = 'https://cdn.kenzap.com/loading.png';\n            orderIDsTemp.push(response.orders[i]._id);\n\n            if(typeof(response.orders[i].status) === 'undefined') response.orders[i].status = 'new';\n\n            if(response.orders[i].status == 'new') count_new ++;\n            // if(typeof(response.products[i].img) === 'undefined') response.products[i].img = [];\n            // // if(typeof(response.products[i].img) !== 'undefined' && response.products[i].img[0] == 'true') img = 'https://preview.kenzap.cloud/S1000452/_site/images/product-'+response.products[i].id+'-1-100x100.jpeg?1630925420';\n            // if(response.products[i].img[0]) img = CDN + '/S'+sid+'/product-'+response.products[i]._id+'-1-100x100.jpeg?'+response.products[i].updated;\n                \n            let classN = ((_this.state.orderIDs.includes(response.orders[i]._id) || _this.state.firstLoad)?'':'new');\n            list += `\n            <tr class=\"${ classN }\">\n              <td class=\"details\">\n                <div class=\"ps-1 view-order\" data-id=\"${ response.orders[i]._id }\" data-index=\"${ i }\">\n                  <b class=\"\">${ response.orders[i].from }</b>\n                  <div class=\" elipsized fst-italic\">${ response.orders[i].note ? response.orders[i].note : \"\" }</div>\n                  <div class=\" d-sm-none\"> <span class=\"me-2\">${ _this.getStatus(response.orders[i].status) }</span> <span class=\"text-muted\">${ timeConverterAgo(response.meta.time, response.orders[i].created) }</span> </div>\n                </div>\n              </td>\n              <td class=\"d-none d-sm-table-cell\">\n                <span style=\"font-size:24px;\">${ _this.getStatus(response.orders[i].status) }</span>\n              </td>\n              <td>\n                <span style=\"font-size:18px;\">${ formatPrice(response.orders[i].total) }</span>\n              </td>\n              <td class=\"d-none d-sm-table-cell\">\n                <span style=\"font-size:18px;\">${ timeConverterAgo(response.meta.time, response.orders[i].created) }</span>\n              </td>\n              <td class=\"last\">\n                <a href=\"#\" data-id=\"${ response.orders[i]._id }\" data-index=\"${ i }\" class=\"view-order text-success d-none me-4\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\n                    <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z\"/>\n                    <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\"/>\n                </svg></a>\n                <a href=\"#\" data-id=\"${ response.orders[i]._id }\" data-index=\"${ i }\" class=\"remove-order text-danger me-2\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\">\n                    <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/>\n                    <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/>\n                </svg></a>\n              </td>\n            </tr>`;\n        }\n        \n        _this.state.playSoundNow = count_new > 0 ? true : false;\n\n        // if(_this.state.playSoundNow) _this.playSound();\n        // if(_this.state.newOrderCount>0) _this.playTitle('('+_this.state.newOrderCount+') new orders.');\n\n        // _this.state.firstLoad = false;\n        _this.state.orderIDs = orderIDsTemp;\n\n        // provide result to the page\n        document.querySelector(\".table tbody\").innerHTML = list;\n    },\n    // parse visual page status\n    getStatus: (status) => {\n    \n        return `<div class=\"badge ${ _this.state.statuses[status].class }\">${ _this.state.statuses[status].text }</div>`;\n    },\n    // play notification sound. Ex.: when new order received\n    playSound: () => {\n \n        \n        // var audiosWeWantToUnlock = [];\n        // audiosWeWantToUnlock.push(new Audio('https://kenzap.com/static/swiftly.mp3'))\n       \n        //where earlier you did:var audiosWeWantToUnlock = []audiosWeWantToUnlock.push(new Audio('mySoundEffect.wav'))audiosWeWantToUnlock.push(new Audio('myOtherSoundEffect.wav'))\n\n        console.log('playSound');\n\n        // const audio = new Audio(\"https://kenzap.com/static/swiftly.mp3\");\n        _this.state.audio.play();\n\n    },\n    playTitle: (msg) => {\n\n        // if(_this.state.playTitleTimer) clearInterval(_this.state.playTitleTimer);\n        // _this.state.playTitleTimer = setInterval(() => { if(_this.state.playSoundNow) _this.playSound(); }, 6500);\n\n        // if(_this.state.playTitleTimer) clearInterval(_this.state.playTitleTimer);\n        // if(_this.state.playTitleTimer2) clearInterval(_this.state.playTitleTimer2);\n    \n        // _this.state.playTitleTimer = setInterval(() => { document.title = \"Orders - Kenzap Cloud\"; }, 1000);\n        // _this.state.playTitleTimer2 = setInterval(() => {  document.title = msg; }, 2050);    \n    },\n    initListeners: () => {\n\n        // view order\n        preview.viewOrder(_this);\n        \n        // remove order\n        onClick('.remove-order', _this.listeners.removeOrder);\n\n        // table status change listener\n        onClick('.st-table li a', _this.listeners.changeStatus);\n\n        // break here if initListeners is called more than once\n        if(!_this.state.firstLoad) return;\n\n        // modal success button\n        onClick('.modal .btn-primary', _this.listeners.modalSuccessBtn);\n        \n        // search orders\n        onKeyUp('.search-input', _this.listeners.searchOrders);\n        // add product modal\n        // onClick('.btn-save', _this.saveSettings);\n        \n        document.body.addEventListener('touchstart', function() {\n\n            if(_this.state.firstTouch){\n\n                _this.state.audio.play();\n                _this.state.audio.pause();\n                _this.state.audio.currentTime = 0\n                _this.state.firstTouch = false;\n            }else{\n\n                // _this.playTitle();\n                if(_this.state.playTitleTimer) clearInterval(_this.state.playTitleTimer);\n                _this.state.playTitleTimer = setInterval(() => { if(_this.state.playSoundNow) _this.playSound(); }, 6500);\n            }\n\n        }, false);\n    },\n    listeners: {\n\n        changeStatus: (e) => {\n\n            e.preventDefault();\n\n            // console.log(e.currentTarget.dataset.key);\n\n            let os = document.querySelector('#order-status');\n            if(e.currentTarget.dataset.key == \"\"){\n                os.innerHTML = __('All')\n                os.dataset.value = '';\n            }else{\n                os.innerHTML = _this.state.statuses[e.currentTarget.dataset.key].text;\n                os.dataset.value = e.currentTarget.dataset.key;\n            }\n\n            let list = [];\n\n            // clear previous classes\n            Object.keys(_this.state.statuses).forEach((key) => {\n                list = _this.state.statuses[key].class.split(' ');\n                list.forEach((key) => { \n                    os.classList.remove(key);\n                });    \n            });\n\n            // add new classes\n            if(e.currentTarget.dataset.key==''){\n                \n                os.classList.add('btn-primary');\n            }else{\n                list = _this.state.statuses[e.currentTarget.dataset.key].class.split(' ');\n                list.forEach((key) => { \n                    os.classList.add(key);\n                });\n            }\n\n            // reload table\n            _this.getData();\n        },\n\n        \n        removeOrder: (e) => {\n\n            e.preventDefault();\n\n            let c = confirm( __('Completely remove this order?') );\n\n            if(!c) return;\n  \n            // send data\n            fetch('https://api-v1.kenzap.cloud/', {\n                method: 'post',\n                headers: headers,\n                body: JSON.stringify({\n                    query: {\n                        product: {\n                            type:       'delete',\n                            key:        'ecommerce-order',   \n                            id:         e.currentTarget.dataset.id,  \n                            sid:        getSiteId(),\n                        }\n                    }\n                })\n            })\n            .then(response => response.json())\n            .then(response => {\n\n                if (response.success){\n\n                    // modalCont.hide();\n\n                    _this.getData();\n\n                }else{\n\n                \n                    parseApiError(response);\n                }\n            })\n            .catch(error => {\n                parseApiError(error);\n            });\n        },\n        searchOrders: (e) => {\n\n            e.preventDefault();\n\n            // _this.playSound();\n\n            _this.getData();\n\n            // console.log('search products ' +e.currentTarget.value);\n        },\n        \n        modalSuccessBtn: (e) => {\n            \n            _this.listeners.modalSuccessBtnFunc(e);\n        },\n\n        modalSuccessBtnFunc: null\n    },\n    \n    updateOrder: (id) => {\n\n        let data = {};\n\n        // iterate through all fields\n        for(let s of document.querySelectorAll('.order-form')){\n\n            switch(s.dataset.type){\n          \n                case 'key': data[s.dataset.id] = s.dataset.value; break;\n                case 'items':   \n                \n                    data['items'] = {};\n                    for(let item of document.querySelectorAll('.order-item-row-active')){\n\n                        data['items'][item.dataset.id] =\n                        {\n                                \"id\": item.dataset.id,\n                                \"qty\": parseInt(item.querySelector('.item-qty').dataset.value),\n                                \"note\": item.querySelector('.item-note').innerHTML,\n                                \"type\": \"new\",\n                                \"index\": \"0\",\n                                \"price\": parseFloat(item.querySelector('.item-pricef').dataset.price),\n                                \"sdesc\": item.querySelector('.item-title').dataset.sdesc,\n                                \"title\": item.querySelector('.item-title').dataset.value,\n                                \"priceF\": parseFloat(item.querySelector('.item-pricef').dataset.value),\n                                \"variations\": []\n                        }\n                    }\n                    \n                break\n                case 'text':   \n                case 'email':  \n                case 'emails':  \n                case 'select':\n                case 'textarea': data[s.id] = s.value; break;\n                case 'radio': data[s.id] = s.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector('input:checked').value; break;\n            }\n        }\n\n        // console.log(data);\n\n        // return;\n\n        // send data\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: headers,\n            body: JSON.stringify({\n                query: {\n                    settings: {\n                        type:       'update',\n                        key:        'ecommerce-order',        \n                        sid:        getSiteId(),\n                        id:         id,\n                        data:       data\n                    }\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            if (response.success){\n\n                let toast = new bootstrap.Toast(document.querySelector('.toast'));\n                document.querySelector('.toast .toast-body').innerHTML = __('Order updated');  \n                toast.show();\n                \n                _this.getData();\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => {\n            parseApiError(error);\n        });\n    },\n    initFooter: () => {\n        \n        initFooter(__('Copyright © %1$ %2$ Kenzap%3$. All rights reserved.', new Date().getFullYear(), '<a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">', '</a>'), __('Kenzap Cloud Services - Dashboard'));\n    }\n}\n\n_this.init();"],"names":["getPageNumber","urlParams","URLSearchParams","window","location","search","page","get","parseInt","formatPrice","price","formatter","Intl","NumberFormat","style","currency","parseFloat","format","timeConverterAgo","now","time","past","a","Date","months","__","year","getFullYear","month","getMonth","date","getDate","getHours","getMinutes","getSeconds","preview","viewOrder","_this","onClick","e","modal","document","querySelector","modalCont","bootstrap","Modal","i","currentTarget","dataset","index","items","Object","keys","state","statuses","forEach","key","text","statusSelect","orders","classList","add","innerHTML","html","fields","_id","l","from","editable","fname","lname","bios","avatar","email","countryr","cityr","addr1","addr2","post","c1","c2","c3","c4","c5","x","undefined","val","field","renderField","show","tableOrderItemListeners","suggestOrderItem","addEventListener","setTimeout","toggle","addOrderItem","listeners","modalSuccessBtnFunc","preventDefault","updateOrder","hide","osm","value","list","split","remove","item","structOrderItemTable","itemOptions","options","vars","output","v","variations","title","note","length","id","sdesc","qty","priceF","onKeyUp","keyCode","charCode","s","activeElement","fetch","method","headers","body","JSON","stringify","query","products","type","limit","slist","offset","sortby","order","then","response","json","hideLoader","console","log","success","productsSuggestions","product","calcPriceF","isNaN","which","String","fromCharCode","parseApiError","error","noteEl","parentElement","focus","itemArr","alert","push","itemRow","insertAdjacentHTML","HTMLContent","firstLoad","firstTouch","playSoundNow","newOrderCount","orderIDs","playTitleTimer","refreshTimer","audio","Audio","slistLimit","init","getData","showLoader","term","user","token","getCookie","locale","source","initHeader","loadPageStructure","renderPage","initListeners","initFooter","authUser","initBreadcrumbs","link","orderIDsTemp","count_new","status","classN","includes","getStatus","meta","created","total","playSound","play","playTitle","msg","removeOrder","changeStatus","modalSuccessBtn","searchOrders","pause","currentTime","clearInterval","setInterval","os","c","confirm","sid","getSiteId","data","querySelectorAll","settings","toast","Toast"],"mappings":"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"}