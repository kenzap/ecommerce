!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function t(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,c=function(){};return{s:c,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,r=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw r}}}}function r(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const l=(e,t,...n)=>{let o=(e,t)=>(t.forEach(((t,n)=>{e=e.replace("%"+(n+1)+"$",t)})),e);return void 0===window.i18n||void 0===window.i18n.state.locale.values[e]?o(e,n):o(t(window.i18n.state.locale.values[e]),n)},i=e=>0===(e=String(e)).length?"":e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e]))),s=(e,...t)=>{if(0===(e=String(e)).length)return"";return l(e,(e=>e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e])))),...t)},d=()=>{let e=document.querySelector(".loader");e&&(e.style.display="block")},u=()=>{let e=document.querySelector(".loader");e&&(e.style.display="none")},m=e=>{let t=new URLSearchParams(window.location.search),n=t.get("sid")?t.get("sid"):"",o=-1==e.indexOf("?")?"?sid="+n:"&sid="+n;return e+o},p=()=>{let e=new URLSearchParams(window.location.search);return e.get("sid")?e.get("sid"):""},v=e=>{let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let e=0;e<n.length;e++){let o=n[e];for(;" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""},f=()=>{let e=localStorage.hasOwnProperty("header")&&localStorage.hasOwnProperty("header-version")?localStorage.getItem("header-version"):0,t=window.location.hostname+"/"+p()+"/"+v("locale");return t!=v("check")&&(e=0,console.log("refresh")),((e,t,n)=>{let o="";if(n){let e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),o=";expires="+e.toUTCString()}document.cookie=e+"="+(escape(t)||"")+o+";path=/;domain=.kenzap.cloud"})("check",t,5),e},y=()=>({Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+v("kenzap_api_key"),"Kenzap-Locale":v("locale")?v("locale"):"en","Kenzap-Header":f(),"Kenzap-Token":v("kenzap_token"),"Kenzap-Sid":p()});v("kenzap_api_key"),v("locale")&&v("locale"),f(),v("kenzap_token"),p();const h=e=>{if(console.log(e),isNaN(e.code)){let t=e;try{t=JSON.stringify(t)}catch(e){}let n=new URLSearchParams;return n.append("cmd","report"),n.append("sid",p()),n.append("token",v("kenzap_token")),n.append("data",t),fetch("https://api-v1.kenzap.cloud/error/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:n}),void alert("Can not connect to Kenzap Cloud")}if(401===e.code){if(-1!=window.location.href.indexOf("localhost"))return void alert(e.reason);location.href="https://auth.kenzap.com/?app=65432108792785&redirect="+window.location.href}else alert(e.reason)},b=(e,t)=>{if(document.querySelector(e))for(let n of document.querySelectorAll(e))n.removeEventListener("click",t,!0),n.addEventListener("click",t,!0)},g=(e,t)=>{if(document.querySelector(e))for(let n of document.querySelectorAll(e))n.removeEventListener("change",t,!0),n.addEventListener("change",t,!0)},k=e=>{let t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)},w=e=>{if(!document.querySelector(".toast")){let e='\n        <div class="toast-cont position-fixed bottom-0 p-2 m-4 end-0 align-items-center" style="z-index:10000;">\n            <div class="toast hide align-items-center text-white bg-dark border-0" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="3000">\n                <div class="d-flex">\n                    <div class="toast-body"></div>\n                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>\n                </div>\n            </div>\n        </div>';document.querySelector("body > div")&&document.querySelector("body > div").insertAdjacentHTML("afterend",e)}let t=new bootstrap.Toast(document.querySelector(".toast"));document.querySelector(".toast .toast-body").innerHTML=e,t.show()};var S,x,q,L=function(){var e=new URLSearchParams(window.location.search);return e.get("id")?e.get("id"):""},T=function(e,t){switch(t=_(t),t=(Math.round(100*parseFloat(t))/100).toFixed(2),e.state.settings.currency_symb_loc){case"left":t=e.state.settings.currency_symb+" "+t;break;case"right":t+=e.state.settings.currency_symb}return t},_=function(e){return e=e||0,e=parseFloat(e),e=Math.round(100*e)/100},M=function(e,t){document.querySelector(e)&&(t.push.apply(t,[9,37,38,39,40,98,100,102,104]),n(document.querySelectorAll(e)).forEach((function(e){e.addEventListener("keydown",(function(e){var n=e.key.toLowerCase();"control"!=n&&"meta"!=n||(window[n]=!0),console.log(n.length+" / "+o+" / "+e.which);var o=n>="0"&&n<="9";return(window.control||window.meta)&&[86,88,65,67,90].includes(e.which)?(console.log("pushing"),!0):o||t.includes(e.which)?void 0:(e.preventDefault(),!1)})),e.addEventListener("keyup",(function(e){var t=e.key.toLowerCase();"control"!=t&&"meta"!=t||(window[t]=!1)}))})))},A=function(e,t){if(!t)throw new Error("DOM Element is undifined! Please choose HTML target element.");var n,o,a,c,r,l,i=t;function s(){n.innerHTML="",c.forEach((function(e,t){if(e=e.trim()){var o=document.createElement("li");o.innerHTML="".concat(e," <a>&times;</a>"),o.querySelector("a").addEventListener("click",(function(){var e;e=t,c=c.filter((function(t,n){return n!==e&&t})),s()})),n.appendChild(o)}})),i.setAttribute("data-simple-tags",c.toString())}a=(a=i.getAttribute("data-simple-tags")).split(","),c=a.map((function(e){return e.trim()})),r=document.createElement("ul"),(l=document.createElement("input")).setAttribute("placeholder",e("new category")),i.appendChild(r),i.appendChild(l),n=i.firstElementChild,o=i.lastElementChild,s(),o.addEventListener("keyup",(function(e){var t=this.value.trim();(t.includes(",")||13===e.keyCode)&&(""!==t.replace(",","")&&c.push(t.replace(",","")),this.value=""),s()}))},z=function(e){return'\n  <div class="container p-edit">\n    <div class="d-flex justify-content-between bd-highlight mb-3">\n        <nav class="bc" aria-label="breadcrumb"></nav>\n        \n    </div>\n    <div class="row">\n        <div class="col-lg-9 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card">\n            <div class="sections" id="sections" role="tablist" style="width:100%;">\n\n                <div class="row">\n                    <div class="col-12 grid-margin stretch-card">\n                        <div class="card border-white shadow-sm p-sm-3">\n                            <div class="card-body">\n\n                                <div class="landing_status"></div>\n                                <input type="hidden" class="form-control" id="landing-slug" value="">\n\n                                <h4 id="elan" class="card-title mb-4">'.concat(s("Description"),'</h4>\n\n                                <div id="placeholders">\n\n                                    <div class="mb-3">\n                                        <label class="banner-title-l form-label" for="p-title">').concat(s("Title"),'</label>\n                                        <input type="text" class="form-control inp" id="p-title" placeholder="').concat(((e,...t)=>0===(e=String(e)).length?"":l(e,(e=>e.replace(/[<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e])))),...t))("Sushi set.."),'">\n                                        <p class="form-text"> </p>\n                                    </div>\n\n                                    <div class="mb-3">\n                                        <label class="banner-descshort-l form-label" for="p-sdesc">').concat(s("Short Description"),'</label>\n                                        <textarea class="form-control inp" id="p-sdesc" placeholder="  " maxlength="120" rows="2"></textarea>\n                                    </div>\n\n                                    <div class="mb-3">\n                                        <label class="banner-descshort-l form-label" for="desc">').concat(s("Images"),'</label>\n                                        <div class="clearfix"></div>\n                                        <div class="ic"></div>\n                                        <div class="clearfix"></div>\n                                    </div>\n\n                                    <div class="mb-3">\n                                        <div class="clearfix"></div>\n                                        <div style="clear:both;margin-top:16px;"></div>\n                                        <label class="banner-descshort-l form-label" for="p-desc">').concat(s("Description"),'</label>\n                                        <textarea class="form-control inp" id="p-ldesc" placeholder=" " maxlength="2000" rows="10"></textarea>\n                                    </div>\n\n                                    <div class="mb-3 mw">\n                                        <div class="list-wrapper">\n                                            <ul class="d-flex flex-column-reverse features"> </ul>\n                                        </div>\n                                        <p class="form-text"> </p>\n                                    </div>\n\n                                    <div class="price_group mt-3 mb-3">\n                                        <h4 class="card-title mb-3">').concat(s("Price"),'</h4>\n                                        <div class="price_group_base">\n                                            <div class="mb-3">\n                                                <div class="input-group">\n                                                    <div id="p-price-c">\n                                                        <label for="p-price" class="form-label">').concat(s("Default"),' <span class="lang"></span></label>\n                                                        <div class="input-group pe-3 mb-3">\n                                                            <span id="p-price-symb" class="input-group-text">$</span>\n                                                            <input id="p-price" type="text" class="form-control inp" placeholder="55.00" autocomplete="off">\n                                                        </div>\n                                                    </div>\n                                                    <div id="p-priced-c" class="d-flex align-content-end flex-wrap">\n                                                        <a class="btn btn-outline-secondary mb-3 add-discount" href="#" role="button" id="btn-discount" >\n                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg>\n                                                            ').concat(s("discount"),'\n                                                        </a>\n                                                        <div class="d-none">\n                                                            <label for="p-priced pe-3 mb-3" class="form-label">').concat(s("Discounted"),' <span class="lang"></span></label>\n                                                            <input id="p-priced" type="text" class="form-control" placeholder="45.00" autocomplete="off">\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                \n                                                <div class="discount-blocks mw">\n                                                    <label class="discount-list form-label" for="discount-list ">').concat(s("Discount list"),'</label>\n                                                    <ul class="mb-4">\n                                               \n                                                    </ul>\n                                                </div>\n                                                <div class="add-mix-ctn text-left mt-3 mb-2"><a class="add-mix-block" href="#" data-action="add">').concat(s("+ add variation"),'</a></div>\n                                            </div>\n\n                                            <div class="variation-blocks">\n                        \n                                            </div>\n\n                                            <div style=\'margin:24px 0 48px;border-bottom:0px solid #ccc;\'></div>\n\n                                            <div class="mb-3 mw">\n                                                <h4 id="elan" class="card-title">').concat(s("Inventory"),'</h4>\n                                                <label for="stock_sku" class="form-label"> <span class="lang"></span></label>\n                                                <div class="input-group">\n                                                    <input id="stock_sku" type="text" style="width:100%;" class="form-control" placeholder="" maxlength="200">\n                                                    <p class="form-text">').concat(s("Product stock unit identification number or SKU."),'</p>\n                                                </div>\n                                            </div>\n\n                                            <div class="mb-3 mw">\n                                                <div class="form-check">\n                                                    <input id="stock_management" class="form-check-input stock-management" name="stock_management" type="checkbox" value="0" data-type="checkbox">\n                                                    <label class="form-check-label" for="stock_management">\n                                                        ').concat(s("Stock management"),'\n                                                    </label>\n                                                </div>\n                                                <p class="form-text">').concat(s("Enable stock management."),'</p>\n                                            </div>\n\n                                            <div class="mb-3 mw stock-cont">\n                                                <label class="form-label" for="stock_quantity">').concat(s("Stock quantity"),'</label>\n                                                <input id="stock_quantity" type="text" class="form-control" placeholder="0">\n                                                <p class="form-text">').concat(s("Total number of products left."),'</p>\n                                            </div>\n\n                                            <div class="mb-3 mw stock-cont">\n                                                <label class="form-label" for="stock_low_threshold">').concat(s("Low stock"),'</label>\n                                                <input id="stock_low_threshold" type="text" class="form-control" placeholder="0">\n                                                <p class="form-text">').concat(s("Low stock threshold."),'</p>\n                                            </div>\n\n                                            <div class="mb-3 mw stock-cont">\n                                                <label class="form-label" >').concat(s("Inventory table"),'</label>\n                                                <div class="inventory-cont">\n\n                                                </div>\n                                                <div class="add-mix-ctn text-left mt-1 mb-2"><a class="add-inventory" href="#" data-action="add" style="font-size: 0.875rem;">').concat(s("+ add inventory"),'</a></div>\n\n                                                <p class="form-text d-none">').concat(s("Low stock threshold."),'</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class="desc-repeater-cont">\n\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n\n            </div>\n        </div>\n        <div class="col-lg-3 mt-3 mt-lg-0 grid-margin grid-margin-lg-0 grid-margin-md-0">\n\n            <div class="row">\n                <div class="col-12 grid-margin stretch-card">\n                    <div class="card border-white shadow-sm p-sm-3">\n                        <div class="card-body">\n\n                            <h4 class="card-title" style="display:none;">').concat(s("General"),'</h4>\n                            <div class="landing_status"></div>\n                            <input type="hidden" class="form-control" id="landing-slug" value="">\n\n                            <h4 id="elan" class="card-title mb-4">').concat(s("Status"),'</h4>\n                            <div id="status-cont" class="mb-3">\n\n                                <div class="col-sm-12">\n                                    <div class="form-check">\n                                        <label class="form-check-label status-publish form-label">\n                                            <input type="radio" class="form-check-input" name="p-status"\n                                                id="p-status1" value="1">\n                                                ').concat(s("Published"),'\n                                        </label>\n                                    </div>\n                                </div>\n\n                                <div class="col-sm-12">\n                                    <div class="form-check">\n                                        <label class="form-check-label status-draft form-label">\n                                            <input type="radio" class="form-check-input" name="p-status"  id="p-status0" value="0">\n                                            ').concat(s("Draft"),'\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <h4 id="elan" class="card-title mb-4">').concat(s("Categories"),'</h4>\n                            <div id="p-cats" class="simple-tags mb-4" data-simple-tags=""></div>\n                            <div class="clearfix"> </div>\n\n                            <div class="d-grid gap-2">\n                                <button class="btn btn-primary btn-save" type="button">').concat(s("Save"),'</button>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n  </div>\n\n  <div class="modal p-modal" tabindex="-1">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title"></h5>\n                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n            </div>\n            <div class="modal-body">\n\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary btn-modal"></button>\n                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"></button>\n            </div>\n        </div>\n    </div>\n  </div>\n\n  <div class="position-fixed bottom-0 p-2 m-4 end-0 align-items-center">\n    <div class="toast hide align-items-center text-white bg-dark border-0" role="alert" aria-live="assertive"\n        aria-atomic="true" data-bs-delay="3000">\n        <div class="d-flex">\n            <div class="toast-body"></div>\n            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>\n        </div>\n    </div>\n  </div>\n  ')},C=function e(t){t.state.response.product.stock.inventory||(t.state.response.product.stock.inventory=[]),document.querySelector(".modal-backdrop")&&document.querySelector(".modal-backdrop").remove(),document.querySelector(".inventory-cont").innerHTML='\n    <div class="table-responsive-">\n        <table class="table table-hover table-borderless align-middle table-striped table-history-list mb-0" style="">\n            <thead>\n                <tr>\n                    <th class="form-text">\n                        '.concat(s("Title"),'\n                    </th>\n                    <th class="form-text">\n                        ').concat(s("Amount"),'\n                    </th>\n                    <th class="form-text">\n                        ').concat(s("Price"),'\n                    </th>\n                    <th>\n                    \n                    </th>\n                </tr>\n            </thead>\n            <tbody id="inventory-history">\n\n                ').concat(0==t.state.response.product.stock.inventory.length?'\n                    <tr>\n                        <td class="form-text" colspan="4">\n                            '.concat(s("no data to display"),"\n                        </td>\n                    </tr>\n                    "):"","\n\n                ").concat(t.state.response.product.stock.inventory.map((function(e,t){return'\n                            <tr>\n                                <td class="form-text text-dark">\n                                    '.concat(e.title,'\n                                </td>\n                                <td class="form-text">\n                                    <div class="fw-bold ').concat(e.amount<0?"text-danger":"text-success",'">').concat((e.amount<0?"":"+")+e.amount+e.stock_unit,'</div>\n                                </td>\n                                <td id="itid').concat(i(e.id),'" data-amount="').concat(i(e.amount),'" class="form-text text-dark">\n\n                                </td>\n                                <td class="text-end d-none-">\n                                    <div class="dropdown inventorTableActionsCont">\n                                        <svg id="inventoryHistoryActions').concat(t,'" data-bs-toggle="dropdown" data-boundary="viewport" aria-expanded="false" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots-vertical dropdown-toggle po" viewBox="0 0 16 16">\n                                            <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>\n                                        </svg>\n                                        <ul class="dropdown-menu" aria-labelledby="inventoryHistoryActions').concat(t,'">\n                                            <li><a class="dropdown-item po d-none" href="#" data-action="copy" data-id="').concat(i(e.id),'" data-index="').concat(t,'">').concat(s("Copy"),'</a></li>\n                                            <li><hr class="dropdown-divider d-none"></li>\n                                            <li><a class="dropdown-item po" href="#" data-action="remove" data-id="').concat(i(e.id),'" data-index="').concat(t,'">').concat(s("Remove"),"</a></li>\n                                        </ul>\n                                    </div>\n                                </td>\n                            </tr>\n                        ")})).join(""),"\n\n                ").concat(t.state.response.product.stock.inventory.length>0?'\n                    <tr>\n                        <td class="form-text"></td>\n                        <td class="form-text"></td>\n                        <td id="itidtotal" class="form-text" colspan="2">\n                            \n                        </td>\n                    </tr>\n                    ':"","\n\n            </tbody>\n        </table>\n    </div>\n    "),n(document.querySelectorAll(".inventorTableActionsCont .dropdown-item")).forEach((function(e){e.addEventListener("click",(function(e){switch(e.preventDefault(),e.currentTarget.dataset.action){case"copy":break;case"remove":if(!confirm(s("Remove this record?")))return;o(t,e.currentTarget.dataset.id)}}))})),document.querySelector(".add-inventory").dataset.assigned||document.querySelector(".add-inventory").addEventListener("click",(function(o){o.preventDefault(),document.querySelector(".add-inventory").dataset.assigned=!0;var a=document.querySelector(".modal");t.state.modalCont=new bootstrap.Modal(a),a.querySelector(".modal-dialog").classList.add("modal-lg"),a.querySelector(".modal-title").innerHTML=s("Add Inventory Item"),a.querySelector(".modal-footer").innerHTML='\n            <button type="button" class="btn btn-success btn-modal btn-add btn-inventory-add d-none">'.concat(s("Add"),'</button>\n            <button class="btn btn-outline-secondary remove-application btn-lg d-none" type="button" title="').concat(s("Remove application."),'"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/></svg></span></button>\n            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">').concat(s("Close"),"</button>\n        "),a.querySelector(".modal-body").innerHTML='\n            <div class="row mb-4">\n                <div class="col-sm-12">\n                    <div class="table-responsive-">\n                        <table class="table table-hover table-borderless align-middle table-striped table-inventory-list mb-0" style="">\n                            <thead>\n                                <tr>\n                                    <th>\n                                        '.concat(s("Title"),"\n                                    </th>\n                                    <th>\n                                        ").concat(s("Amount"),'\n                                    </th>\n                                    <th>\n                                    \n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody id="inventory-list">\n                                <tr>\n                                    <td colspan="3">\n                                        ').concat(s("Loading"),"\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        ");!function(t){var o,a;fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:y(),body:JSON.stringify({query:{inventory:{type:"find",key:"ecommerce-inventory",fields:["_id","img","status","tags","price","price_prev","price_per_unit","price_per_unit_prev","title","stock_amount","stock_unit","stock_warning","updated"],limit:50,offset:"".length>0?0:50*(o=new URLSearchParams(window.location.search),a=o.get("page")?o.get("page"):1,parseInt(a))-50,search:{field:"title",s:""},sortby:{field:"created",order:"DESC"}}}})}).then((function(e){return e.json()})).then((function(o){if(o.success){if(t.state.inventory=o.inventory,0==o.inventory.length)return void(document.querySelector("#inventory-list").innerHTML='<tr><td colspan="3" class="form-text">'.concat(s("No data to display."),"</td></tr>"));document.querySelector("#inventory-list").innerHTML=o.inventory.map((function(e,t){return'\n                            <tr>\n                                <td data-id="'.concat(i(e._id),'">\n                                    ').concat(e.title,'\n                                </td>\n                                <td data-id="').concat(i(e._id),'">\n                                    <div class="input-group mb-sm-2" style="max-width:200px;">\n                                        <input id="stock_amount').concat(t,'" type="text" class="form-control stock_amount inp" name="stock_amount" aria-label="Current stock amount" aria-describedby="basic-addon1" value="" autocomplete="off">\n                                        <span class="input-group-text" id="stock_amount_unit">').concat(e.stock_unit,'</span>\n                                    </div>\n                                </td>\n                                <td class="text-end d-none- add-inventory-item" data-index="').concat(t,'" data-id="').concat(i(e._id),'">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-plus-circle text-success po" viewBox="0 0 16 16">\n                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n                                        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>\n                                    </svg>\n                                </td>\n                            </tr>')})).join(""),M(".stock_amount",[8,46,190,189]),n(document.querySelectorAll(".add-inventory-item")).forEach((function(n){n.addEventListener("click",(function(n){var o=n.currentTarget.dataset.index,a=document.querySelector("#stock_amount"+o).value;if(0!=a.length)if(isNaN(a))alert(s("Amount should be a number"));else if(a<0)alert(s("Amount should be a positive number"));else{var c={id:n.currentTarget.dataset.id,amount:a,title:t.state.inventory[o].title,stock_unit:t.state.inventory[o].stock_unit};!function(t,n){var o=L(),a=p();t.state.response.product.stock.inventory.push(n),fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:y(),body:JSON.stringify({query:{product:{type:"update",key:"ecommerce-product",id:o,sid:a,data:{stock:t.state.response.product.stock}}}})}).then((function(e){return e.json()})).then((function(n){n.success?(t.state.modalCont&&t.state.modalCont.hide(),e(t)):h(n)})).catch((function(e){h(e)}))}(t,c)}else alert(s("Please enter amount"))}))}))}else h(o)})).catch((function(e){h(e)}))}(t),t.state.modalCont.show()}));var o=function(t,n){var o=p();t.state.response.product.stock.inventory=t.state.response.product.stock.inventory.filter((function(e){return e.id!=n})),fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:y(),body:JSON.stringify({query:{product:{type:"update",key:"ecommerce-product",id:L(),sid:o,data:{stock:t.state.response.product.stock}}}})}).then((function(e){return e.json()})).then((function(n){n.success?(t.state.modalCont&&t.state.modalCont.hide(),e(t),w(s("Record removed"))):h(n)})).catch((function(e){h(e)}))};!function(e){var t=e.state.response.product.stock.inventory.map((function(e){return e.id}));fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:y(),body:JSON.stringify({query:{inventory_price:{type:"find",key:"ecommerce-inventory",fields:["_id","img","status","tags","price","price_prev","price_per_unit","price_per_unit_prev","title","stock_amount","stock_unit","stock_warning","updated"],id:t}}})}).then((function(e){return e.json()})).then((function(t){if(t.success){var n=0;t.inventory_price.forEach((function(t){var o=t.price_per_unit*parseFloat(document.querySelector("#itid"+t._id).dataset.amount);n+=o,document.querySelector("#itid"+t._id).innerHTML=T(e,o)})),document.querySelector("#itidtotal")&&(document.querySelector("#itidtotal").innerHTML=T(e,n))}else h(t)})).catch((function(e){h(e)}))}(t)},E=(S=function e(){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"getData",(function(){d();var e=L();fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:y(),body:JSON.stringify({query:{user:{type:"authenticate",fields:["avatar"],token:v("kenzap_token")},product:{type:"find",key:"ecommerce-product",id:e,fields:["_id","id","img","status","price","discounts","variations","title","sdesc","ldesc","stock","cats","updated"]},settings:{type:"get",key:"ecommerce-settings",fields:["currency","currency_symb","currency_symb_loc","tax_calc","tax_auto_rate","tax_rate","tax_display","scripts_product_edit","addons"]},locale:{type:"locale",source:["extension"],key:"ecommerce"}}})}).then((function(e){return e.json()})).then((function(e){var t;if(u(),e.success){if(e.success){if(n.state.response=e,n.state.settings=e.settings,(e=>{if(e.header&&localStorage.setItem("header",e.header),!document.querySelector("#k-script")){let e=document.createElement("div");e.innerHTML=localStorage.getItem("header"),e=e.firstChild,document.body.prepend(e),Function(document.querySelector("#k-script").innerHTML).call("test")}e.locale&&window.i18n.init(e.locale)})(e),document.querySelector("#contents").innerHTML=z(),0==e.product.length)return void n.initListeners("all");n.render(e.product),n.loadImages(e.product),n.initListeners("all"),t=s("E-commerce 2.1.2 by %1$Kenzap%2$. ❤️ Licensed %3$GPLv3%4$.",'<a class="text-muted" href="https://kenzap.com/" target="_blank">',"</a>",'<a class="text-muted" href="https://github.com/kenzap/ecommerce" target="_blank">',"</a>"),document.querySelector("footer .row").innerHTML='\n    <div class="d-sm-flex justify-content-center justify-content-sm-between">\n        <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">'.concat(t,'</span>\n        <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted">').concat("","</span>\n    </div>"),e.settings.addons&&e.settings.addons.product_edit&&e.settings.addons.product_edit.forEach((function(e){!function(e,t,n){var o=new URL(e);if(v("debug")&&(e="http://localhost:3000"+o.pathname),console.log(e),document.getElementById(e))"function"==typeof n&&n.call();else switch(e.split(".").slice(-1)[0]){case"js":var a=document.createElement("script");a.setAttribute("src",e),a.id=e,a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||"function"==typeof n&&n.call()},document.body.appendChild(a);break;case"css":var c=document.getElementsByTagName("head")[0],r=document.createElement("link");r.id=e,r.rel="stylesheet",r.type="text/css",r.href=e,c.appendChild(r)}}(e.src,e.version)}))}}else h(e)})).catch((function(e){h(e)}))})),t(this,"render",(function(e){var t=document;for(var o in(e=>{let t='<ol class="breadcrumb mt-2 mb-0">';for(let n of e)void 0===n.link?t+=`<li class="breadcrumb-item">${n.text}</li>`:t+=`<li class="breadcrumb-item"><a href="${n.link}">${n.text}</a></li>`;t+="</ol>",document.querySelector(".bc").innerHTML=t})([{link:m("https://dashboard.kenzap.cloud"),text:s("Home")},{link:m("/"),text:s("E-commerce")},{link:m("/product-list/"),text:s("Product List")},{text:s("Product Edit")}]),t.querySelector("#p-title").value=e.title,t.querySelector("#p-sdesc").value=e.sdesc,t.querySelector("#p-ldesc").value=e.ldesc,t.querySelector("#p-price").value=e.price,M("#p-price",[8,46,190]),t.querySelector("#p-price-symb").innerHTML=n.state.settings.currency_symb?n.state.settings.currency_symb:"",document.querySelector(".discount-blocks").dataset.data=encodeURIComponent(JSON.stringify(e.discounts?e.discounts:[])),n.renderDiscounts(),e.variations){var a=e.variations[o],r=[];for(var l in r.title=a.title,r.type=a.type,r.required=a.required,r.index=o,t.querySelector(".variation-blocks").innerHTML+=n.structMixBlock(r),a.data){var i=a.data[l],d=[];d.title=i.title,d.price=i.price,d.type=a.type,t.querySelector(".var-block[data-index='"+o+"'] .offer-pricef").innerHTML+=n.structMixRow(d)}}e.stock||(e.stock={management:!1,sku:"",qty:0,low_threshold:0,inventory:[]});var u,p=c(document.querySelectorAll(".stock-cont"));try{for(p.s();!(u=p.n()).done;){var v=u.value;1==e.stock.management?v.classList.remove("d-none"):v.classList.add("d-none")}}catch(e){p.e(e)}finally{p.f()}document.querySelector("#stock_sku").value=e.stock.sku?e.stock.sku:"",document.querySelector("#stock_management").checked=e.stock.management,document.querySelector("#stock_quantity").value=e.stock.qty?_(e.stock.qty):0,document.querySelector("#stock_low_threshold").value=e.stock.low_threshold?_(e.stock.low_threshold):0,document.querySelector("#p-status"+e.status).checked=!0;var f=document.querySelector("#p-cats");e.cats&&f.setAttribute("data-simple-tags",e.cats),new A(__,f),C(n)})),t(this,"initListeners",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"partial";"all"==e&&(b(".btn-save",n.listeners.saveProduct),b(".p-modal .btn-primary",n.listeners.modalSuccessBtn)),b(".add-discount",n.listeners.addDiscountBlock),b(".add-mix-block",n.listeners.addMixBlock),b(".edit-block",n.listeners.editBlock),b(".remove-block",n.listeners.removeBlock),b(".add-mix",n.listeners.addMixOption),b(".remove-option",n.listeners.removeOption),b(".stock-management",n.listeners.stockManagement)})),t(this,"listeners",{editBlock:function(e){e.preventDefault();var t=document.querySelector(".add-mix-block");t.dataset.action="edit",t.dataset.index=e.currentTarget.dataset.index,setTimeout((function(){return k(t)}),10)},removeBlock:function(e){e.preventDefault(),confirm(s("Remove entire block?"))&&e.currentTarget.parentNode.parentNode.remove()},addMixBlock:function(e){e.preventDefault();var t=e.currentTarget.dataset.action,o=e.currentTarget.dataset.index;e.currentTarget.dataset.action="add";var a=s("Add Variation Block"),c="",r="",l=0,i=s("Add"),d=s("Cancel");"edit"==t&&(a=s("Edit Variation Block"),c=document.querySelector(".var-block[data-index='"+o+"']").dataset.title,r=document.querySelector(".var-block[data-index='"+o+"']").dataset.type,l=parseInt(document.querySelector(".var-block[data-index='"+o+"']").dataset.required),i=s("Save"));var u=document.querySelector(".p-modal"),m=new bootstrap.Modal(u);u.querySelector(".modal-title").innerHTML=a,u.querySelector(".btn-primary").innerHTML=i,u.querySelector(".btn-secondary").innerHTML=d,m.show();var p='\n            <div class="form-cont">\n                <div class="form-group mb-3">\n                    <label for="mtitle" class="form-label">'.concat(s("Save"),'</label>\n                    <input type="text" class="form-control" id="mtitle" autocomplete="off" placeholder="Rice type" value="').concat(c,'">\n                </div>\n                <div class="form-group mb-3">\n                    <label for="mtype" class="form-label">').concat(s("Input type"),'</label>\n                    <select id="mtype" class="form-control " >\n                        <option ').concat("radio"==r?'selected="selected"':"",' value="radio">').concat(s("Radio buttons"),"</option>\n                        <option ").concat("checkbox"==r?'selected="selected"':"",' value="checkbox">').concat(s("Checkboxes"),'</option>\n                    </select>\n                    <p class="form-text">').concat(s("Define how this renders on frontend."),'</p>\n                </div>\n                <div class="form-group mb-3">\n                    <div class="form-check">\n                        <label for="id="mtype"" class="form-check-label form-label">\n                            <input id="mrequired" type="checkbox" class="form-check-input" ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(s("Required"),'\n                        </label>\n                    </div>\n                    <p class="form-text">').concat(s("Make this variation mandatory for users."),'</p>\n                </div>\n                <div class="form-group mb-3 dn">\n                    <label for="mtype" class="form-label">').concat(s("Minimum required"),'</label>\n                    <select id="mtype" class="form-control" >\n                        <option value="1">1</option>\n                        <option value="2">2</option>\n                    </select>\n                </div>\n            </div>');u.querySelector(".modal-body").innerHTML=p,setTimeout((function(){return u.querySelector("#mtitle").focus()}),100),n.listeners.modalSuccessBtnFunc=function(e){e.preventDefault();var a=u.querySelector(".p-modal #mtitle").value,c=u.querySelector(".p-modal #mtype").value,r=u.querySelector(".p-modal #mrequired:checked");if(r=null==r?0:"1"==r.value?1:0,a.length<2)alert(s("Please provide longer title"));else{var l=[];l.title=a,l.type=c,l.required=r,l.index=document.querySelectorAll(".var-block").length,"edit"==t&&(document.querySelector(".var-block[data-index='"+o+"']").dataset.title=a,document.querySelector(".var-block[data-index='"+o+"']").dataset.type=c,document.querySelector(".var-block[data-index='"+o+"']").dataset.required=r,document.querySelector(".var-block[data-index='"+o+"'] .title").innerHTML=a),"add"==t&&(null==document.querySelector(".variation-blocks .var-block")?document.querySelector(".variation-blocks").innerHTML=n.structMixBlock(l):document.querySelector(".variation-blocks .var-block:last-of-type").insertAdjacentHTML("afterend",n.structMixBlock(l))),m.hide(),setTimeout((function(){return n.initListeners("partial")}),10)}}},addMixOption:function(e){var t=e.currentTarget;e.preventDefault();var o=document.querySelector(".p-modal"),a=new bootstrap.Modal(o);a.show(),o.querySelector(".modal-title").innerHTML=s("Add Variation"),o.querySelector(".btn-primary").innerHTML=s("Add"),o.querySelector(".btn-secondary").innerHTML=s("Cancel");var c='\n            <div class="form-cont">\n                <div class="form-group">\n                    <label for="mtitle" class="form-label">'.concat(s("Title"),'</label>\n                    <input type="text" class="form-control" id="mtitle" autocomplete="off" placeholder="').concat(s("Brown rice"),'">\n                </div>\n                <div class="form-group mt-3">\n                    <label for="mprice" class="form-label">').concat(s("Price"),'</label>\n                    <div class="input-group mb-3">\n                        <span class="input-group-text">$</span>\n                        <input id="mprice" type="text" class="form-control" placeholder="0.00" value="" >\n                        <p class="form-text">').concat(s("You can change default currency under Dashboard &gt; Settings."),"</p>\n                    </div>\n                </div>\n            </div>");o.querySelector(".modal-body").innerHTML=c,setTimeout((function(){return o.querySelector("#mtitle").focus()}),100),n.listeners.modalSuccessBtnFunc=function(e){e.preventDefault();var c=o.querySelector(".p-modal #mtitle").value,r=o.querySelector(".p-modal #mprice").value;if(c.length<2)alert("Please provide longer title");else{var l=[];l.title=c,l.price=r,l.type=t.parentElement.parentElement.dataset.type;var i=".var-block[data-index='"+t.parentElement.parentElement.dataset.index+"']";console.log(i),null==document.querySelector(i+" .offer-pricef li")?document.querySelector(i+" .offer-pricef").innerHTML=n.structMixRow(l):document.querySelector(i+" .offer-pricef li:last-of-type").insertAdjacentHTML("afterend",n.structMixRow(l)),a.hide(),setTimeout((function(){return n.initListeners("partial")}),10)}}},removeOption:function(e){e.preventDefault(),confirm("Remove option?")&&e.currentTarget.parentElement.remove()},removeDiscount:function(e){if(e.preventDefault(),confirm("Remove discount?")){e.currentTarget.parentElement.remove();var t=JSON.parse(decodeURIComponent(document.querySelector(".discount-blocks").dataset.data));t.splice(e.currentTarget.dataset.index,1),document.querySelector(".discount-blocks").dataset.data=encodeURIComponent(JSON.stringify(t))}},addDiscountBlock:function(e){e.preventDefault();var t=e.currentTarget.dataset.action,o=e.currentTarget.dataset.index;e.currentTarget.dataset.action="add";var a=s("Add discount"),r="",l=0,i=s("Add"),d=s("Cancel");"edit"==t&&(a=s("Edit Variation Block"),document.querySelector(".var-block[data-index='"+o+"']").dataset.title,r=document.querySelector(".var-block[data-index='"+o+"']").dataset.type,l=parseInt(document.querySelector(".var-block[data-index='"+o+"']").dataset.required),i=s("Save"));var u=document.querySelector(".p-modal"),m=new bootstrap.Modal(u);u.querySelector(".modal-title").innerHTML=a,u.querySelector(".btn-primary").innerHTML=i,u.querySelector(".btn-secondary").innerHTML=d,m.show();var p='\n            <div class="form-cont">\n                <div class="form-group mb-3">\n                    <div class="row">\n                        <div class="col-lg-6">\n                            <label for="discount-type" class="form-label">'.concat(s("Type"),'</label>\n                            <select id="discount-type" class="form-control" >\n                                <option ').concat("percent"==r?'selected="selected"':"",' value="percent">').concat(s("By percent"),"</option>\n                                <option ").concat("value"==r?'selected="selected"':"",' value="value">').concat(s("By value"),"</option>\n                                <option ").concat("never"==r?'selected="selected"':"",' value="never">').concat(s("never discount"),'</option>\n                            </select>\n                        </div>\n                        <div id="discount-percent-cont" class="col-lg-6">\n                            <label for="discount-percent" class="form-label">').concat(s("Percent %"),'</label>\n                            <input type="text" class="form-control" id="discount-percent" autocomplete="off" placeholder="').concat(s("5"),'">\n                        </div>\n                        <div id="discount-value-cont" class="col-lg-6 d-none">\n                            <label for="discount-value" class="form-label">').concat(s("Value"),'</label>\n                            <input type="text" class="form-control" id="discount-value" autocomplete="off" placeholder="').concat(s("12.00"),'">\n                        </div>\n                    </div>\n                    <p class="form-text discount-hint-cont">').concat(s("Define how big is the discount (numeric value only)."),'</p>\n                    <p class="form-text discount-never-cont d-none">').concat(s("Never apply general discount for this product"),'</p>\n                </div>\n                <div class="discount-availability-cont form-group mb-3">\n                    <label for="discount-availability" class="form-label">').concat(s("Availability"),'</label>\n                    <select id="discount-availability" class="form-control " >\n                        <option ').concat("",' value="admin">').concat(s("Admin"),"</option>\n                        <option ").concat("",' value="always">').concat(s("Always"),"</option>\n                        <option ").concat("",' value="hourly">').concat(s("Hourly"),"</option>\n                        <option ").concat("",' value="weekly">').concat(s("Weekly"),'</option>\n                        <option class="d-none" ').concat("",' value="monthly">').concat(s("Monthly"),'</option>\n                    </select>\n                    <p class="form-text">').concat(s("Restrict discount availability."),'</p>\n                </div>\n                <div id="discount-weekly" class="discount-weekly-cont form-group mb-3 d-none">\n                    <label for="mtype" class="form-label">').concat(s("Days of week"),'</label>\n                    <div class="form-check">\n                        <label for="week-monday" class="form-check-label form-label">\n                            <input id="week-monday" type="checkbox" class="form-check-input " ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(s("Monday"),'\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <label for="week-tuesday" class="form-check-label form-label">\n                            <input id="week-tuesday" type="checkbox" class="form-check-input" ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(s("Tuesday"),'\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <label id="week-wednesday" class="form-check-label form-label">\n                            <input id="week-wednesday" type="checkbox" class="form-check-input" ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(s("Wednesday"),'\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <label id="week-thursday" class="form-check-label form-label">\n                            <input id="week-thursday" type="checkbox" class="form-check-input" ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(s("Thursday"),'\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <label id="week-friday" class="form-check-label form-label">\n                            <input id="week-friday" type="checkbox" class="form-check-input" ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(s("Friday"),'\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <label id="week-saturday" class="form-check-label form-label">\n                            <input id="week-saturday" type="checkbox" class="form-check-input" ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(s("Saturday"),'\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <label id="week-sunday" class="form-check-label form-label">\n                            <input id="week-sunday" type="checkbox" class="form-check-input" ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(s("Sunday"),'\n                        </label>\n                    </div>\n                    <p class="form-text">').concat(s("Days of the week when discount is available."),'</p>\n                </div>\n                <div id="discount-hourly" class="form-group discount-hourly-cont mb-3 d-none">\n                    <div class="row">\n                        <div class="col-lg-6">\n                            <div class="form-group mb-3 mt-1">\n                                <label for="discount-hour-from" class="form-label">').concat(s("From"),'</label>\n                                <input id="discount-hour-from" type="text" class="form-control" maxlength="5" autocomplete="off" placeholder="').concat(s("12:00"),'">\n                            </div>\n                        </div>\n                        <div class="col-lg-6">\n                            <div class="form-group mb-3 mt-1">\n                                <label for="discount-hour-to" class="form-label">').concat(s("To"),'</label>\n                                <input id="discount-hour-to" type="text" class="form-control" maxlength="5" autocomplete="off" placeholder="').concat(s("17:00"),'">\n                            </div>\n                        </div>\n                    </div>\n                    <p class="form-text">').concat(s("Time range when discount is available."),'</p>\n                </div>\n                <div class="form-group discount-note-cont mb-3">\n                    <div class="form-group mb-3 mt-1">\n                        <label for="discount-note" class="form-label">').concat(s("Note"),'</label>\n                        <input id="discount-note" type="text" class="form-control" maxlength="25" autocomplete="off" placeholder="').concat(s(""),'">\n                        <p class="form-text">').concat(s("Example: •happy hour promo."),"</p>\n                    </div>\n                </div> \n            </div>");u.querySelector(".modal-body").innerHTML=p,setTimeout((function(){return u.querySelector("#discount-type").focus()}),100),g("#discount-availability",(function(e){switch(console.log(e.currentTarget.value),e.currentTarget.value){case"admin":case"always":document.querySelector("#discount-weekly").classList.add("d-none"),document.querySelector("#discount-hourly").classList.add("d-none");break;case"hourly":document.querySelector("#discount-weekly").classList.add("d-none"),document.querySelector("#discount-hourly").classList.remove("d-none");break;case"weekly":document.querySelector("#discount-weekly").classList.remove("d-none"),document.querySelector("#discount-hourly").classList.remove("d-none")}})),M("#discount-percent",[8]),M("#discount-value",[8,46]),M("#discount-hour-from",[8,58]),M("#discount-hour-to",[8,58]),g("#discount-type",(function(e){switch(console.log(e.currentTarget.value),document.querySelector(".discount-never-cont").classList.add("d-none"),document.querySelector(".discount-hint-cont").classList.remove("d-none"),document.querySelector(".discount-availability-cont").classList.remove("d-none"),document.querySelector(".discount-hint-cont").classList.remove("d-none"),e.currentTarget.value){case"percent":document.querySelector("#discount-percent-cont").classList.remove("d-none"),document.querySelector("#discount-value-cont").classList.add("d-none");break;case"value":document.querySelector("#discount-percent-cont").classList.add("d-none"),document.querySelector("#discount-value-cont").classList.remove("d-none");break;case"never":document.querySelector("#discount-percent-cont").classList.add("d-none"),document.querySelector("#discount-value-cont").classList.add("d-none"),document.querySelector(".discount-never-cont").classList.remove("d-none"),document.querySelector(".discount-availability-cont").classList.add("d-none"),document.querySelector(".discount-hint-cont").classList.add("d-none")}})),n.listeners.modalSuccessBtnFunc=function(e){e.preventDefault();var t={},o=!0;document.querySelector(".form-cont").classList.add("was-validated"),document.querySelector("#discount-percent").setCustomValidity(""),document.querySelector("#discount-hour-from").setCustomValidity(""),document.querySelector("#discount-hour-to").setCustomValidity("");var a=document.querySelector(".discount-blocks").dataset.data;if(a=a?JSON.parse(decodeURIComponent(a)):[],t.note=document.querySelector("#discount-note").value,t.type=document.querySelector("#discount-type").value,"percent"==t.type?(t.percent=document.querySelector("#discount-percent").value,""==t.percent&&(document.querySelector("#discount-percent").setCustomValidity("Percent field can not be empty."),o=!1)):"value"==t.type?(t.value=document.querySelector("#discount-value").value,""==t.value&&(document.querySelector("#discount-value").setCustomValidity("Value field can not be empty."),o=!1)):"value"==t.type&&(t.value="-"),t.availability=document.querySelector("#discount-availability").value,"always"==t.availability);else if("admin"==t.availability);else if("hourly"==t.availability)t.hours={from:document.querySelector("#discount-hour-from").value,to:document.querySelector("#discount-hour-to").value},t.hours.from.length<2&&(document.querySelector("#discount-hour-from").setCustomValidity("Wrong time format"),o=!1),t.hours.to.length<2&&(document.querySelector("#discount-hour-to").setCustomValidity("Wrong time format"),o=!1);else if("weekly"==t.availability){t.hours={from:document.querySelector("#discount-hour-from").value,to:document.querySelector("#discount-hour-to").value},t.hours.from.length<2&&(document.querySelector("#discount-hour-from").setCustomValidity("Wrong time format"),o=!1),t.hours.to.length<2&&(document.querySelector("#discount-hour-to").setCustomValidity("Wrong time format"),o=!1),t.dow=[];var r,l=c(document.querySelectorAll("#discount-weekly input"));try{for(l.s();!(r=l.n()).done;){var i=r.value;t.dow.push(i.checked)}}catch(e){l.e(e)}finally{l.f()}}o?(a.push(t),document.querySelector(".discount-blocks").dataset.data=encodeURIComponent(JSON.stringify(a)),n.renderDiscounts(),m.hide(),setTimeout((function(){return n.initListeners("partial")}),10)):alert("Please enter all fields correctly.")}},saveProduct:function(e){e.preventDefault();var t,o={},a=c(document.querySelectorAll(".inp"));try{for(a.s();!(t=a.n()).done;){var r=t.value;o[r.id.replace("p-","")]=r.value.trim()}}catch(e){a.e(e)}finally{a.f()}o.cats=[];var l,i=c(document.querySelectorAll("#p-cats ul li"));try{for(i.s();!(l=i.n()).done;){var s=l.value;o.cats.push(s.innerHTML.replace("<a>×</a>","").trim())}}catch(e){i.e(e)}finally{i.f()}o.img=[];var u,m=c(document.querySelectorAll(".p-img"));try{for(m.s();!(u=m.n()).done;){var v=!u.value.getAttribute("src").includes("placeholder");o.img.push(v)}}catch(e){m.e(e)}finally{m.f()}o.discounts=JSON.parse(decodeURIComponent(document.querySelector(".discount-blocks").dataset.data)),o.stock={inventory:n.state.response.product.stock.inventory},o.stock.sku=document.querySelector("#stock_sku").value,o.stock.management=document.querySelector("#stock_management").checked,o.stock.qty=document.querySelector("#stock_quantity").value,o.stock.low_threshold=document.querySelector("#stock_low_threshold").value,o.status=document.querySelector('input[name="p-status"]:checked').value,o.variations=[];var f,b=0,g=c(document.querySelectorAll(".variation-blocks .var-block"));try{for(g.s();!(f=g.n()).done;){var k,w=f.value,S=0,x=c(w.querySelectorAll(".offer-pricef li"));try{for(x.s();!(k=x.n()).done;){var q=k.value;void 0===o.variations[b]&&(o.variations[b]={title:w.getAttribute("data-title"),type:w.getAttribute("data-type"),required:w.getAttribute("data-required"),data:[]}),o.variations[b].data[S]={title:q.getAttribute("data-title"),price:q.getAttribute("data-price"),cond:q.getAttribute("data-cond")},S++}}catch(e){x.e(e)}finally{x.f()}b++}}catch(e){g.e(e)}finally{g.f()}var T=L(),_=p();d(),fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:y(),body:JSON.stringify({query:{product:{type:"update",key:"ecommerce-product",id:T,sid:_,data:o}}})}).then((function(e){return e.json()})).then((function(e){e.success?n.uploadImages():h(e)})).catch((function(e){h(e)}))},openImage:function(e){e.preventDefault(),k(document.querySelector(".aif-"+e.currentTarget.dataset.index))},previewImage:function(e){e.preventDefault();var t=e.currentTarget;if(t.files&&t.files[0]){if("image/jpeg"!=t.files[0].type&&"image/jpg"!=t.files[0].type&&"image/png"!=t.files[0].type&&"image/webp"!=t.files[0].type)return void w(s("Please provide image in JPEG, PNG or WEBP format"));if(t.files[0].size>5e6)return void w(s("Please provide image less than 5 MB in size!"));var n=t.dataset.index,o=new FileReader;o.onload=function(e){document.querySelector(".images-"+n).setAttribute("src",e.currentTarget.result)},o.readAsDataURL(t.files[0]),e.currentTarget.parentElement.querySelector(".remove").classList.remove("hd")}},removeImage:function(e){var t=e.currentTarget.parentElement.dataset.index;document.querySelector(".aif-"+t).value="",document.querySelector(".images-"+t).setAttribute("src","https://account.kenzap.com/images/placeholder.jpg"),e.currentTarget.classList.add("hd")},modalSuccessBtn:function(e){n.listeners.modalSuccessBtnFunc(e)},stockManagement:function(e){var t,n=c(document.querySelectorAll(".stock-cont"));try{for(n.s();!(t=n.n()).done;){var o=t.value;e.currentTarget.checked?o.classList.remove("d-none"):o.classList.add("d-none"),e.currentTarget.value=e.currentTarget.checked?"1":"0"}}catch(e){n.e(e)}finally{n.f()}},modalSuccessBtnFunc:null}),t(this,"structMixBlock",(function(e){return'\n        <div class="mb-4 var-block mw" data-title="'.concat(e.title,'" data-type="').concat(e.type,'" data-required="').concat(e.required,'" data-index="').concat(e.index,'" >\n            <label for="offer-pricef" class="form-label pb-2"><span class="title">').concat(e.title,'</span>\n                &nbsp;&nbsp;\n                <svg class="bi bi-pencil-fill edit-block ms-3" title="edit block" data-index="').concat(e.index,'" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n                    <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>\n                </svg>\n                <svg class="bi bi-trash remove-block ms-3" title="edit block" data-index="').concat(e.index,'"  xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#ff0079" viewBox="0 0 16 16">\n                    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path>                    <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path>\n                </svg>\n            </label>\n            <div class="list-wrapper">\n                <ul class="d-flex flex-column-reverse offer-pricef" >\n                \n                </ul>\n            </div>\n            <p class="form-text"><a class="add-mix" href="#">').concat(s("+ add option"),"</a> ").concat(s("to differentiate price offering."),'</p>\n            <div class="add-mix-ctn d-none"><a class="add-mix" href="#">').concat(s("+ add option"),"</a></div>\n        </div>")})),t(this,"structMixRow",(function(e){return'\n        <li data-title="'.concat(e.title,'" data-price="').concat(e.price,'" data-cond="" class="pt-2 pb-2"><div class="form-check"><label class="form-check-label form-label"><input class="').concat(e.type,' form-check-input" type="').concat(e.type,'" checked="" data-ft="').concat(e.title,'">').concat(e.title," &nbsp;&nbsp;&nbsp; ").concat(T(n,e.price),'</label></div>\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#ff0079" class="remove-option bi bi-x-circle" viewBox="0 0 16 16">                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n                <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>\n            </svg>\n        </li>')})),t(this,"loadImages",(function(e){for(var t=document,o=L(),a=p(),c="",r=0;r<5;r++){var l=void 0!==e.img&&"true"==e.img[r]?"https://preview.kenzap.cloud/S"+p()+"/_site/images/product-"+e.id+"-"+(r+1)+"-100x100.webp?"+e.updated:"https://account.kenzap.com/images/placeholder.jpg";c+='          <div class="p-img-cont float-start">            <p data-index="'.concat(r,'">              <img class="p-img images-').concat(r,'" data-index="').concat(r,'" width="100" height="100" src="').concat(l,'" />              <span class="remove hd" title="').concat(s("Remove"),'">×</span>            </p>            <input type="file" name="img[]" data-type="search" data-index="').concat(r,'" class="file aif-').concat(r,' d-none">          </div>')}t.querySelector(".ic").innerHTML=c,b(".p-img-cont img",n.listeners.openImage),b(".p-img-cont .remove",n.listeners.removeImage),g(".p-img-cont .file",n.listeners.previewImage);for(var i=0;i<5;i++){var d=CDN+"/S"+a+"/product-"+o+"-"+(parseInt(i)+1)+"-250.webp?"+e.updated;setTimeout((function(n,o,a){var c=!0;if(void 0!==e.img&&(e.img[a]||(c=!1)),c){var r=new Image;r.onload=function(){t.querySelector(o+a).setAttribute("src",n),t.querySelector(o+a).parentElement.querySelector(".remove").classList.remove("hd")},r.src=n}}),300,d,".images-",i);var u=CDN+"/S"+a+"/product-"+o+"-"+(parseInt(i)+1)+"-250.jpeg?"+e.updated;setTimeout((function(n,o,a){var c=!0;if(void 0!==e.img&&(e.img[a]||(c=!1)),c){var r=new Image;r.onload=function(){t.querySelector(o+a).setAttribute("src",n),t.querySelector(o+a).parentElement.querySelector(".remove").classList.remove("hd")},r.src=n}}),300,u,".images-",i)}})),t(this,"uploadImages",(function(){document.querySelector(".imgupnote")&&document.querySelector(".imgupnote").remove();var e,t=0,o=c(document.querySelectorAll(".file"));try{for(o.s();!(e=o.n()).done;){var a=e.value;t+=1;var r=L(),l=p(),i=a.files[0];if(void 0!==i){var d=new FormData;d.append("id",r),d.append("sid",l),d.append("pid",r),d.append("key","image"),d.append("sizes","1000|500|250|100x100"),d.append("file",i),d.append("slug","product-"+r+"-"+t),d.append("token",v("kenzap_token")),i.value="",n.state.ajaxQueue+=1,fetch("https://api-v1.kenzap.cloud/upload/",{body:d,method:"post"}).then((function(e){return e.json()})).then((function(e){n.state.ajaxQueue-=1,e.success&&0==n.state.ajaxQueue&&(w(s("Product updated")),u())}))}}}catch(e){o.e(e)}finally{o.f()}0==n.state.ajaxQueue&&(w(s("Product updated")),u())})),t(this,"renderDiscounts",(function(){var e=document.querySelector(".discount-blocks").dataset.data,t=[s("Monday"),s("Tuesday"),s("Wednesday"),s("Thursday"),s("Friday"),s("Saturday"),s("Sunday")];e=JSON.parse(decodeURIComponent(e));var o="";e.forEach((function(e,a){var c="value"==e.type?T(n,e.value):e.percent+"% ("+T(n,_(document.querySelector("#p-price").value)*((100-e.percent)/100))+")",r="";switch(e.availability){case"admin":r=s("Admin")+" "+c;break;case"always":r=s("Always")+" "+c;break;case"hourly":r=e.hours.from+"-"+e.hours.to+" "+c;break;case"weekly":e.dow.forEach((function(e,n){r+=1==e?t[n]+" ":""})),r+="<b>"+e.hours.from+"-"+e.hours.to+"</b> "+c}"never"==e.type&&(r=s("Avoid discount calculation for this product.")),o+='\n            <li class="form-text mb-2" >\n                '.concat(r,'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#ff0079" class="remove-discount bi bi-x-circle" data-index=').concat(a,' viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path></svg>\n            </li>')})),""==o?document.querySelector(".discount-list").classList.add("d-none"):document.querySelector(".discount-list").classList.remove("d-none"),document.querySelector(".discount-blocks ul").innerHTML=o,b(".remove-discount",n.listeners.removeDiscount)})),this.state={ajaxQueue:0,settings:{}},this.getData()},x&&e(S.prototype,x),q&&e(S,q),Object.defineProperty(S,"prototype",{writable:!1}),S);new E}();
