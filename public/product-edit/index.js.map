{"version":3,"file":"index.js","sources":["../../node_modules/@kenzap/k-cloud/index.js","../../src/_/_helpers.js","../../src/_/_ui.js","../../src/_/_cnt_product_edit.js","../../src/_/_mod_product_edit_inventory_edit.js","../../src/product-edit/index.js"],"sourcesContent":["/**\n * @name initHeader\n * @description Initiates Kenzap Cloud extension header and related scripts. Verifies user sessions, handles SSO, does cloud space navigation, initializes i18n localization. \n * @param {object} response\n */\nexport const initHeader = (response) => {\n\n    // cache header from backend\n    if(response.header) localStorage.setItem('header', response.header);\n  \n    // load header to html if not present\n    if(!document.querySelector(\"#k-script\")){\n  \n        let child = document.createElement('div');\n        child.innerHTML = localStorage.getItem('header');\n        child = child.firstChild;\n        document.body.prepend(child);\n  \n        // run header scripts\n        Function(document.querySelector(\"#k-script\").innerHTML).call('test');\n    }\n  \n    // load locales if present\n    if(response.locale) window.i18n.init(response.locale); \n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nexport const __init = (locale) => {\n\n    if(typeof locale !== 'object' || locale === null) return;\n\n    if(typeof window.i18n === 'undefined') window.i18n = {};\n\n    if(typeof window.i18n.state === 'undefined') window.i18n.state = { locale: {} };\n   \n    window.i18n.state.locale = locale;\n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nexport const __ = (text, ...p) => {\n\n    let match = (input, pa) => {\n\n        pa.forEach((p, i) => { input = input.replace('%'+(i+1)+'$', p); }); \n        \n        return input;\n    }\n\n    if(typeof window.i18n === 'undefined') return match(text, p);\n    if(window.i18n.state.locale.values[text] === undefined) return match(text, p);\n\n\n\n    return match(window.i18n.state.locale.values[text], p);\n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param cb {Function} callback function to escape text variable\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nconst __esc = (text, cb, ...p) => {\n\n    let match = (input, pa) => {\n\n        pa.forEach((p, i) => { input = input.replace('%'+(i+1)+'$', p); }); \n        \n        return input;\n    }\n\n    if(typeof window.i18n === 'undefined') return match(text, p);\n    if(window.i18n.state.locale.values[text] === undefined) return match(text, p);\n\n    return match(cb(window.i18n.state.locale.values[text]), p);\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const attr = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities and does translation\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __attr = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[<>'\"]/g, tag => (\n            {\n                '&': '&amp;',\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/*\n * Removes special characters `<`, `>`, `\"`, `'` from the link.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const src = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[<>'\"]/g, tag => (\n        {\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n    \n}\n\n/*\n * Converts special characters `<`, `>`, `\"`, `'` from the link and does translation\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __src = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[<>'\"]/g, tag => (\n            {\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const html = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities and does translations\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __html = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[&<>'\"]/g, tag => (\n            {\n                '&': '&amp;',\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/**\n * @name showLoader\n * @description Initiates full screen three dots loader.\n */\nexport const showLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'block';\n}\n\n/**\n * @name hideLoader\n * @description Removes full screen three dots loader.\n */\nexport const hideLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'none';\n}\n\n/**\n * @name initFooter\n * @description Removes full screen three dots loader.\n * @param {string} left - Text or html code to be present on the left bottom side of screen\n * @param {string} right - Text or html code to be present on the left bottom side of screen\n */\nexport const initFooter = (left, right) => {\n\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n/**\n * @name link\n * @description Handles Cloud navigation links between extensions and its pages. Takes care of custom url parameters.\n * @param {string} slug - Any inbound link\n * \n * @returns {string} link - Returns original link with kenzp cloud space ID identifier.\n */\nexport const link = (slug) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let sid = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    let postfix = slug.indexOf('?') == -1 ? '?sid='+sid : '&sid='+sid;\n\n    return slug + postfix;\n}\n\n/**\n * @name getSiteId\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\nexport const getSiteId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name spaceID\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\n export const spaceID = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name setCookie\n * @description Set cookie by its name to all .kenzap.cloud subdomains\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {string} days - Number of days when cookie expires.\n */\n export const setCookie = (name, value, days) => {\n\n    let expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \";expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (escape(value) || \"\") + expires + \";path=/;domain=.kenzap.cloud\"; \n}\n\n/**\n * @name getCookie\n * @description Read cookie by its name.\n * @param {string} cname - Cookie name.\n * \n * @returns {string} value - Cookie value.\n */\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n/**\n * @name checkHeader\n * @description This function tracks UI updates, creates header version checksum and compares it after every page reload\n * @param {object} object - API response.\n */\n export const checkHeader = () => {\n\n    let version = (localStorage.hasOwnProperty('header') && localStorage.hasOwnProperty('header-version')) ? localStorage.getItem('header-version') : 0;\n    let check = window.location.hostname + '/' + spaceID() + '/' + getCookie('locale');\n    if(check != getCookie('check')){ version = 0; console.log('refresh'); }\n    \n    setCookie('check', check, 5);\n\n    return version\n}\n\n/**\n * @name headers\n * @description Default headers object for all Kenzap Cloud fetch queries.\n * @param {object} headers\n */\n export const H = () => {\n\n    return {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n        'Kenzap-Locale': getCookie('locale') ? getCookie('locale') : \"en\",\n        'Kenzap-Header': checkHeader(),\n        'Kenzap-Token': getCookie('kenzap_token'),\n        'Kenzap-Sid': spaceID()\n    }\n}\n\n/**\n * @name headers\n * @description Default headers object for all Kenzap Cloud fetch queries. \n * @param {object} headers\n * @deprecated\n */\n export const headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n    'Kenzap-Locale': getCookie('locale') ? getCookie('locale') : \"en\",\n    'Kenzap-Header': checkHeader(),\n    'Kenzap-Token': getCookie('kenzap_token'),\n    'Kenzap-Sid': spaceID(),\n}\n\n/**\n * @name parseApiError\n * @description Set default logics for different API Error responses.\n * @param {object} object - API response.\n */\n export const parseApiError = (data) => {\n\n    // outout to frontend console\n    console.log(data);\n\n    // unstructured failure\n    if(isNaN(data.code)){\n    \n        // structure failure data\n        let log = data;\n        try{ log = JSON.stringify(log); }catch(e){ }\n\n        let params = new URLSearchParams();\n        params.append(\"cmd\", \"report\");\n        params.append(\"sid\", spaceID());\n        params.append(\"token\", getCookie('kenzap_token'));\n        params.append(\"data\", log);\n        \n        // report error\n        fetch('https://api-v1.kenzap.cloud/error/', { method: 'post', headers: { 'Accept': 'application/json', 'Content-type': 'application/x-www-form-urlencoded', }, body: params });\n\n        alert('Can not connect to Kenzap Cloud');  \n        return;\n    }\n    \n    // handle cloud error codes\n    switch(data.code){\n\n        // unauthorized\n        case 401:\n\n            // dev mode\n            if(window.location.href.indexOf('localhost')!=-1){ \n\n                alert(data.reason); \n                return; \n            }\n\n            // production mode\n            location.href=\"https://auth.kenzap.com/?app=65432108792785&redirect=\"+window.location.href; break;\n        \n        // something else\n        default:\n\n            alert(data.reason); \n            break;\n    }\n}\n\n/**\n * @name initBreadcrumbs\n * @description Render ui breadcrumbs.\n * @param {array} data - List of link objects containing link text and url. If url is missing then renders breadcrumb as static text. Requires html holder with .bc class.\n */\nexport const initBreadcrumbs = (data) => {\n\n    let html = '<ol class=\"breadcrumb mt-2 mb-0\">';\n    for(let bc of data){\n        \n        if(typeof(bc.link) === 'undefined'){\n\n            html += `<li class=\"breadcrumb-item\">${ bc.text }</li>`;\n        }else{\n\n            html += `<li class=\"breadcrumb-item\"><a href=\"${ bc.link }\">${ bc.text }</a></li>`;\n        }\n    }\n    html += '</ol>';\n    \n    document.querySelector(\".bc\").innerHTML = html;\n}\n\n/**\n * @name onClick\n * @description One row click event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onClick = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n/**\n * @name onKeyUp\n * @description One row key up event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onKeyUp = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('keyup', fn, true);\n        e.addEventListener('keyup', fn, true);\n    }\n}\n\n/**\n * @name onChange\n * @description One row change event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onChange = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('change', fn, true);\n        e.addEventListener('change', fn, true);\n    }\n}\n\n/**\n * @name loadScript\n * @description Asynchronous script loader function.\n * @param {string} url - HTML selector, id, class, etc.\n * @param {string} cb - callback function fired immediately after script is loaded.\n */\n export const loadScript = (url, cb) => {\n\n    if (!Array.from(document.querySelectorAll('script')).some(elm => elm.src == url)) {\n      let script = document.createElement('script')\n      script.onload = cb\n      script.src = url\n      document.getElementsByTagName('head')[0].appendChild(script)\n    }\n}\n\n/**\n * @name simulateClick\n * @description Trigger on click event without user interaction.\n * @param {string} elem - HTML selector, id, class, etc.\n */\n export const simulateClick = (elem) => {\n\n\t// create our event (with options)\n\tlet evt = new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tview: window\n\t});\n\n\t// if cancelled, don't dispatch the event\n\t!elem.dispatchEvent(evt);\n};\n\n/**\n * Create a web friendly URL slug from a string.\n *\n * Requires XRegExp (http://xregexp.com) with unicode add-ons for UTF-8 support.\n *\n * Although supported, transliteration is discouraged because\n *     1) most web browsers support UTF-8 characters in URLs\n *     2) transliteration causes a loss of information\n *\n * @author Sean Murphy <sean@iamseanmurphy.com>\n * @copyright Copyright 2012 Sean Murphy. All rights reserved.\n * @license http://creativecommons.org/publicdomain/zero/1.0/\n *\n * @param string s\n * @param object opt\n * @return string\n */\n export const slugify = (s, opt) => {\n\n\ts = String(s);\n\topt = Object(opt);\n\t\n\tvar defaults = {\n\t\t'delimiter': '-',\n\t\t'limit': undefined,\n\t\t'lowercase': true,\n\t\t'replacements': {},\n\t\t'transliterate': (typeof(XRegExp) === 'undefined') ? true : false\n\t};\n\t\n\t// Merge options\n\tfor (var k in defaults) {\n\t\tif (!opt.hasOwnProperty(k)) {\n\t\t\topt[k] = defaults[k];\n\t\t}\n\t}\n\t\n\tvar char_map = {\n\t\t// Latin\n\t\t'À': 'A', 'Á': 'A', 'Â': 'A', 'Ã': 'A', 'Ä': 'A', 'Å': 'A', 'Æ': 'AE', 'Ç': 'C', \n\t\t'È': 'E', 'É': 'E', 'Ê': 'E', 'Ë': 'E', 'Ì': 'I', 'Í': 'I', 'Î': 'I', 'Ï': 'I', \n\t\t'Ð': 'D', 'Ñ': 'N', 'Ò': 'O', 'Ó': 'O', 'Ô': 'O', 'Õ': 'O', 'Ö': 'O', 'Å': 'O', \n\t\t'Ø': 'O', 'Ù': 'U', 'Ú': 'U', 'Û': 'U', 'Ü': 'U', 'Å°': 'U', 'Ý': 'Y', 'Þ': 'TH', \n\t\t'ß': 'ss', \n\t\t'à': 'a', 'á': 'a', 'â': 'a', 'ã': 'a', 'ä': 'a', 'å': 'a', 'æ': 'ae', 'ç': 'c', \n\t\t'è': 'e', 'é': 'e', 'ê': 'e', 'ë': 'e', 'ì': 'i', 'í': 'i', 'î': 'i', 'ï': 'i', \n\t\t'ð': 'd', 'ñ': 'n', 'ò': 'o', 'ó': 'o', 'ô': 'o', 'õ': 'o', 'ö': 'o', 'Å': 'o', \n\t\t'ø': 'o', 'ù': 'u', 'ú': 'u', 'û': 'u', 'ü': 'u', 'Å±': 'u', 'ý': 'y', 'þ': 'th', \n\t\t'ÿ': 'y',\n\n\t\t// Latin symbols\n\t\t'©': '(c)',\n\n\t\t// Greek\n\t\t'Α': 'A', 'Β': 'B', 'Γ': 'G', 'Δ': 'D', 'Ε': 'E', 'Ζ': 'Z', 'Η': 'H', 'Θ': '8',\n\t\t'Ι': 'I', 'Κ': 'K', 'Λ': 'L', 'Μ': 'M', 'Ν': 'N', 'Ξ': '3', 'Ο': 'O', 'Π': 'P',\n\t\t'Ρ': 'R', 'Σ': 'S', 'Τ': 'T', 'Υ': 'Y', 'Φ': 'F', 'Χ': 'X', 'Ψ': 'PS', 'Ω': 'W',\n\t\t'Î': 'A', 'Î': 'E', 'Î': 'I', 'Î': 'O', 'Î': 'Y', 'Î': 'H', 'Î': 'W', 'Îª': 'I',\n\t\t'Î«': 'Y',\n\t\t'α': 'a', 'β': 'b', 'γ': 'g', 'δ': 'd', 'ε': 'e', 'ζ': 'z', 'η': 'h', 'θ': '8',\n\t\t'ι': 'i', 'κ': 'k', 'λ': 'l', 'μ': 'm', 'ν': 'n', 'ξ': '3', 'ο': 'o', 'π': 'p',\n\t\t'ρ': 'r', 'σ': 's', 'τ': 't', 'υ': 'y', 'φ': 'f', 'χ': 'x', 'ψ': 'ps', 'ω': 'w',\n\t\t'Î¬': 'a', 'Î­': 'e', 'Î¯': 'i', 'Ï': 'o', 'Ï': 'y', 'Î®': 'h', 'Ï': 'w', 'ς': 's',\n\t\t'Ï': 'i', 'Î°': 'y', 'Ï': 'y', 'Î': 'i',\n\n\t\t// Turkish\n\t\t'Å': 'S', 'Ä°': 'I', 'Ç': 'C', 'Ü': 'U', 'Ö': 'O', 'Ä': 'G',\n\t\t'Å': 's', 'Ä±': 'i', 'ç': 'c', 'ü': 'u', 'ö': 'o', 'Ä': 'g', \n\n\t\t// Russian\n\t\t'Ð': 'A', 'Ð': 'B', 'Ð': 'V', 'Ð': 'G', 'Ð': 'D', 'Ð': 'E', 'Ð': 'Yo', 'Ð': 'Zh',\n\t\t'Ð': 'Z', 'Ð': 'I', 'Ð': 'J', 'Ð': 'K', 'Ð': 'L', 'Ð': 'M', 'Ð': 'N', 'Ð': 'O',\n\t\t'Ð': 'P', 'Ð ': 'R', 'Ð¡': 'S', 'Ð¢': 'T', 'Ð£': 'U', 'Ð¤': 'F', 'Ð¥': 'H', 'Ð¦': 'C',\n\t\t'Ð§': 'Ch', 'Ð¨': 'Sh', 'Ð©': 'Sh', 'Ðª': '', 'Ð«': 'Y', 'Ð¬': '', 'Ð­': 'E', 'Ð®': 'Yu',\n\t\t'Ð¯': 'Ya',\n\t\t'Ð°': 'a', 'Ð±': 'b', 'Ð²': 'v', 'Ð³': 'g', 'Ð´': 'd', 'Ðµ': 'e', 'Ñ': 'yo', 'Ð¶': 'zh',\n\t\t'Ð·': 'z', 'Ð¸': 'i', 'Ð¹': 'j', 'Ðº': 'k', 'Ð»': 'l', 'Ð¼': 'm', 'Ð½': 'n', 'Ð¾': 'o',\n\t\t'Ð¿': 'p', 'Ñ': 'r', 'Ñ': 's', 'Ñ': 't', 'Ñ': 'u', 'Ñ': 'f', 'Ñ': 'h', 'Ñ': 'c',\n\t\t'Ñ': 'ch', 'Ñ': 'sh', 'Ñ': 'sh', 'Ñ': '', 'Ñ': 'y', 'Ñ': '', 'Ñ': 'e', 'Ñ': 'yu',\n\t\t'Ñ': 'ya',\n\n\t\t// Ukrainian\n\t\t'Ð': 'Ye', 'Ð': 'I', 'Ð': 'Yi', 'Ò': 'G',\n\t\t'Ñ': 'ye', 'Ñ': 'i', 'Ñ': 'yi', 'Ò': 'g',\n\n\t\t// Czech\n\t\t'Ä': 'C', 'Ä': 'D', 'Ä': 'E', 'Å': 'N', 'Å': 'R', 'Š': 'S', 'Å¤': 'T', 'Å®': 'U', \n\t\t'Å½': 'Z', \n\t\t'Ä': 'c', 'Ä': 'd', 'Ä': 'e', 'Å': 'n', 'Å': 'r', 'š': 's', 'Å¥': 't', 'Å¯': 'u',\n\t\t'Å¾': 'z', \n\n\t\t// Polish\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'e', 'Å': 'L', 'Å': 'N', 'Ó': 'o', 'Å': 'S', 'Å¹': 'Z', \n\t\t'Å»': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Å': 'l', 'Å': 'n', 'ó': 'o', 'Å': 's', 'Åº': 'z',\n\t\t'Å¼': 'z',\n\n\t\t// Latvian\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'E', 'Ä¢': 'G', 'Äª': 'i', 'Ä¶': 'k', 'Ä»': 'L', 'Å': 'N', \n\t\t'Š': 'S', 'Åª': 'u', 'Å½': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Ä£': 'g', 'Ä«': 'i', 'Ä·': 'k', 'Ä¼': 'l', 'Å': 'n',\n\t\t'š': 's', 'Å«': 'u', 'Å¾': 'z'\n\t};\n\t\n\t// Make custom replacements\n\tfor (var k in opt.replacements) {\n\t\ts = s.replace(RegExp(k, 'g'), opt.replacements[k]);\n\t}\n\t\n\t// Transliterate characters to ASCII\n\tif (opt.transliterate) {\n\t\tfor (var k in char_map) {\n\t\t\ts = s.replace(RegExp(k, 'g'), char_map[k]);\n\t\t}\n\t}\n\t\n\t// Replace non-alphanumeric characters with our delimiter\n\tvar alnum = (typeof(XRegExp) === 'undefined') ? RegExp('[^a-z0-9]+', 'ig') : XRegExp('[^\\\\p{L}\\\\p{N}]+', 'ig');\n\ts = s.replace(alnum, opt.delimiter);\n\t\n\t// Remove duplicate delimiters\n\ts = s.replace(RegExp('[' + opt.delimiter + ']{2,}', 'g'), opt.delimiter);\n\t\n\t// Truncate slug to max. characters\n\ts = s.substring(0, opt.limit);\n\t\n\t// Remove delimiter from ends\n\ts = s.replace(RegExp('(^' + opt.delimiter + '|' + opt.delimiter + '$)', 'g'), '');\n\t\n\treturn opt.lowercase ? s.toLowerCase() : s;\n}\n\n/**\n * @name toast\n * @description Triggers toast notification. Adds toast html to the page if missing.\n * @param {string} text - Toast notification.\n */\n export const toast = (text) => {\n\n    // only add once\n    if(!document.querySelector(\".toast\")){\n\n        let html = `\n        <div class=\"toast-cont position-fixed bottom-0 p-2 m-4 end-0 align-items-center\" style=\"z-index:10000;\">\n            <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n                <div class=\"d-flex\">\n                    <div class=\"toast-body\"></div>\n                    <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n                </div>\n            </div>\n        </div>`;\n        if(document.querySelector('body > div')) document.querySelector('body > div').insertAdjacentHTML('afterend', html);\n    }\n\n    let toast = new bootstrap.Toast(document.querySelector('.toast'));\n    document.querySelector('.toast .toast-body').innerHTML = text;  \n    toast.show();\n}","import { getCookie, H, getSiteId, simulateClick, parseApiError, __html } from '@kenzap/k-cloud';\n\n/* \ntexts to localize\n__('required')\n__('Size')\n__('Small')\n__('Regular')\n__('Large')\n__('Subtotal')\n__('Discount by %')\n__('Discount by value')\n__('Grand Total')\n*/\n\nexport const mt = (val) => {\n\n    return (\"\"+val).length < 2 ? \"0\"+val : val;\n}\n\nexport const getProductId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('id') ? urlParams.get('id') : \"\";\n    return id;\n}\n\nexport const getProductIdFromLink = () => {\n    \n    let url = new URL(window.location.href);\n    let id = url.pathname.trim().split('/').slice(-2)[0];\n    return id;\n}\n\nexport const replaceQueryParam = (param, newval, search) => {\n\n    let regex = new RegExp(\"([?;&])\" + param + \"[^&;]*[;&]?\");\n    let query = search.replace(regex, \"$1\").replace(/&$/, '');\n\n    return (query.length > 2 ? query + \"&\" : \"?\") + (newval ? param + \"=\" + newval : '');\n}\n\nexport const getPageNumberOld = () => {\n\n    let url = window.location.href.split('/');\n    let page = url[url.length-1];\n    let pageN = 1;\n    if(page.indexOf('page')==0){\n      pageN = page.replace('page', '').replace('#', '');\n    }\n    // console.log(pageN);\n    return parseInt(pageN);\n}\n\nexport const getPageNumber = () => {\n\n    let urlParams = new URLSearchParams(window.location.search);\n    let page = urlParams.get('page') ? urlParams.get('page') : 1;\n\n    return parseInt(page);\n}\n\nexport const getPagination = (__, meta, cb) => {\n\n    if(typeof(meta) === 'undefined'){ document.querySelector(\"#listing_info\").innerHTML = __('no records to display'); return; }\n\n    let offset = meta.limit+meta.offset;\n    if(offset>meta.total_records) offset = meta.total_records;\n\n    document.querySelector(\"#listing_info\").innerHTML = __(\"Showing %1$ to %2$ of %3$ entries\", (1+meta.offset), (offset), meta.total_records);\n    //  \"Showing \"+(1+meta.offset)+\" to \"+(offset)+\" of \"+meta.total_records+\" entries\";\n\n    let pbc = Math.ceil(meta.total_records / meta.limit);\n    document.querySelector(\"#listing_paginate\").style.display = (pbc < 2) ? \"none\" : \"block\";\n\n    let page = getPageNumber(); \n    let html = '<ul class=\"pagination d-flex justify-content-end pagination-flat mb-0\">';\n    html += '<li class=\"paginate_button page-item previous\" id=\"listing_previous\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"prev\" data-page=\"0\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&laquo;</span></li>';\n    let i = 0;\n    while(i<pbc){\n\n        i++; \n        if(((i >= page-3) && (i <= page)) || ((i <= page+3) && (i >=page))){\n\n            html += '<li class=\"paginate_button page-item '+((page==i)?'active':'')+'\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"page\" data-page=\"'+i+'\" tabindex=\"0\" class=\"page-link\">'+(page==i?i:i)+'</a></li>';      \n        }\n    }  \n    html += '<li class=\"paginate_button page-item next\" id=\"order-listing_next\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"next\" data-page=\"2\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&raquo;</span></a></li>';\n    html += '</ul>'\n\n    document.querySelector(\"#listing_paginate\").innerHTML = html;\n\n    let page_link = document.querySelectorAll(\".page-link\");\n    for (const l of page_link) {\n        \n        l.addEventListener('click', function(e) {\n\n            let p = parseInt(getPageNumber());\n            let ps = p;\n            switch(l.dataset.type){ \n                case 'prev': p-=1; if(p<1) p = 1; break;\n                case 'page': p=l.dataset.page; break;\n                case 'next': p+=1; if(p>pbc) p = pbc; break;\n            }\n            \n            // update url\n            if (window.history.replaceState) {\n\n                // let url = window.location.href.split('/page');\n                // let urlF = (url[0]+'/page'+p).replace('//page', '/page');\n\n                let str = window.location.search;\n                str = replaceQueryParam('page', p, str);\n                // window.location = window.location.pathname + str\n\n                // prevents browser from storing history with each change:\n                window.history.replaceState(\"kenzap-cloud\", document.title, window.location.pathname + str);\n            }\n\n            // only refresh if page differs\n            if(ps!=p) cb();\n            \n            e.preventDefault();\n            return false;\n        });\n    }\n}\n\nexport const stockBadge = (_this, inventory) => {\n\n    // console.log(inventory.stock_warning + \" \" + inventory.stock_amount);\n\n    if(inventory.stock_amount <= 0){\n\n        return '<div data-stock=\"out\" class=\"badge bg-danger text-light fw-light\">' + __html('Out of stock') + '</div>';\n    }else if(inventory.stock_warning >= inventory.stock_amount){\n\n        return '<div data-stock=\"low\" class=\"badge bg-warning text-dark fw-light\">' + __html('Low stock') + '</div>';\n    }else{\n\n        return '<div data-stock=\"in\" class=\"badge bg-success text-light fw-light\">' + __html('In stock') + '</div>';\n    }\n}\n\nexport const formatStatus = (__, st) => {\n\n    st = parseInt(st); \n    switch(st){ \n      case 0: return '<div class=\"badge bg-warning text-dark fw-light\">' + __('Draft') + '</div>';\n      case 1: return '<div class=\"badge bg-primary fw-light\">' + __('Published') + '</div>';\n      case 3: return '<div class=\"badge bg-secondary fw-light\">' + __('Unpublished') + '</div>';\n      default: return '<div class=\"badge bg-secondary fw-light\">' + __('Drafts') + '</div>';\n    }\n}\n\n/**\n    * Render price\n    * @public\n    */\n export const priceFormat = function(_this, price) {\n\n    price = makeNumber(price);\n\n    price = (Math.round(parseFloat(price) * 100)/100).toFixed(2);\n    \n    switch(_this.state.settings.currency_symb_loc){\n        case 'left': price = _this.state.settings.currency_symb + ' ' + price; break;\n        case 'right': price = price + _this.state.settings.currency_symb; break;\n    }\n\n    return price;\n}\n\nexport const makeNumber = function(price) {\n\n    price = price ? price : 0;\n    price = parseFloat(price);\n    price = Math.round(price * 100) / 100;\n    return price;\n}\n\nexport const formatTime = (__, timestamp) => {\n\t\n    const d = new Date(parseInt(timestamp) * 1000);\n    return d.toLocaleDateString();\n\n    let a = new Date(timestamp * 1000);\n    let months = [__('Jan'), __('Feb'), __('Mar'), __('Apr'), __('May'), __('Jun'), __('Jul'), __('Aug'), __('Sep'), __('Oct'), __('Nov'), __('Dec')];\n    let year = a.getFullYear();\n    let month = months[a.getMonth()];\n    let date = a.getDate();\n    let hour = a.getHours();\n    let min = a.getMinutes();\n    let sec = a.getSeconds();\n    let time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\nexport const formatTimeDetailed = (__, timestamp) => {\n\t\n    // let a = new Date(timestamp * 1000);\n    // let hour = a.getHours();\n    // let min = a.getMinutes();\n\n    // console.log(hour+\":\"+min);\n\n    // server stores in UTC\n    // let offset = new Date().getTimezoneOffset();\n\n    const d = new Date(parseInt(timestamp) * 1000); //  + offset*60\n    \n    let t = d.toLocaleTimeString().split(':');\n\n    return d.toLocaleDateString() + \" \" + t[0] + \":\" + t[1];\n}\n\n// numbers only with allowed exceptions\n// export const onlyNumbers = (sel, chars) => {\n\n//     if(!document.querySelector(sel)) return;\n    \n//     document.querySelector(sel).addEventListener('keypress', (e) => {\n\n//         // console.log(e.which);\n\n//         if((!chars.includes(e.which) && isNaN(String.fromCharCode(e.which))) || e.which == 32 || (document.querySelector(sel).value.includes(String.fromCharCode(e.which)) && chars.includes(e.which))){\n\n//             // stop character from entering input\n//             e.preventDefault(); \n//             return false;\n//         }\n//     });\n// }\n\n// numbers only with allowed exceptions\nexport const onlyNumbers = (sel, chars) => {\n\n    if(!document.querySelector(sel)) return;\n\n    // arrow navigation\n    chars.push(...[9, 37, 38, 39, 40, 98, 100, 102, 104]);\n    \n    [...document.querySelectorAll(sel)].forEach(el => {\n\n        el.addEventListener('keydown', (e) => {\n\n            const key = e.key.toLowerCase();\n\n            // track potential paste event\n            if(key == 'control' || key == 'meta'){\n\n                window[key] = true;\n            }\n        \n            console.log(key.length + \" / \" + isNumber + \" / \" + e.which);\n\n            // not alphanumeric\n            // if (key.length != 1) {\n\n            //     e.preventDefault(); \n            //     return false;\n            // }\n        \n            // const isLetter = (key >= 'a' && key <= 'z');\n            const isNumber = (key >= '0' && key <= '9');\n\n            // add exception when Control or Meta (MAC) keys pressed\n            // console.log(window['meta'] + \" \" + window['control']);\n\n            // allow x c v a characters when meta ot control is pressed\n            if((window['control'] || window['meta']) && [86, 88, 65, 67, 90].includes(e.which)){ console.log(\"pushing\"); return true; }\n\n            // actual check\n            if (!isNumber && !chars.includes(e.which)) {\n\n                e.preventDefault(); \n                return false;\n            }\n        });\n\n        el.addEventListener('keyup', (e) => {\n\n            const key = e.key.toLowerCase();\n\n            // potential paste event\n            if(key == 'control' || key == 'meta'){\n\n                window[key] = false;\n            }\n        });\n    });\n}\n\n// nums only validation\nexport const numsOnly = (e, max) => {\n\n    // Only ASCII charactar in that range allowed \n    var ASCIICode = (e.which) ? e.which : e.keyCode \n    if (ASCIICode > 31 && ASCIICode != 46 && (ASCIICode < 48 || ASCIICode > 57)) \n    return false; \n\n    if(parseFloat(e.target.value)>max) \n    return false; \n\n    let dec = e.target.value.split('.');\n    if(dec.length>1)\n    if(dec[1].length>1)\n        return false;\n    \n    return true; \n}\n\nexport const onClick = (sel, fn) => {\n\n    // console.log('onClick');\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n// time elapsed since creation \nexport const timeConverterAgo = (__, now, time) => {\n\n    now = parseInt(now);\n    time = parseInt(time);\n\n    // parse as elapsed time\n    let past = now - time;\n    if(past < 60) return __('moments ago');\n    if(past < 3600) return parseInt(past / 60) + ' ' + __('minutes ago');\n    if(past < 86400) return parseInt(past / 60 / 60) + ' ' + __('hours ago');\n\n    // process as normal date\n    var a = new Date(time * 1000);\n    var months = [ __('Jan'), __('Feb'), __('Mar'), __('Apr'), __('May'), __('Jun'), __('Jul'), __('Aug'), __('Sep'), __('Oct'), __('Nov'), __('Dec') ];\n    var year = a.getFullYear();\n    var month = months[a.getMonth()];\n    var date = a.getDate();\n    var hour = a.getHours();\n    var min = a.getMinutes();\n    var sec = a.getSeconds();\n    var time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\nexport const parseVariations = (_this, product) => {\n\n    let html_vars = '';\n    if(typeof(product.variations !== 'undefined'))\n    for(let v in product.variations){\n\n        // variation type\n        let type = '';\t\n        if(product.variations[v].type=='checkbox') type = 'check';\n        if(product.variations[v].type=='radio')    type = 'radio';\n\n        // struct variation\n        html_vars += '\\\n        <b>' + __html(product.variations[v].title) + (product.variations[v].required == '1' ? ' <span class=\"tag\">'+__html('required')+'</span>':'')+'</b>\\\n        <div class=\"kp-'+type+'\" >';\n\n        // variation labels\n        for(let d in product.variations[v].data){\n\n            let checked = false;\n            // for public qr feed\n            // if(typeof(cart.state.product.variations[v]) !== 'undefined' && typeof(cart.state.product.variations[v].list) !== 'undefined' && typeof(cart.state.product.variations[v].list[\"_\"+d]) !== 'undefined'){ checked = true; }\n            \n            // verify variation price validity\n            product.variations[v].data[d]['price'] = makeNumber(product.variations[v].data[d]['price']);\n\n            switch(type){\n                case 'check':\n\n                html_vars += '\\\n                    <label>\\\n                        <input type=\"checkbox\" data-required=\"'+product.variations[v].required+'\" data-indexv=\"'+v+'\" data-index=\"'+d+'\" data-title=\"'+product.variations[v].data[d]['title']+'\" data-titlev=\"'+__(product.variations[v].title)+'\" data-price=\"'+product.variations[v].data[d]['price']+'\" '+(checked?'checked=\"checked\"':'')+'>\\\n                        <div class=\"checkbox\">\\\n                            <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\">\\\n                                <path d=\"M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z\"></path>\\\n                                <polyline points=\"4 11 8 15 16 6\"></polyline>\\\n                            </svg>\\\n                        </div>\\\n                        <span>'+__html(product.variations[v].data[d]['title'])+'</span>\\\n                        <div class=\"price\">+ '+priceFormat(_this, product.variations[v].data[d]['price'])+'</div>\\\n                    </label>';\n                \n                break;\n                case 'radio':\n\n                html_vars += '\\\n                    <label>\\\n                        <input type=\"radio\" data-required=\"'+product.variations[v].required+'\" data-indexv=\"'+v+'\" name=\"radio'+v+'\" data-index=\"'+d+'\" data-title=\"'+product.variations[v].data[d]['title']+'\" data-titlev=\"'+__(product.variations[v].title)+'\" data-price=\"'+product.variations[v].data[d]['price']+'\" '+(checked?'checked=\"checked\"':'')+' />\\\n                        <span>'+__html(product.variations[v].data[d]['title'])+'</span>\\\n                        <div class=\"price\">+ '+priceFormat(_this, product.variations[v].data[d]['price'])+'</div>\\\n                    </label>';\n                \n                break;\n            }\n        }\n\n        html_vars += '</div>';\n    }\n\n    return html_vars;\n}\n\nexport const escape = (htmlStr) => {\n\n    return htmlStr.replace(/&/g, \"&amp;\")\n          .replace(/</g, \"&lt;\")\n          .replace(/>/g, \"&gt;\")\n          .replace(/\"/g, \"&quot;\")\n          .replace(/'/g, \"&#39;\");        \n \n}\n\nexport const unescape = (htmlStr) => {\n\n    htmlStr = htmlStr.replace(/&lt;/g , \"<\");\t \n    htmlStr = htmlStr.replace(/&gt;/g , \">\");     \n    htmlStr = htmlStr.replace(/&quot;/g , \"\\\"\");  \n    htmlStr = htmlStr.replace(/&#39;/g , \"\\'\");   \n    htmlStr = htmlStr.replace(/&amp;/g , \"&\");\n    return htmlStr;\n}\n\nexport const ecommerceUpdates = (_this, source, cb) => {\n\n    // do API query\n    fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n        method: 'post',\n        headers: H(),\n        body: JSON.stringify({\n            query: {\n                updates: {\n                    type:       'updates',\n                    source:     source,\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if(response.success){\n\n            // do callback\n            cb(response);\n            \n            // parse notifications\n            renderNotifications(_this, response.messages);\n            \n        }else{\n\n\n        }\n    })\n    .catch(error => { // parseApiError(error); \n    });\n}\n\nexport const isMobile = () => {\n\n    const nav = navigator.userAgent.toLowerCase();\n    return (\n        nav.match(/iphone/i) || nav.match(/ipod/i) || nav.match(/ipad/i) || nav.match(/android/i)\n    );\n}\n\n// play notification sound. Ex.: when new order received\nexport const playSound = (_this, max) => {\n \n    // if(!max) max = _this.state.playSound.max_times;\n\n    _this.state.playSound.n = 0;\n\n    if(_this.state.playSound.timer) clearInterval(_this.state.playSound.timer);\n\n    if(_this.state.playSound.allowed) _this.state.playSound.audio.play();\n\n    // console.log(\"playing \" + _this.state.playSound.allowed);\n\n    try{\n        if(_this.state.playSound.allowed && isMobile()) window.navigator.vibrate(200);\n    }catch{\n\n    }\n\n    if(max==1) return;\n\n    _this.state.playSound.timer = setInterval(() => {\n\n        if(!_this.state.playSound.allowed) return;\n         \n        _this.state.playSound.audio.play();\n\n        if(_this.state.playSound.n > max){ clearInterval(_this.state.playSound.timer) }\n\n        _this.state.playSound.n += 1;\n\n    }, 5000);\n\n    // console.log('playSound');\n}\n\nexport const renderNotifications = (_this, messages) => {\n\n    let html = '';\n\n    let play = false;\n\n    // html\n    messages.forEach(msg => {\n\n        if(!_this.state.playSound.nids.includes(msg._id)){ _this.state.playSound.nids.push(msg._id); play = true; }\n\n        if(!document.querySelector('#contents .container [data-id=\"'+msg._id+'\"]')){\n        \n            html += `\n\n            <div class=\"alert alert-${ msg.color } alert-dismissible fade show\" role=\"alert\" data-id=\"${ msg._id }\">\n                <div class=\"d-flex align-items-center\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-exclamation-square flex-shrink-0 me-2\" viewBox=\"0 0 16 16\">\n                        <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\n                        <path d=\"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z\"/>\n                    </svg>\n                    <div>\n                    ${ msg.msg }\n                    </div>\n                </div>\n                <button type=\"button\" class=\"btn-close btn-dismiss-notify\" data-bs-dismiss=\"alert\" aria-label=\"Close\" data-id=\"${ msg._id }\"></button>\n            </div>`;\n        }\n    });\n\n    // play sound\n    if(play){ \n        // console.log('notify play sound'); \n        playSound(_this, 1); _this.getData(); \n    }\n\n    if(document.querySelector('#contents .container')) document.querySelector('#contents .container').insertAdjacentHTML(\"afterbegin\", html);\n\n    // listeners\n    onClick('.btn-dismiss-notify', (e) => {\n\n        // do API query\n        fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n            method: 'post',\n            headers: H(),\n            body: JSON.stringify({\n                query: {\n                    updates: {\n                        type:       'dismiss',\n                        id:         e.currentTarget.dataset.id,\n                    }\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            if(response.success){\n\n\n\n            }else{\n\n\n            }\n        })\n        .catch(error => { // parseApiError(error); \n        });\n    });\n\n    // order open listener\n    if(document.querySelector('.order-details')) for( let el of document.querySelectorAll('.order-details') ){\n\n        if(el.dataset.assigned == \"1\") return;\n\n        el.dataset.assigned = 1;\n\n        el.addEventListener('click', (e) => {\n\n            let el = document.querySelector(\".view-order[data-id='\"+e.currentTarget.dataset.id+\"']\");\n\n            simulateClick(el);\n\n        }, true);\n    }\n}\n\n/*\n* Load additional JS or CSS depencies\n*\n* @param    dep       dependecy. Ex.: hiebee.min.js \n* @param    cb        function to call after script is loaded (optional)       \n* @return \t{Boolen} \tresult status \n* \n*/\nexport const loadAddon = (dep, version, cb) => {\n\n    \n    const url = new URL(dep);\n\n    if(getCookie('debug')) dep = 'http://localhost:3000' + url.pathname;\n    \n    console.log(dep);\n\n    // dependency already loaded, skip\n    if(document.getElementById(dep)){ if(typeof cb === 'function') cb.call(); return; }\n\n    // detect dependency type\n    let t = dep.split('.').slice(-1)[0];\n    // console.log(dep+'loadAddon'+t);\n    switch(t){\n      case 'js':\n        \n        let js = document.createElement(\"script\");\n        js.setAttribute(\"src\", dep);\n        js.id = dep;\n        js.onload = js.onreadystatechange = function() {\n \n          if(!this.readyState || this.readyState == 'complete')\n            if(typeof cb === 'function') cb.call();\n        };\n        document.body.appendChild(js);\n        \n      break;\n      case 'css':\n\n        var head  = document.getElementsByTagName('head')[0];\n        var css  = document.createElement('link');\n        css.id   = dep;\n        css.rel  = 'stylesheet';\n        css.type = 'text/css';\n        css.href = dep;\n        head.appendChild(css);\n\n      break;\n    }\n}\n\nexport const getProductsById = (_this, products, cb) => {\n\n    // do API query\n    const response_raw = fetch('https://api-v1.kenzap.cloud/', {\n        method: 'post',\n        headers: H(),\n        body: JSON.stringify({\n            query: {\n                products: {\n                    type:       'find',\n                    fields:     '*',\n                    key:        'ecommerce-product',\n                    id:         products,\n                    sortby:     {\n                        field: 'created',\n                        order: 'DESC'\n                    }\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if (response.success) {\n\n            response.products.forEach((product, i) => {\n\n                _this.state.orderSingle.items.push({\n                    cats: [],\n                    id: product._id,\n                    index: i,\n                    note: \"\",\n                    price: product.price,\n                    qty: 1,\n                    sdesc: __html(product.sdesc),\n                    title: __html(product.title),\n                    total: product.price,\n                    type: \"new\",\n                    variations: []\n                });\n            });\n\n            cb(_this);\n        }\n    })\n    .catch(error => { console.log(error); parseApiError(error); });\n}\n\nexport let Base64={_keyStr:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",encode:function(e){var t=\"\";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t=\"\";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");while(f<e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/\\r\\n/g,\"\\n\");var t=\"\";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t=\"\";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}}\n\n// categories input tags\nexport const simpleTags = (element) => {\n\n    if (!element) {\n        throw new Error(\"DOM Element is undifined! Please choose HTML target element.\")\n    }\n\n    let DOMParent = element\n    let DOMList\n    let DOMInput\n    let dataAttribute\n    let arrayOfList\n\n    function DOMCreate() {\n        let ul = document.createElement(\"ul\")\n        let input = document.createElement(\"input\")\n\n        input.setAttribute('placeholder', __html('new tag'));\n\n        DOMParent.appendChild(ul)\n        DOMParent.appendChild(input)\n\n        // first child is <ul>\n        DOMList = DOMParent.firstElementChild\n        // last child is <input>\n        DOMInput = DOMParent.lastElementChild\n    }\n\n    function DOMRender() {\n        // clear the entire <li> inside <ul>\n        DOMList.innerHTML = \"\"\n\n        // render each <li> to <ul>\n        arrayOfList.forEach((currentValue, index) => {\n\n            if (currentValue) {\n\n                let li = document.createElement(\"li\")\n                li.innerHTML = `${currentValue} <a>&times;</a>`\n                li.querySelector(\"a\").addEventListener(\"click\", function () {\n                    onDelete(index)\n                })\n\n                DOMList.appendChild(li)\n            }\n        })\n\n        setAttribute()\n    }\n\n    function onKeyUp() {\n        DOMInput.addEventListener(\"keyup\", function (event) {\n            let text = this.value.trim()\n\n            // check if ',' or 'enter' key was press\n            if (text.includes(\",\") || event.keyCode === 13) {\n                // check if empty text when ',' is remove\n                if (text.replace(\",\", \"\") !== \"\") {\n                    // push to array and remove ','\n                    arrayOfList.push(text.replace(\",\", \"\"))\n                }\n                // clear input\n                this.value = \"\"\n            }\n\n            DOMRender()\n        })\n    }\n\n    function onDelete(id) {\n        arrayOfList = arrayOfList.filter(function (currentValue, index) {\n            if (index === id) {\n                return false\n            }\n            return currentValue\n        })\n\n        DOMRender()\n    }\n\n    function getAttribute() {\n        dataAttribute = DOMParent.getAttribute(\"data-simple-tags\")\n        dataAttribute = dataAttribute.split(\",\")\n\n        // store array of data attribute in arrayOfList\n        arrayOfList = dataAttribute.map((currentValue) => {\n            return currentValue.trim()\n        })\n    }\n\n    function setAttribute() {\n        DOMParent.setAttribute(\"data-simple-tags\", arrayOfList.toString())\n    }\n\n    getAttribute()\n    DOMCreate()\n    DOMRender()\n    onKeyUp()\n}\n\nexport const initFooter = (_this) => {\n        \n    // Created by %1$Kenzap%2$. ❤️ \n    let left = __html('E-commerce 2.1.1 by %1$Kenzap%2$. ❤️ Licensed %3$GPL3%4$.', '<a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">', '</a>', '<a class=\"text-muted\" href=\"https://github.com/kenzap/ecommerce\" target=\"_blank\">', '</a>')  \n    let right = \"\";\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\nexport const getCurrencies = () => {\n\n    // length 164\n    return [\n        {\"name\":\"Afghan Afghani\",\"code\":\"AFA\",\"symbol\":\"؋\"},\n        {\"name\":\"Albanian Lek\",\"code\":\"ALL\",\"symbol\":\"Lek\"},\n        {\"name\":\"Algerian Dinar\",\"code\":\"DZD\",\"symbol\":\"دج\"},\n        {\"name\":\"Angolan Kwanza\",\"code\":\"AOA\",\"symbol\":\"Kz\"},\n        {\"name\":\"Argentine Peso\",\"code\":\"ARS\",\"symbol\":\"$\"},\n        {\"name\":\"Armenian Dram\",\"code\":\"AMD\",\"symbol\":\"֏\"},\n        {\"name\":\"Aruban Florin\",\"code\":\"AWG\",\"symbol\":\"ƒ\"},\n        {\"name\":\"Australian Dollar\",\"code\":\"AUD\",\"symbol\":\"$\"},\n        {\"name\":\"Azerbaijani Manat\",\"code\":\"AZN\",\"symbol\":\"m\"},\n        {\"name\":\"Bahamian Dollar\",\"code\":\"BSD\",\"symbol\":\"B$\"},\n        {\"name\":\"Bahraini Dinar\",\"code\":\"BHD\",\"symbol\":\".د.ب\"},\n        {\"name\":\"Bangladeshi Taka\",\"code\":\"BDT\",\"symbol\":\"৳\"},\n        {\"name\":\"Barbadian Dollar\",\"code\":\"BBD\",\"symbol\":\"Bds$\"},\n        {\"name\":\"Belarusian Ruble\",\"code\":\"BYR\",\"symbol\":\"Br\"},\n        {\"name\":\"Belgian Franc\",\"code\":\"BEF\",\"symbol\":\"fr\"},\n        {\"name\":\"Belize Dollar\",\"code\":\"BZD\",\"symbol\":\"$\"},\n        {\"name\":\"Bermudan Dollar\",\"code\":\"BMD\",\"symbol\":\"$\"},\n        {\"name\":\"Bhutanese Ngultrum\",\"code\":\"BTN\",\"symbol\":\"Nu.\"},\n        {\"name\":\"Bitcoin\",\"code\":\"BTC\",\"symbol\":\"฿\"},\n        {\"name\":\"Bolivian Boliviano\",\"code\":\"BOB\",\"symbol\":\"Bs.\"},\n        {\"name\":\"Bosnia-Herzegovina Convertible Mark\",\"code\":\"BAM\",\"symbol\":\"KM\"},\n        {\"name\":\"Botswanan Pula\",\"code\":\"BWP\",\"symbol\":\"P\"},\n        {\"name\":\"Brazilian Real\",\"code\":\"BRL\",\"symbol\":\"R$\"},\n        {\"name\":\"British Pound Sterling\",\"code\":\"GBP\",\"symbol\":\"£\"},\n        {\"name\":\"Brunei Dollar\",\"code\":\"BND\",\"symbol\":\"B$\"},\n        {\"name\":\"Bulgarian Lev\",\"code\":\"BGN\",\"symbol\":\"Лв.\"},\n        {\"name\":\"Burundian Franc\",\"code\":\"BIF\",\"symbol\":\"FBu\"},\n        {\"name\":\"Cambodian Riel\",\"code\":\"KHR\",\"symbol\":\"KHR\"},\n        {\"name\":\"Canadian Dollar\",\"code\":\"CAD\",\"symbol\":\"$\"},\n        {\"name\":\"Cape Verdean Escudo\",\"code\":\"CVE\",\"symbol\":\"$\"},\n        {\"name\":\"Cayman Islands Dollar\",\"code\":\"KYD\",\"symbol\":\"$\"},\n        {\"name\":\"CFA Franc BCEAO\",\"code\":\"XOF\",\"symbol\":\"CFA\"},\n        {\"name\":\"CFA Franc BEAC\",\"code\":\"XAF\",\"symbol\":\"FCFA\"},\n        {\"name\":\"CFP Franc\",\"code\":\"XPF\",\"symbol\":\"₣\"},\n        {\"name\":\"Chilean Peso\",\"code\":\"CLP\",\"symbol\":\"$\"},\n        {\"name\":\"Chinese Yuan\",\"code\":\"CNY\",\"symbol\":\"¥\"},\n        {\"name\":\"Colombian Peso\",\"code\":\"COP\",\"symbol\":\"$\"},\n        {\"name\":\"Comorian Franc\",\"code\":\"KMF\",\"symbol\":\"CF\"},\n        {\"name\":\"Congolese Franc\",\"code\":\"CDF\",\"symbol\":\"FC\"},\n        {\"name\":\"Costa Rican Colón\",\"code\":\"CRC\",\"symbol\":\"₡\"},\n        {\"name\":\"Croatian Kuna\",\"code\":\"HRK\",\"symbol\":\"kn\"},\n        {\"name\":\"Cuban Convertible Peso\",\"code\":\"CUC\",\"symbol\":\"$, CUC\"},\n        {\"name\":\"Czech Republic Koruna\",\"code\":\"CZK\",\"symbol\":\"Kč\"},\n        {\"name\":\"Danish Krone\",\"code\":\"DKK\",\"symbol\":\"Kr.\"},\n        {\"name\":\"Djiboutian Franc\",\"code\":\"DJF\",\"symbol\":\"Fdj\"},\n        {\"name\":\"Dominican Peso\",\"code\":\"DOP\",\"symbol\":\"$\"},\n        {\"name\":\"East Caribbean Dollar\",\"code\":\"XCD\",\"symbol\":\"$\"},\n        {\"name\":\"Egyptian Pound\",\"code\":\"EGP\",\"symbol\":\"ج.م\"},\n        {\"name\":\"Eritrean Nakfa\",\"code\":\"ERN\",\"symbol\":\"Nfk\"},\n        {\"name\":\"Estonian Kroon\",\"code\":\"EEK\",\"symbol\":\"kr\"},\n        {\"name\":\"Ethiopian Birr\",\"code\":\"ETB\",\"symbol\":\"Nkf\"},\n        {\"name\":\"Euro\",\"code\":\"EUR\",\"symbol\":\"€\"},\n        {\"name\":\"Falkland Islands Pound\",\"code\":\"FKP\",\"symbol\":\"£\"},\n        {\"name\":\"Fijian Dollar\",\"code\":\"FJD\",\"symbol\":\"FJ$\"},\n        {\"name\":\"Gambian Dalasi\",\"code\":\"GMD\",\"symbol\":\"D\"},\n        {\"name\":\"Georgian Lari\",\"code\":\"GEL\",\"symbol\":\"ლ\"},\n        {\"name\":\"German Mark\",\"code\":\"DEM\",\"symbol\":\"DM\"},\n        {\"name\":\"Ghanaian Cedi\",\"code\":\"GHS\",\"symbol\":\"GH₵\"},\n        {\"name\":\"Gibraltar Pound\",\"code\":\"GIP\",\"symbol\":\"£\"},\n        {\"name\":\"Greek Drachma\",\"code\":\"GRD\",\"symbol\":\"₯, Δρχ, Δρ\"},\n        {\"name\":\"Guatemalan Quetzal\",\"code\":\"GTQ\",\"symbol\":\"Q\"},\n        {\"name\":\"Guinean Franc\",\"code\":\"GNF\",\"symbol\":\"FG\"},\n        {\"name\":\"Guyanaese Dollar\",\"code\":\"GYD\",\"symbol\":\"$\"},\n        {\"name\":\"Haitian Gourde\",\"code\":\"HTG\",\"symbol\":\"G\"},\n        {\"name\":\"Honduran Lempira\",\"code\":\"HNL\",\"symbol\":\"L\"},\n        {\"name\":\"Hong Kong Dollar\",\"code\":\"HKD\",\"symbol\":\"$\"},\n        {\"name\":\"Hungarian Forint\",\"code\":\"HUF\",\"symbol\":\"Ft\"},\n        {\"name\":\"Icelandic króna\",\"code\":\"ISK\",\"symbol\":\"kr\"},\n        {\"name\":\"Indian Rupee\",\"code\":\"INR\",\"symbol\":\"₹\"},\n        {\"name\":\"Indonesian Rupiah\",\"code\":\"IDR\",\"symbol\":\"Rp\"},\n        {\"name\":\"Iranian Rial\",\"code\":\"IRR\",\"symbol\":\"﷼\"},\n        {\"name\":\"Iraqi Dinar\",\"code\":\"IQD\",\"symbol\":\"د.ع\"},\n        {\"name\":\"Israeli New Sheqel\",\"code\":\"ILS\",\"symbol\":\"₪\"},\n        {\"name\":\"Italian Lira\",\"code\":\"ITL\",\"symbol\":\"L,£\"},\n        {\"name\":\"Jamaican Dollar\",\"code\":\"JMD\",\"symbol\":\"J$\"},\n        {\"name\":\"Japanese Yen\",\"code\":\"JPY\",\"symbol\":\"¥\"},\n        {\"name\":\"Jordanian Dinar\",\"code\":\"JOD\",\"symbol\":\"ا.د\"},\n        {\"name\":\"Kazakhstani Tenge\",\"code\":\"KZT\",\"symbol\":\"лв\"},\n        {\"name\":\"Kenyan Shilling\",\"code\":\"KES\",\"symbol\":\"KSh\"},\n        {\"name\":\"Kuwaiti Dinar\",\"code\":\"KWD\",\"symbol\":\"ك.د\"},\n        {\"name\":\"Kyrgystani Som\",\"code\":\"KGS\",\"symbol\":\"лв\"},\n        {\"name\":\"Laotian Kip\",\"code\":\"LAK\",\"symbol\":\"₭\"},\n        {\"name\":\"Latvian Lats\",\"code\":\"LVL\",\"symbol\":\"Ls\"},\n        {\"name\":\"Lebanese Pound\",\"code\":\"LBP\",\"symbol\":\"£\"},\n        {\"name\":\"Lesotho Loti\",\"code\":\"LSL\",\"symbol\":\"L\"},\n        {\"name\":\"Liberian Dollar\",\"code\":\"LRD\",\"symbol\":\"$\"},\n        {\"name\":\"Libyan Dinar\",\"code\":\"LYD\",\"symbol\":\"د.ل\"},\n        {\"name\":\"Lithuanian Litas\",\"code\":\"LTL\",\"symbol\":\"Lt\"},\n        {\"name\":\"Macanese Pataca\",\"code\":\"MOP\",\"symbol\":\"$\"},\n        {\"name\":\"Macedonian Denar\",\"code\":\"MKD\",\"symbol\":\"ден\"},\n        {\"name\":\"Malagasy Ariary\",\"code\":\"MGA\",\"symbol\":\"Ar\"},\n        {\"name\":\"Malawian Kwacha\",\"code\":\"MWK\",\"symbol\":\"MK\"},\n        {\"name\":\"Malaysian Ringgit\",\"code\":\"MYR\",\"symbol\":\"RM\"},\n        {\"name\":\"Maldivian Rufiyaa\",\"code\":\"MVR\",\"symbol\":\"Rf\"},\n        {\"name\":\"Mauritanian Ouguiya\",\"code\":\"MRO\",\"symbol\":\"MRU\"},\n        {\"name\":\"Mauritian Rupee\",\"code\":\"MUR\",\"symbol\":\"₨\"},\n        {\"name\":\"Mexican Peso\",\"code\":\"MXN\",\"symbol\":\"$\"},\n        {\"name\":\"Moldovan Leu\",\"code\":\"MDL\",\"symbol\":\"L\"},\n        {\"name\":\"Mongolian Tugrik\",\"code\":\"MNT\",\"symbol\":\"₮\"},\n        {\"name\":\"Moroccan Dirham\",\"code\":\"MAD\",\"symbol\":\"MAD\"},\n        {\"name\":\"Mozambican Metical\",\"code\":\"MZM\",\"symbol\":\"MT\"},\n        {\"name\":\"Myanmar Kyat\",\"code\":\"MMK\",\"symbol\":\"K\"},\n        {\"name\":\"Namibian Dollar\",\"code\":\"NAD\",\"symbol\":\"$\"},\n        {\"name\":\"Nepalese Rupee\",\"code\":\"NPR\",\"symbol\":\"₨\"},\n        {\"name\":\"Netherlands Antillean Guilder\",\"code\":\"ANG\",\"symbol\":\"ƒ\"},\n        {\"name\":\"New Taiwan Dollar\",\"code\":\"TWD\",\"symbol\":\"$\"},\n        {\"name\":\"New Zealand Dollar\",\"code\":\"NZD\",\"symbol\":\"$\"},\n        {\"name\":\"Nicaraguan Córdoba\",\"code\":\"NIO\",\"symbol\":\"C$\"},\n        {\"name\":\"Nigerian Naira\",\"code\":\"NGN\",\"symbol\":\"₦\"},\n        {\"name\":\"North Korean Won\",\"code\":\"KPW\",\"symbol\":\"₩\"},\n        {\"name\":\"Norwegian Krone\",\"code\":\"NOK\",\"symbol\":\"kr\"},\n        {\"name\":\"Omani Rial\",\"code\":\"OMR\",\"symbol\":\".ع.ر\"},\n        {\"name\":\"Pakistani Rupee\",\"code\":\"PKR\",\"symbol\":\"₨\"},\n        {\"name\":\"Panamanian Balboa\",\"code\":\"PAB\",\"symbol\":\"B/.\"},\n        {\"name\":\"Papua New Guinean Kina\",\"code\":\"PGK\",\"symbol\":\"K\"},\n        {\"name\":\"Paraguayan Guarani\",\"code\":\"PYG\",\"symbol\":\"₲\"},\n        {\"name\":\"Peruvian Nuevo Sol\",\"code\":\"PEN\",\"symbol\":\"S/.\"},\n        {\"name\":\"Philippine Peso\",\"code\":\"PHP\",\"symbol\":\"₱\"},\n        {\"name\":\"Polish Zloty\",\"code\":\"PLN\",\"symbol\":\"zł\"},\n        {\"name\":\"Qatari Rial\",\"code\":\"QAR\",\"symbol\":\"ق.ر\"},\n        {\"name\":\"Romanian Leu\",\"code\":\"RON\",\"symbol\":\"lei\"},\n        {\"name\":\"Russian Ruble\",\"code\":\"RUB\",\"symbol\":\"₽\"},\n        {\"name\":\"Rwandan Franc\",\"code\":\"RWF\",\"symbol\":\"FRw\"},\n        {\"name\":\"Salvadoran Colón\",\"code\":\"SVC\",\"symbol\":\"₡\"},\n        {\"name\":\"Samoan Tala\",\"code\":\"WST\",\"symbol\":\"SAT\"},\n        {\"name\":\"Saudi Riyal\",\"code\":\"SAR\",\"symbol\":\"﷼\"},\n        {\"name\":\"Serbian Dinar\",\"code\":\"RSD\",\"symbol\":\"din\"},\n        {\"name\":\"Seychellois Rupee\",\"code\":\"SCR\",\"symbol\":\"SRe\"},\n        {\"name\":\"Sierra Leonean Leone\",\"code\":\"SLL\",\"symbol\":\"Le\"},\n        {\"name\":\"Singapore Dollar\",\"code\":\"SGD\",\"symbol\":\"$\"},\n        {\"name\":\"Slovak Koruna\",\"code\":\"SKK\",\"symbol\":\"Sk\"},\n        {\"name\":\"Solomon Islands Dollar\",\"code\":\"SBD\",\"symbol\":\"Si$\"},\n        {\"name\":\"Somali Shilling\",\"code\":\"SOS\",\"symbol\":\"Sh.so.\"},\n        {\"name\":\"South African Rand\",\"code\":\"ZAR\",\"symbol\":\"R\"},\n        {\"name\":\"South Korean Won\",\"code\":\"KRW\",\"symbol\":\"₩\"},\n        {\"name\":\"Special Drawing Rights\",\"code\":\"XDR\",\"symbol\":\"SDR\"},\n        {\"name\":\"Sri Lankan Rupee\",\"code\":\"LKR\",\"symbol\":\"Rs\"},\n        {\"name\":\"St. Helena Pound\",\"code\":\"SHP\",\"symbol\":\"£\"},\n        {\"name\":\"Sudanese Pound\",\"code\":\"SDG\",\"symbol\":\".س.ج\"},\n        {\"name\":\"Surinamese Dollar\",\"code\":\"SRD\",\"symbol\":\"$\"},\n        {\"name\":\"Swazi Lilangeni\",\"code\":\"SZL\",\"symbol\":\"E\"},\n        {\"name\":\"Swedish Krona\",\"code\":\"SEK\",\"symbol\":\"kr\"},\n        {\"name\":\"Swiss Franc\",\"code\":\"CHF\",\"symbol\":\"CHf\"},\n        {\"name\":\"Syrian Pound\",\"code\":\"SYP\",\"symbol\":\"LS\"},\n        {\"name\":\"São Tomé and Príncipe Dobra\",\"code\":\"STD\",\"symbol\":\"Db\"},\n        {\"name\":\"Tajikistani Somoni\",\"code\":\"TJS\",\"symbol\":\"SM\"},\n        {\"name\":\"Tanzanian Shilling\",\"code\":\"TZS\",\"symbol\":\"TSh\"},\n        {\"name\":\"Thai Baht\",\"code\":\"THB\",\"symbol\":\"฿\"},\n        {\"name\":\"Tongan Pa'anga\",\"code\":\"TOP\",\"symbol\":\"$\"},\n        {\"name\":\"Trinidad & Tobago Dollar\",\"code\":\"TTD\",\"symbol\":\"$\"},\n        {\"name\":\"Tunisian Dinar\",\"code\":\"TND\",\"symbol\":\"ت.د\"},\n        {\"name\":\"Turkish Lira\",\"code\":\"TRY\",\"symbol\":\"₺\"},\n        {\"name\":\"Turkmenistani Manat\",\"code\":\"TMT\",\"symbol\":\"T\"},\n        {\"name\":\"Ugandan Shilling\",\"code\":\"UGX\",\"symbol\":\"USh\"},\n        {\"name\":\"Ukrainian Hryvnia\",\"code\":\"UAH\",\"symbol\":\"₴\"},\n        {\"name\":\"United Arab Emirates Dirham\",\"code\":\"AED\",\"symbol\":\"إ.د\"},\n        {\"name\":\"Uruguayan Peso\",\"code\":\"UYU\",\"symbol\":\"$\"},\n        {\"name\":\"US Dollar\",\"code\":\"USD\",\"symbol\":\"$\"},\n        {\"name\":\"Uzbekistan Som\",\"code\":\"UZS\",\"symbol\":\"лв\"},\n        {\"name\":\"Vanuatu Vatu\",\"code\":\"VUV\",\"symbol\":\"VT\"},\n        {\"name\":\"Venezuelan  Bolívar\",\"code\":\"VEF\",\"symbol\":\"Bs\"},\n        {\"name\":\"Vietnamese Dong\",\"code\":\"VND\",\"symbol\":\"₫\"},\n        {\"name\":\"Yemeni Rial\",\"code\":\"YER\",\"symbol\":\"﷼\"},\n        {\"name\":\"Zambian Kwacha\",\"code\":\"ZMK\",\"symbol\":\"ZK\"}\n    ];\n}","// categories input tags\nexport const simpleTags = (__, element) => {\n\n    if (!element) {\n        throw new Error(\"DOM Element is undifined! Please choose HTML target element.\")\n    }\n\n    let DOMParent = element\n    let DOMList\n    let DOMInput\n    let dataAttribute\n    let arrayOfList\n\n    function DOMCreate() {\n        \n        let ul = document.createElement(\"ul\")\n        let input = document.createElement(\"input\")\n\n        input.setAttribute('placeholder', __('new category'));\n\n        DOMParent.appendChild(ul)\n        DOMParent.appendChild(input)\n\n        // first child is <ul>\n        DOMList = DOMParent.firstElementChild\n        // last child is <input>\n        DOMInput = DOMParent.lastElementChild\n    }\n\n    function DOMRender() {\n\n        // clear the entire <li> inside <ul>\n        DOMList.innerHTML = \"\"\n\n        // render each <li> to <ul>\n        arrayOfList.forEach((currentValue, index) => {\n\n            currentValue = currentValue.trim();\n\n            if (currentValue) {\n\n                let li = document.createElement(\"li\")\n                li.innerHTML = `${currentValue} <a>&times;</a>`\n                li.querySelector(\"a\").addEventListener(\"click\", function () {\n                    onDelete(index)\n                })\n\n                DOMList.appendChild(li)\n            }\n        })\n\n        setAttribute()\n    }\n\n    function onKeyUp() {\n\n        DOMInput.addEventListener(\"keyup\", function (event) {\n            let text = this.value.trim()\n\n            // check if ',' or 'enter' key was press\n            if (text.includes(\",\") || event.keyCode === 13) {\n                // check if empty text when ',' is remove\n                if (text.replace(\",\", \"\") !== \"\") {\n                    // push to array and remove ','\n                    arrayOfList.push(text.replace(\",\", \"\"))\n                }\n                // clear input\n                this.value = \"\"\n            }\n\n            DOMRender()\n        })\n    }\n\n    function onDelete(id) {\n\n        arrayOfList = arrayOfList.filter(function (currentValue, index) {\n            if (index === id) {\n                return false\n            }\n            return currentValue\n        })\n\n        DOMRender()\n    }\n\n    function getAttribute() {\n\n        dataAttribute = DOMParent.getAttribute(\"data-simple-tags\")\n        dataAttribute = dataAttribute.split(\",\")\n\n        // store array of data attribute in arrayOfList\n        arrayOfList = dataAttribute.map((currentValue) => {\n            return currentValue.trim()\n        })\n    }\n\n    function setAttribute() {\n        DOMParent.setAttribute(\"data-simple-tags\", arrayOfList.toString())\n    }\n\n    getAttribute()\n    DOMCreate()\n    DOMRender()\n    onKeyUp()\n}","import { __html, __attr } from '@kenzap/k-cloud';\n\n// html product list loader\nexport const HTMLContent = (__) => {\n\nreturn `\n  <div class=\"container p-edit\">\n    <div class=\"d-flex justify-content-between bd-highlight mb-3\">\n        <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n        \n    </div>\n    <div class=\"row\">\n        <div class=\"col-lg-9 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n            <div class=\"sections\" id=\"sections\" role=\"tablist\" style=\"width:100%;\">\n\n                <div class=\"row\">\n                    <div class=\"col-12 grid-margin stretch-card\">\n                        <div class=\"card border-white shadow-sm p-sm-3\">\n                            <div class=\"card-body\">\n\n                                <div class=\"landing_status\"></div>\n                                <input type=\"hidden\" class=\"form-control\" id=\"landing-slug\" value=\"\">\n\n                                <h4 id=\"elan\" class=\"card-title mb-4\">${ __html('Description') }</h4>\n\n                                <div id=\"placeholders\">\n\n                                    <div class=\"mb-3\">\n                                        <label class=\"banner-title-l form-label\" for=\"p-title\">${ __html('Title') }</label>\n                                        <input type=\"text\" class=\"form-control inp\" id=\"p-title\" placeholder=\"${ __attr('Sushi set..') }\">\n                                        <p class=\"form-text\"> </p>\n                                    </div>\n\n                                    <div class=\"mb-3\">\n                                        <label class=\"banner-descshort-l form-label\" for=\"p-sdesc\">${ __html('Short Description') }</label>\n                                        <textarea class=\"form-control inp\" id=\"p-sdesc\" placeholder=\"  \" maxlength=\"120\" rows=\"2\"></textarea>\n                                    </div>\n\n                                    <div class=\"mb-3\">\n                                        <label class=\"banner-descshort-l form-label\" for=\"desc\">${ __html('Images') }</label>\n                                        <div class=\"clearfix\"></div>\n                                        <div class=\"ic\"></div>\n                                        <div class=\"clearfix\"></div>\n                                    </div>\n\n                                    <div class=\"mb-3\">\n                                        <div class=\"clearfix\"></div>\n                                        <div style=\"clear:both;margin-top:16px;\"></div>\n                                        <label class=\"banner-descshort-l form-label\" for=\"p-desc\">${ __html('Description') }</label>\n                                        <textarea class=\"form-control inp\" id=\"p-ldesc\" placeholder=\" \" maxlength=\"2000\" rows=\"10\"></textarea>\n                                    </div>\n\n                                    <div class=\"mb-3 mw\">\n                                        <div class=\"list-wrapper\">\n                                            <ul class=\"d-flex flex-column-reverse features\"> </ul>\n                                        </div>\n                                        <p class=\"form-text\"> </p>\n                                    </div>\n\n                                    <div class=\"price_group mt-3 mb-3\">\n                                        <h4 class=\"card-title mb-3\">${ __html('Price') }</h4>\n                                        <div class=\"price_group_base\">\n                                            <div class=\"mb-3\">\n                                                <div class=\"input-group\">\n                                                    <div id=\"p-price-c\">\n                                                        <label for=\"p-price\" class=\"form-label\">${ __html('Default') } <span class=\"lang\"></span></label>\n                                                        <div class=\"input-group pe-3 mb-3\">\n                                                            <span id=\"p-price-symb\" class=\"input-group-text\">$</span>\n                                                            <input id=\"p-price\" type=\"text\" class=\"form-control inp\" placeholder=\"55.00\" autocomplete=\"off\">\n                                                        </div>\n                                                    </div>\n                                                    <div id=\"p-priced-c\" class=\"d-flex align-content-end flex-wrap\">\n                                                        <a class=\"btn btn-outline-secondary mb-3 add-discount\" href=\"#\" role=\"button\" id=\"btn-discount\" >\n                                                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus\" viewBox=\"0 0 16 16\"><path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/></svg>\n                                                            ${ __html('discount') }\n                                                        </a>\n                                                        <div class=\"d-none\">\n                                                            <label for=\"p-priced pe-3 mb-3\" class=\"form-label\">${ __html('Discounted') } <span class=\"lang\"></span></label>\n                                                            <input id=\"p-priced\" type=\"text\" class=\"form-control\" placeholder=\"45.00\" autocomplete=\"off\">\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                \n                                                <div class=\"discount-blocks mw\">\n                                                    <label class=\"discount-list form-label\" for=\"discount-list \">${ __html('Discount list') }</label>\n                                                    <ul class=\"mb-4\">\n                                               \n                                                    </ul>\n                                                </div>\n                                                <div class=\"add-mix-ctn text-left mt-3 mb-2\"><a class=\"add-mix-block\" href=\"#\" data-action=\"add\">${ __html('+ add variation') }</a></div>\n                                            </div>\n\n                                            <div class=\"variation-blocks\">\n                        \n                                            </div>\n\n                                            <div style='margin:24px 0 48px;border-bottom:0px solid #ccc;'></div>\n\n                                            <div class=\"mb-3 mw\">\n                                                <h4 id=\"elan\" class=\"card-title\">${ __html('Inventory') }</h4>\n                                                <label for=\"stock_sku\" class=\"form-label\"> <span class=\"lang\"></span></label>\n                                                <div class=\"input-group\">\n                                                    <input id=\"stock_sku\" type=\"text\" style=\"width:100%;\" class=\"form-control\" placeholder=\"\" maxlength=\"200\">\n                                                    <p class=\"form-text\">${ __html('Product stock unit identification number or SKU.') }</p>\n                                                </div>\n                                            </div>\n\n                                            <div class=\"mb-3 mw\">\n                                                <div class=\"form-check\">\n                                                    <input id=\"stock_management\" class=\"form-check-input stock-management\" name=\"stock_management\" type=\"checkbox\" value=\"0\" data-type=\"checkbox\">\n                                                    <label class=\"form-check-label\" for=\"stock_management\">\n                                                        ${ __html('Stock management') }\n                                                    </label>\n                                                </div>\n                                                <p class=\"form-text\">${ __html('Enable stock management.') }</p>\n                                            </div>\n\n                                            <div class=\"mb-3 mw stock-cont\">\n                                                <label class=\"form-label\" for=\"stock_quantity\">${ __html('Stock quantity') }</label>\n                                                <input id=\"stock_quantity\" type=\"text\" class=\"form-control\" placeholder=\"0\">\n                                                <p class=\"form-text\">${ __html('Total number of products left.') }</p>\n                                            </div>\n\n                                            <div class=\"mb-3 mw stock-cont\">\n                                                <label class=\"form-label\" for=\"stock_low_threshold\">${ __html('Low stock') }</label>\n                                                <input id=\"stock_low_threshold\" type=\"text\" class=\"form-control\" placeholder=\"0\">\n                                                <p class=\"form-text\">${ __html('Low stock threshold.') }</p>\n                                            </div>\n\n                                            <div class=\"mb-3 mw stock-cont\">\n                                                <label class=\"form-label\" >${ __html('Inventory table') }</label>\n                                                <div class=\"inventory-cont\">\n\n                                                </div>\n                                                <div class=\"add-mix-ctn text-left mt-1 mb-2\"><a class=\"add-inventory\" href=\"#\" data-action=\"add\" style=\"font-size: 0.875rem;\">${ __html('+ add inventory') }</a></div>\n\n                                                <p class=\"form-text d-none\">${ __html('Low stock threshold.') }</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class=\"desc-repeater-cont\">\n\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n\n            </div>\n        </div>\n        <div class=\"col-lg-3 mt-3 mt-lg-0 grid-margin grid-margin-lg-0 grid-margin-md-0\">\n\n            <div class=\"row\">\n                <div class=\"col-12 grid-margin stretch-card\">\n                    <div class=\"card border-white shadow-sm p-sm-3\">\n                        <div class=\"card-body\">\n\n                            <h4 class=\"card-title\" style=\"display:none;\">${ __html('General') }</h4>\n                            <div class=\"landing_status\"></div>\n                            <input type=\"hidden\" class=\"form-control\" id=\"landing-slug\" value=\"\">\n\n                            <h4 id=\"elan\" class=\"card-title mb-4\">${ __html('Status') }</h4>\n                            <div id=\"status-cont\" class=\"mb-3\">\n\n                                <div class=\"col-sm-12\">\n                                    <div class=\"form-check\">\n                                        <label class=\"form-check-label status-publish form-label\">\n                                            <input type=\"radio\" class=\"form-check-input\" name=\"p-status\"\n                                                id=\"p-status1\" value=\"1\">\n                                                ${ __html('Published') }\n                                        </label>\n                                    </div>\n                                </div>\n\n                                <div class=\"col-sm-12\">\n                                    <div class=\"form-check\">\n                                        <label class=\"form-check-label status-draft form-label\">\n                                            <input type=\"radio\" class=\"form-check-input\" name=\"p-status\"  id=\"p-status0\" value=\"0\">\n                                            ${ __html('Draft') }\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <h4 id=\"elan\" class=\"card-title mb-4\">${ __html('Categories') }</h4>\n                            <div id=\"p-cats\" class=\"simple-tags mb-4\" data-simple-tags=\"\"></div>\n                            <div class=\"clearfix\"> </div>\n\n                            <div class=\"d-grid gap-2\">\n                                <button class=\"btn btn-primary btn-save\" type=\"button\">${ __html('Save') }</button>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n  </div>\n\n  <div class=\"modal p-modal\" tabindex=\"-1\">\n    <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h5 class=\"modal-title\"></h5>\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div class=\"modal-body\">\n\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-primary btn-modal\"></button>\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"></button>\n            </div>\n        </div>\n    </div>\n  </div>\n\n  <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n    <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\"\n        aria-atomic=\"true\" data-bs-delay=\"3000\">\n        <div class=\"d-flex\">\n            <div class=\"toast-body\"></div>\n            <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n        </div>\n    </div>\n  </div>\n  `;\n}","import { H, __html, __attr, html, attr, showLoader, hideLoader, parseApiError, getCookie, onClick, onKeyUp, spaceID, simulateClick, getSiteId, toast, link } from '@kenzap/k-cloud';\nimport { formatStatus, priceFormat, formatTime, stockBadge, simpleTags, getPageNumber, getProductId, onlyNumbers, formatTimeDetailed, mt } from \"../_/_helpers.js\"\nimport { inventoryEdit } from \"../_/_mod_inventory_edit.js\"\n\n// html inventory list loader\nexport const inventoryTable = (_this) => {\n\n    if(!_this.state.response.product.stock.inventory) _this.state.response.product.stock.inventory = [];\n\n    if(document.querySelector('.modal-backdrop')) document.querySelector('.modal-backdrop').remove();\n\n    // populate inventory table\n    document.querySelector('.inventory-cont').innerHTML = `\n    <div class=\"table-responsive-\">\n        <table class=\"table table-hover table-borderless align-middle table-striped table-history-list mb-0\" style=\"\">\n            <thead>\n                <tr>\n                    <th class=\"form-text\">\n                        ${ __html(\"Title\") }\n                    </th>\n                    <th class=\"form-text\">\n                        ${ __html('Amount') }\n                    </th>\n                    <th class=\"form-text\">\n                        ${ __html('Price') }\n                    </th>\n                    <th>\n                    \n                    </th>\n                </tr>\n            </thead>\n            <tbody id=\"inventory-history\">\n\n                ${\n                    _this.state.response.product.stock.inventory.length == 0 ? `\n                    <tr>\n                        <td class=\"form-text\" colspan=\"4\">\n                            ${ __html(\"no data to display\") }\n                        </td>\n                    </tr>\n                    ` : ''\n                }\n\n                ${ \n                    _this.state.response.product.stock.inventory.map((row, i) => {\n\n                        return `\n                            <tr>\n                                <td class=\"form-text text-dark\">\n                                    ${ row.title }\n                                </td>\n                                <td class=\"form-text\">\n                                    <div class=\"fw-bold ${ (row.amount < 0 ? 'text-danger' : 'text-success' ) }\">${ (row.amount < 0 ? '' : '+' ) + row.amount + row.stock_unit }</div>\n                                </td>\n                                <td id=\"itid${ attr(row.id) }\" data-amount=\"${ attr(row.amount) }\" class=\"form-text text-dark\">\n\n                                </td>\n                                <td class=\"text-end d-none-\">\n                                    <div class=\"dropdown inventorTableActionsCont\">\n                                        <svg id=\"inventoryHistoryActions${i}\" data-bs-toggle=\"dropdown\" data-boundary=\"viewport\" aria-expanded=\"false\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-three-dots-vertical dropdown-toggle po\" viewBox=\"0 0 16 16\">\n                                            <path d=\"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"/>\n                                        </svg>\n                                        <ul class=\"dropdown-menu\" aria-labelledby=\"inventoryHistoryActions${i}\">\n                                            <li><a class=\"dropdown-item po d-none\" href=\"#\" data-action=\"copy\" data-id=\"${ attr(row.id) }\" data-index=\"${ i }\">${ __html('Copy') }</a></li>\n                                            <li><hr class=\"dropdown-divider d-none\"></li>\n                                            <li><a class=\"dropdown-item po\" href=\"#\" data-action=\"remove\" data-id=\"${ attr(row.id) }\" data-index=\"${ i }\">${ __html('Remove') }</a></li>\n                                        </ul>\n                                    </div>\n                                </td>\n                            </tr>\n                        `\n\n                    }).join('')\n                }\n\n                ${\n                    _this.state.response.product.stock.inventory.length > 0 ? `\n                    <tr>\n                        <td class=\"form-text\"></td>\n                        <td class=\"form-text\"></td>\n                        <td id=\"itidtotal\" class=\"form-text\" colspan=\"2\">\n                            \n                        </td>\n                    </tr>\n                    ` : ''\n                }\n\n            </tbody>\n        </table>\n    </div>\n    `;\n\n    // ${__html('Total')}\n\n    // table actions\n    [...document.querySelectorAll(\".inventorTableActionsCont .dropdown-item\")].forEach(row => {\n        row.addEventListener(\"click\", (e)=> {\n\n            e.preventDefault();\n\n            switch(e.currentTarget.dataset.action){\n\n                case 'copy':\n\n                    // copyRow(_this, e.currentTarget.dataset.id);\n                break;\n                case 'remove':\n\n                    if(!confirm(__html('Remove this record?'))) return;\n\n                    removeInventoryRow(_this, e.currentTarget.dataset.id);\n                break;\n            }\n        });\n    });\n\n    // add inventory modal\n    if(!document.querySelector(\".add-inventory\").dataset.assigned) document.querySelector(\".add-inventory\").addEventListener('click', e => {\n\n        e.preventDefault();\n\n        document.querySelector(\".add-inventory\").dataset.assigned = true;\n\n        let modal = document.querySelector(\".modal\");\n        _this.state.modalCont = new bootstrap.Modal(modal);\n        modal.querySelector(\".modal-dialog\").classList.add('modal-lg');\n        modal.querySelector(\".modal-title\").innerHTML = __html('Add Inventory Item');\n        modal.querySelector('.modal-footer').innerHTML = `\n            <button type=\"button\" class=\"btn btn-success btn-modal btn-add btn-inventory-add d-none\">${ __html('Add') }</button>\n            <button class=\"btn btn-outline-secondary remove-application btn-lg d-none\" type=\"button\" title=\"${ __html('Remove application.') }\"><span><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\"><path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/><path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/></svg></span></button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">${ __html('Close') }</button>\n        `;\n\n        modal.querySelector(\".modal-body\").innerHTML = `\n            <div class=\"row mb-4\">\n                <div class=\"col-sm-12\">\n                    <div class=\"table-responsive-\">\n                        <table class=\"table table-hover table-borderless align-middle table-striped table-inventory-list mb-0\" style=\"\">\n                            <thead>\n                                <tr>\n                                    <th>\n                                        ${ __html(\"Title\") }\n                                    </th>\n                                    <th>\n                                        ${ __html('Amount') }\n                                    </th>\n                                    <th>\n                                    \n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody id=\"inventory-list\">\n                                <tr>\n                                    <td colspan=\"3\">\n                                        ${ __html(\"Loading\") }\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        `;\n\n        let addToInventory = (_this, obj) => {\n\n            let id = getProductId();\n            let sid = spaceID();\n\n            // showLoader();\n            // if(!_this.state.response.product.inventory) _this.state.response.product.inventory = [];\n            \n            _this.state.response.product.stock.inventory.push(obj);\n\n            // send data\n            fetch('https://api-v1.kenzap.cloud/', {\n                method: 'post',\n                headers: H(),\n                body: JSON.stringify({\n                    query: {\n                        product: {\n                            type:       'update',\n                            key:        'ecommerce-product',\n                            id:         id,         \n                            sid:        sid,\n                            data:       {\n                                stock: _this.state.response.product.stock\n                            }\n                        }\n                    }\n                })\n            })\n            .then(response => response.json())\n            .then(response => {\n\n                if(response.success){\n\n                    if(_this.state.modalCont) _this.state.modalCont.hide();\n\n                    inventoryTable(_this);\n                    \n                }else{\n\n                    parseApiError(response);\n                }\n                \n                // console.log('Success:', response);\n            })\n            .catch(error => { parseApiError(error); });\n        }\n\n        let loadInventory = (_this) => {\n\n            // send data\n            let limit = 50;\n            let s = \"\";\n            fetch('https://api-v1.kenzap.cloud/', {\n                method: 'post',\n                headers: H(),\n                body: JSON.stringify({\n                    query: {\n                        inventory: {\n                            type:       'find',\n                            key:        'ecommerce-inventory',\n                            fields:     ['_id', 'img', 'status', 'tags', 'price', 'price_prev', 'price_per_unit', 'price_per_unit_prev', 'title', 'stock_amount', 'stock_unit', 'stock_warning', 'updated'],\n                            limit:      limit,\n                            // term:[\n                            //     {\n                            //         \"field\": \"iid\",\n                            //         \"relation\": \"=\",\n                            //         \"type\": \"string\",\n                            //         \"value\": _this.state.id\n                            //     }\n                            // ],\n                            offset:     s.length > 0 ? 0 : getPageNumber() * limit - limit,     // automatically calculate the offset of table pagination\n                            search:     {                                                                               // if s is empty search query is ignored\n                                            field: 'title',\n                                            s: s\n                                        },\n                            sortby:     {\n                                            field: 'created',\n                                            order: 'DESC'\n                                        },\n                        },\n                    }\n                }) \n            })\n            .then(response => response.json())\n            .then(response => {\n\n                if (response.success){\n\n                    _this.state.inventory = response.inventory;\n\n                    // table is empty\n                    if(response.inventory.length == 0){\n                        \n                        document.querySelector(\"#inventory-list\").innerHTML = `<tr><td colspan=\"3\" class=\"form-text\">${ __html(\"No data to display.\") }</td></tr>`;\n                        return;\n                    }\n                    \n                    // load table data\n                    document.querySelector(\"#inventory-list\").innerHTML = response.inventory.map((inventory, i) => {\n\n                        return `\n                            <tr>\n                                <td data-id=\"${ attr(inventory._id) }\">\n                                    ${ inventory.title }\n                                </td>\n                                <td data-id=\"${ attr(inventory._id) }\">\n                                    <div class=\"input-group mb-sm-2\" style=\"max-width:200px;\">\n                                        <input id=\"stock_amount${i}\" type=\"text\" class=\"form-control stock_amount inp\" name=\"stock_amount\" aria-label=\"Current stock amount\" aria-describedby=\"basic-addon1\" value=\"\" autocomplete=\"off\">\n                                        <span class=\"input-group-text\" id=\"stock_amount_unit\">${ inventory.stock_unit }</span>\n                                    </div>\n                                </td>\n                                <td class=\"text-end d-none- add-inventory-item\" data-index=\"${i}\" data-id=\"${ attr(inventory._id) }\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-circle text-success po\" viewBox=\"0 0 16 16\">\n                                        <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\n                                        <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/>\n                                    </svg>\n                                </td>\n                            </tr>`;\n\n                    }).join('');\n\n                    // only numbers\n                    onlyNumbers('.stock_amount', [8, 46, 190, 189]);\n\n                    // add inventory item\n                    [...document.querySelectorAll(\".add-inventory-item\")].forEach(item => {\n\n                        item.addEventListener('click', el => {\n\n                            let i = el.currentTarget.dataset.index;\n                            // check if amount is not empty\n                            let amount = document.querySelector(\"#stock_amount\"+i).value;\n                            if(amount.length == 0){ alert(__html('Please enter amount')); return; }\n                            if(isNaN(amount)){ alert(__html('Amount should be a number')); return; }\n                            if(amount < 0){ alert(__html('Amount should be a positive number')); return; }\n\n                            let obj = { id: el.currentTarget.dataset.id, amount: amount, title: _this.state.inventory[i].title, stock_unit: _this.state.inventory[i].stock_unit }\n\n                            addToInventory(_this, obj);\n                            // el.currentTarget.dataset.id\n                        });\n                    });\n\n                }else{\n\n                    parseApiError(response);\n                }\n            })\n            .catch(error => { parseApiError(error); });\n        }\n\n        loadInventory(_this);\n\n        // btn-inventory-add\n\n        _this.state.modalCont.show();\n    });\n\n    // remove record from table\n    let removeInventoryRow = (_this, id) => {\n\n        // console.log(_this.state.response.product.stock.inventory);\n        // console.log(id);\n\n        // let id = getProductId();\n        let sid = spaceID();\n\n        _this.state.response.product.stock.inventory = _this.state.response.product.stock.inventory.filter(el => { return el.id != id })\n\n        // send data\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: H(),\n            body: JSON.stringify({\n                query: {\n                    product: {\n                        type:       'update',\n                        key:        'ecommerce-product',\n                        id:         getProductId(),         \n                        sid:        sid,\n                        data:       {\n                            stock: _this.state.response.product.stock\n                        }\n                    }\n                }\n            }) \n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // // restore loading button state\n            // modal.querySelector('.btn-add-item').dataset.loading = \"\";\n            // modal.querySelector('.btn-add-item').innerHTML = btnHTML;\n\n            if (response.success){\n\n                // getHistory(_this);\n                if(_this.state.modalCont) _this.state.modalCont.hide();\n\n                inventoryTable(_this);\n\n                toast(__html('Record removed'));\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    }\n\n    let loadInventoryPrice = (_this) => {\n\n        let ids = _this.state.response.product.stock.inventory.map(obj => { return obj.id })\n        // console.log(ids);\n\n        // return; \n        // send data\n        let limit = 50;\n        let s = \"\";\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: H(),\n            body: JSON.stringify({\n                query: {\n                    inventory_price: {\n                        type:       'find',\n                        key:        'ecommerce-inventory',\n                        fields:     ['_id', 'img', 'status', 'tags', 'price', 'price_prev', 'price_per_unit', 'price_per_unit_prev', 'title', 'stock_amount', 'stock_unit', 'stock_warning', 'updated'],\n                        id:         ids\n                        // limit:      limit,\n                        // term:[\n                        //     {\n                        //         \"field\": \"iid\",\n                        //         \"relation\": \"=\",\n                        //         \"type\": \"string\",\n                        //         \"value\": _this.state.id\n                        //     }\n                        // ],\n                        // offset:     s.length > 0 ? 0 : getPageNumber() * limit - limit,     // automatically calculate the offset of table pagination\n                        // search:     {                                                                               // if s is empty search query is ignored\n                        //                 field: 'title',\n                        //                 s: s\n                        //             },\n                        // sortby:     {\n                        //                 field: 'created',\n                        //                 order: 'DESC'\n                        //             },\n                    },\n                }\n            }) \n        })\n        .then(response => response.json())\n        .then(response => {\n\n            if(response.success){\n\n                // _this.state.inventory = response.inventory\n                // console.log(\"prices\");\n                // console.log(response.inventory_price);\n\n                let price_total = 0;\n                response.inventory_price.forEach(inv => {\n\n                    let price = inv.price_per_unit * parseFloat(document.querySelector('#itid'+inv._id).dataset.amount);\n                    price_total += price;\n                    document.querySelector('#itid'+inv._id).innerHTML = priceFormat(_this, price); \n                })\n\n                if(document.querySelector('#itidtotal')) document.querySelector('#itidtotal').innerHTML = priceFormat(_this, price_total);\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    }\n\n    // load inventory prices\n    loadInventoryPrice(_this);\n}","import { H, __html, __attr, showLoader, hideLoader, initHeader, initBreadcrumbs, parseApiError, getCookie, onClick, onChange, simulateClick, spaceID, toast, link } from '@kenzap/k-cloud';\nimport { getProductId, makeNumber, priceFormat, onlyNumbers, loadAddon, initFooter } from \"../_/_helpers.js\"\nimport { simpleTags } from \"../_/_ui.js\"\nimport { HTMLContent } from \"../_/_cnt_product_edit.js\"\nimport { inventoryTable } from \"../_/_mod_product_edit_inventory_edit.js\"\n\n/**\n * Main product listing page of the dashboard.\n * Loads HTMLContent from _cnt_product_list.js file.\n * Renders product list in a dynamic table.\n * \n * @version 1.0\n */\nclass ProductEdit {\n\n    // construct class\n    constructor(){\n        \n        this.state = {\n            ajaxQueue: 0,\n            settings: {}, // where all requested settings are cached\n        };\n    \n        // connect to backend\n        this.getData();\n    }\n\n    /**\n     * Get data from the cloud and authenticate the user.\n     * Load translation strings, product data, settings and basic user info.\n     * Get any additional data by extending the query object.\n     * \n     * @version 1.0\n     * @link https://developer.kenzap.cloud/\n     */\n    getData = () => {\n\n        // block ui during load\n        showLoader();\n\n        let id = getProductId();\n\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: H(),\n            body: JSON.stringify({\n                query: {\n                    user: {\n                        type:       'authenticate',\n                        fields:     ['avatar'],\n                        token:      getCookie('kenzap_token')\n                    },\n                    product: {\n                        type:       'find',\n                        key:        'ecommerce-product',\n                        id:         id,   \n                        fields:     ['_id', 'id', 'img', 'status', 'price', 'discounts', 'variations', 'title', 'sdesc', 'ldesc', 'stock', 'cats', 'updated']\n                    },\n                    settings: {\n                        type:       'get',\n                        key:        'ecommerce-settings',\n                        fields:     ['currency', 'currency_symb', 'currency_symb_loc', 'tax_calc', 'tax_auto_rate', 'tax_rate', 'tax_display', 'scripts_product_edit', 'addons'],\n                    },\n                    locale: {\n                        type:       'locale',\n                        source:      ['extension'],\n                        key:         'ecommerce',\n                    }\n                }\n            }) \n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // hide UI loader\n            hideLoader();\n\n            if (!response.success){ parseApiError(response); return; }\n\n            if (response.success){\n\n                this.state.response = response;\n                this.state.settings = response.settings;\n\n                // init header\n                initHeader(response);\n  \n                // html content \n                document.querySelector('#contents').innerHTML = HTMLContent();\n\n                // check product response\n                if (response.product.length == 0) {\n             \n                    this.initListeners('all');\n                    return;\n                }\n\n                // bind frontend data\n                this.render(response.product);\n\n                // load images if any\n                this.loadImages(response.product);\n\n                // init page listeners\n                this.initListeners('all');\n\n                // footer note\n                initFooter(this);\n\n                // load addons\n                if(response.settings.addons) if(response.settings.addons.product_edit) response.settings.addons.product_edit.forEach(obj => { loadAddon(obj.src, obj.version); })\n\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    }\n\n    render = (product) => {\n\n        let d = document;\n\n        // initiate breadcrumbs\n        initBreadcrumbs(\n            [\n                { link: link('https://dashboard.kenzap.cloud'), text: __html('Home') },\n                { link: link('/'), text: __html('E-commerce') },\n                { link: link('/product-list/'), text: __html('Product List') },\n                { text: __html('Product Edit') }\n            ]\n        );\n\n        // general section\n        d.querySelector(\"#p-title\").value = product.title;\n        d.querySelector(\"#p-sdesc\").value = product.sdesc;\n        d.querySelector(\"#p-ldesc\").value = product.ldesc;\n\n        // price section\n        d.querySelector(\"#p-price\").value = product.price; onlyNumbers('#p-price', [8, 46, 190]);\n        d.querySelector(\"#p-price-symb\").innerHTML = this.state.settings['currency_symb'] ? this.state.settings['currency_symb'] : \"\";\n\n        // discounts \n        document.querySelector(\".discount-blocks\").dataset.data = encodeURIComponent(JSON.stringify(product.discounts ? product.discounts : []));\n        this.renderDiscounts();\n\n        // price variation section\n        for(let m in product.variations){ \n\n            let vr = product.variations[m];\n            let data = []; data['title'] = vr['title']; data['type'] = vr['type']; data['required'] = vr['required']; data['index'] = m;\n  \n            d.querySelector(\".variation-blocks\").innerHTML += this.structMixBlock(data);\n\n            for(let n in vr['data']){\n  \n              let vrd = vr['data'][n];\n              let data = []; \n              data['title'] = vrd['title'];\n              data['price'] = vrd['price'];\n              data['type'] = vr['type'];\n  \n              // console.log(data['title']);\n              d.querySelector(\".var-block[data-index='\"+m+\"'] .offer-pricef\").innerHTML += this.structMixRow(data);\n            }\n        }\n\n        // inventory\n        if(!product['stock']) product['stock'] = { management: false, sku: \"\", qty: 0, low_threshold: 0, inventory: [] };\n\n        for(let el of document.querySelectorAll('.stock-cont')){ product['stock']['management'] == true ? el.classList.remove('d-none') : el.classList.add('d-none'); }\n        document.querySelector('#stock_sku').value = product['stock']['sku'] ? product['stock']['sku'] : \"\";\n        document.querySelector('#stock_management').checked = product['stock']['management']; //  == \"1\" ? true: false;\n        document.querySelector('#stock_quantity').value = product['stock']['qty'] ? makeNumber(product['stock']['qty']) : 0;\n        document.querySelector('#stock_low_threshold').value = product['stock']['low_threshold'] ? makeNumber(product['stock']['low_threshold']) : 0;\n\n        // init status box\n        document.querySelector('#p-status'+product.status).checked = true;\n\n        // init categories\n        let pcats = document.querySelector('#p-cats');\n        if (product.cats) pcats.setAttribute('data-simple-tags', product.cats);\n        const tags = new simpleTags(__, pcats);\n        \n        // render inventory table fot stock\n        inventoryTable(this);\n    }\n\n    initListeners = (type = 'partial') => {\n\n        // listeners that can be initiated only once\n        if(type == 'all'){\n\n            // product save button\n            onClick('.btn-save', this.listeners.saveProduct);\n            \n            // modal success button\n            onClick('.p-modal .btn-primary', this.listeners.modalSuccessBtn);\n        }\n\n        // add discount\n        onClick('.add-discount', this.listeners.addDiscountBlock);\n\n        // add variation block\n        onClick('.add-mix-block', this.listeners.addMixBlock);\n        \n        // edit variation block\n        onClick('.edit-block', this.listeners.editBlock);\n\n        // remove variation block\n        onClick('.remove-block', this.listeners.removeBlock);\n\n        // add variation option\n        onClick('.add-mix', this.listeners.addMixOption);\n\n        // remove variation option\n        onClick('.remove-option', this.listeners.removeOption);\n\n        // stock management enable disable\n        onClick('.stock-management', this.listeners.stockManagement);\n    }\n\n    listeners = {\n\n        editBlock: (e) => {\n\n            e.preventDefault();\n\n            let amb = document.querySelector('.add-mix-block');\n            amb.dataset.action = 'edit';\n            amb.dataset.index = e.currentTarget.dataset.index;\n            setTimeout(() => simulateClick(amb), 10);\n        },\n\n        removeBlock: (e) => {\n\n            e.preventDefault();\n\n            let c = confirm(__html('Remove entire block?'));\n            if(c){ \n                e.currentTarget.parentNode.parentNode.remove();\n             }\n        },\n\n        addMixBlock: (e) => {\n\n            e.preventDefault();\n\n            let action = e.currentTarget.dataset.action; // $(this).attr('data-action');\n            let index = e.currentTarget.dataset.index; // $(this).attr('data-index');\n            e.currentTarget.dataset.action = 'add'; // $(this).attr('data-action', 'add');\n\n            // init defaults\n            let modal_title = __html('Add Variation Block');\n            let title = \"\";\n            let type = \"\";\n            let required = 0;\n            let modal_btn = __html('Add'), modal_cancel_btn = __html('Cancel');\n\n            // override defaults in editing mode\n            if(action == 'edit'){\n\n                modal_title = __html('Edit Variation Block');\n\n                title = document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.title;\n                type  = document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.type;\n                required = parseInt(document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.required);\n\n                modal_btn = __html('Save');\n            }\n\n            let pmodal = document.querySelector(\".p-modal\");\n            let pmodalCont = new bootstrap.Modal(pmodal);\n            \n            pmodal.querySelector(\".modal-title\").innerHTML = modal_title;\n            pmodal.querySelector(\".btn-primary\").innerHTML = modal_btn;\n            pmodal.querySelector(\".btn-secondary\").innerHTML = modal_cancel_btn;\n\n            pmodalCont.show();\n\n            let modalHTml = `\n            <div class=\"form-cont\">\n                <div class=\"form-group mb-3\">\n                    <label for=\"mtitle\" class=\"form-label\">${ __html('Save') }</label>\n                    <input type=\"text\" class=\"form-control\" id=\"mtitle\" autocomplete=\"off\" placeholder=\"Rice type\" value=\"${ title }\">\n                </div>\n                <div class=\"form-group mb-3\">\n                    <label for=\"mtype\" class=\"form-label\">${ __html('Input type') }</label>\n                    <select id=\"mtype\" class=\"form-control \" >\n                        <option ${ type=='radio'?'selected=\"selected\"':'' } value=\"radio\">${ __html('Radio buttons') }</option>\n                        <option ${ type=='checkbox'?'selected=\"selected\"':'' } value=\"checkbox\">${ __html('Checkboxes') }</option>\n                    </select>\n                    <p class=\"form-text\">${ __html('Define how this renders on frontend.') }</p>\n                </div>\n                <div class=\"form-group mb-3\">\n                    <div class=\"form-check\">\n                        <label for=\"id=\"mtype\"\" class=\"form-check-label form-label\">\n                            <input id=\"mrequired\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Required') }\n                        </label>\n                    </div>\n                    <p class=\"form-text\">${ __html('Make this variation mandatory for users.') }</p>\n                </div>\n                <div class=\"form-group mb-3 dn\">\n                    <label for=\"mtype\" class=\"form-label\">${ __html('Minimum required') }</label>\n                    <select id=\"mtype\" class=\"form-control\" >\n                        <option value=\"1\">1</option>\n                        <option value=\"2\">2</option>\n                    </select>\n                </div>\n            </div>`;\n\n            pmodal.querySelector(\".modal-body\").innerHTML = modalHTml;\n\n            setTimeout( () => pmodal.querySelector(\"#mtitle\").focus(),100 );\n\n            this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n\n                let mtitle = pmodal.querySelector(\".p-modal #mtitle\").value;\n                let mtype = pmodal.querySelector(\".p-modal #mtype\").value;\n                let mrequired = pmodal.querySelector(\".p-modal #mrequired:checked\");\n                mrequired = mrequired == null ? 0 : mrequired.value == \"1\" ? 1 : 0;\n            \n                if(mtitle.length<2){ alert(__html('Please provide longer title')); return; }\n\n                // add mix and match\n                let data = []; data['title'] = mtitle; data['type'] = mtype; data['required'] = mrequired; data['index'] = document.querySelectorAll(\".var-block\").length;\n                if(action == 'edit'){\n\n                    document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.title = mtitle;\n                    document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.type = mtype;\n                    document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.required = mrequired;\n                    document.querySelector(\".var-block[data-index='\"+index+\"'] .title\").innerHTML = mtitle;\n                }\n\n                if(action == 'add'){\n\n                    if(document.querySelector(\".variation-blocks .var-block\") == null){\n                        document.querySelector(\".variation-blocks\").innerHTML = this.structMixBlock(data);\n                    }else{\n                        document.querySelector(\".variation-blocks .var-block:last-of-type\").insertAdjacentHTML('afterend', this.structMixBlock(data));\n                    }\n                }\n\n                pmodalCont.hide();\n\n                setTimeout(() => this.initListeners('partial'), 10);\n            }\n        },\n\n        addMixOption: (e) => {\n\n            let block_el = e.currentTarget;\n            e.preventDefault();\n\n            let pmodal = document.querySelector(\".p-modal\");\n            let pmodalCont = new bootstrap.Modal(pmodal);\n            \n            pmodalCont.show();\n\n            pmodal.querySelector(\".modal-title\").innerHTML = __html('Add Variation');\n            pmodal.querySelector(\".btn-primary\").innerHTML = __html('Add');\n            pmodal.querySelector(\".btn-secondary\").innerHTML = __html('Cancel');\n\n            let modalHTML = `\n            <div class=\"form-cont\">\n                <div class=\"form-group\">\n                    <label for=\"mtitle\" class=\"form-label\">${ __html('Title') }</label>\n                    <input type=\"text\" class=\"form-control\" id=\"mtitle\" autocomplete=\"off\" placeholder=\"${ __html('Brown rice') }\">\n                </div>\n                <div class=\"form-group mt-3\">\n                    <label for=\"mprice\" class=\"form-label\">${ __html('Price') }</label>\n                    <div class=\"input-group mb-3\">\n                        <span class=\"input-group-text\">$</span>\n                        <input id=\"mprice\" type=\"text\" class=\"form-control\" placeholder=\"0.00\" value=\"\" >\n                        <p class=\"form-text\">${ __html('You can change default currency under Dashboard &gt; Settings.') }</p>\n                    </div>\n                </div>\n            </div>`;\n\n            pmodal.querySelector(\".modal-body\").innerHTML = modalHTML;\n\n            setTimeout( () => pmodal.querySelector(\"#mtitle\").focus(),100 );\n\n            this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n\n                // validate\n                let mtitle = pmodal.querySelector(\".p-modal #mtitle\").value;\n                let mprice = pmodal.querySelector(\".p-modal #mprice\").value;\n                if(mtitle.length<2){ alert(\"Please provide longer title\"); return; }\n\n                let data = []; data['title'] = mtitle; data['price'] = mprice; data['type'] = block_el.parentElement.parentElement.dataset.type;\n                let sel = \".var-block[data-index='\"+block_el.parentElement.parentElement.dataset.index+\"']\";\n                console.log(sel);\n                \n                if(document.querySelector(sel + \" .offer-pricef li\") == null){\n                    document.querySelector(sel + \" .offer-pricef\").innerHTML = this.structMixRow(data);\n                }else{\n                    document.querySelector(sel + \" .offer-pricef li:last-of-type\").insertAdjacentHTML('afterend', this.structMixRow(data));\n                }\n\n                pmodalCont.hide();\n\n                setTimeout(() => this.initListeners('partial'), 10);\n            };\n        },\n\n        removeOption: (e) => {\n\n            e.preventDefault();\n            \n            if( confirm('Remove option?') ) e.currentTarget.parentElement.remove();\n        },\n\n        removeDiscount: (e) => {\n\n            e.preventDefault();\n            \n            if( confirm('Remove discount?') ){\n                 \n                e.currentTarget.parentElement.remove();\n\n                let discounts = JSON.parse(decodeURIComponent(document.querySelector('.discount-blocks').dataset.data));\n\n                discounts.splice(e.currentTarget.dataset.index, 1);\n\n                document.querySelector(\".discount-blocks\").dataset.data = encodeURIComponent(JSON.stringify(discounts));\n            }\n        },\n\n        addDiscountBlock: (e) => {\n\n            e.preventDefault();\n\n            let action = e.currentTarget.dataset.action; // $(this).attr('data-action');\n            let index = e.currentTarget.dataset.index; // $(this).attr('data-index');\n            e.currentTarget.dataset.action = 'add'; // $(this).attr('data-action', 'add');\n\n            // init defaults\n            let modal_title = __html('Add discount');\n            let title = \"\";\n            let type = \"\";\n            let availability = \"\";\n            let required = 0;\n            let modal_btn = __html('Add'), modal_cancel_btn = __html('Cancel');\n\n            // override defaults in editing mode\n            if(action == 'edit'){\n\n                modal_title = __html('Edit Variation Block');\n\n                title = document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.title;\n                type  = document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.type;\n                required = parseInt(document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.required);\n\n                modal_btn = __html('Save');\n                // console.log(variations);\n            }\n\n            let pmodal = document.querySelector(\".p-modal\");\n            let pmodalCont = new bootstrap.Modal(pmodal);\n            \n            pmodal.querySelector(\".modal-title\").innerHTML = modal_title;\n            pmodal.querySelector(\".btn-primary\").innerHTML = modal_btn;\n            pmodal.querySelector(\".btn-secondary\").innerHTML = modal_cancel_btn;\n\n            pmodalCont.show();\n\n            let modalHTml = `\n            <div class=\"form-cont\">\n                <div class=\"form-group mb-3\">\n                    <div class=\"row\">\n                        <div class=\"col-lg-6\">\n                            <label for=\"discount-type\" class=\"form-label\">${ __html('Type') }</label>\n                            <select id=\"discount-type\" class=\"form-control\" >\n                                <option ${ type=='percent'?'selected=\"selected\"':'' } value=\"percent\">${ __html('By percent') }</option>\n                                <option ${ type=='value'?'selected=\"selected\"':'' } value=\"value\">${ __html('By value') }</option>\n                                <option ${ type=='never'?'selected=\"selected\"':'' } value=\"never\">${ __html('never discount') }</option>\n                            </select>\n                        </div>\n                        <div id=\"discount-percent-cont\" class=\"col-lg-6\">\n                            <label for=\"discount-percent\" class=\"form-label\">${ __html('Percent %') }</label>\n                            <input type=\"text\" class=\"form-control\" id=\"discount-percent\" autocomplete=\"off\" placeholder=\"${ __html('5') }\">\n                        </div>\n                        <div id=\"discount-value-cont\" class=\"col-lg-6 d-none\">\n                            <label for=\"discount-value\" class=\"form-label\">${ __html('Value') }</label>\n                            <input type=\"text\" class=\"form-control\" id=\"discount-value\" autocomplete=\"off\" placeholder=\"${ __html('12.00') }\">\n                        </div>\n                    </div>\n                    <p class=\"form-text discount-hint-cont\">${ __html('Define how big is the discount (numeric value only).') }</p>\n                    <p class=\"form-text discount-never-cont d-none\">${ __html('Never apply general discount for this product') }</p>\n                </div>\n                <div class=\"discount-availability-cont form-group mb-3\">\n                    <label for=\"discount-availability\" class=\"form-label\">${ __html('Availability') }</label>\n                    <select id=\"discount-availability\" class=\"form-control \" >\n                        <option ${ availability=='admin'?'selected=\"selected\"':'' } value=\"admin\">${ __html('Admin') }</option>\n                        <option ${ availability=='always'?'selected=\"selected\"':'' } value=\"always\">${ __html('Always') }</option>\n                        <option ${ availability=='hourly'?'selected=\"selected\"':'' } value=\"hourly\">${ __html('Hourly') }</option>\n                        <option ${ availability=='weekly'?'selected=\"selected\"':'' } value=\"weekly\">${ __html('Weekly') }</option>\n                        <option class=\"d-none\" ${ availability=='monthly'?'selected=\"selected\"':'' } value=\"monthly\">${ __html('Monthly') }</option>\n                    </select>\n                    <p class=\"form-text\">${ __html('Restrict discount availability.') }</p>\n                </div>\n                <div id=\"discount-weekly\" class=\"discount-weekly-cont form-group mb-3 d-none\">\n                    <label for=\"mtype\" class=\"form-label\">${ __html('Days of week') }</label>\n                    <div class=\"form-check\">\n                        <label for=\"week-monday\" class=\"form-check-label form-label\">\n                            <input id=\"week-monday\" type=\"checkbox\" class=\"form-check-input \" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Monday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label for=\"week-tuesday\" class=\"form-check-label form-label\">\n                            <input id=\"week-tuesday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Tuesday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-wednesday\" class=\"form-check-label form-label\">\n                            <input id=\"week-wednesday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Wednesday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-thursday\" class=\"form-check-label form-label\">\n                            <input id=\"week-thursday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Thursday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-friday\" class=\"form-check-label form-label\">\n                            <input id=\"week-friday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Friday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-saturday\" class=\"form-check-label form-label\">\n                            <input id=\"week-saturday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Saturday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-sunday\" class=\"form-check-label form-label\">\n                            <input id=\"week-sunday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Sunday') }\n                        </label>\n                    </div>\n                    <p class=\"form-text\">${ __html('Days of the week when discount is available.') }</p>\n                </div>\n                <div id=\"discount-hourly\" class=\"form-group discount-hourly-cont mb-3 d-none\">\n                    <div class=\"row\">\n                        <div class=\"col-lg-6\">\n                            <div class=\"form-group mb-3 mt-1\">\n                                <label for=\"discount-hour-from\" class=\"form-label\">${ __html('From') }</label>\n                                <input id=\"discount-hour-from\" type=\"text\" class=\"form-control\" maxlength=\"5\" autocomplete=\"off\" placeholder=\"${ __html('12:00') }\">\n                            </div>\n                        </div>\n                        <div class=\"col-lg-6\">\n                            <div class=\"form-group mb-3 mt-1\">\n                                <label for=\"discount-hour-to\" class=\"form-label\">${ __html('To') }</label>\n                                <input id=\"discount-hour-to\" type=\"text\" class=\"form-control\" maxlength=\"5\" autocomplete=\"off\" placeholder=\"${ __html('17:00') }\">\n                            </div>\n                        </div>\n                    </div>\n                    <p class=\"form-text\">${ __html('Time range when discount is available.') }</p>\n                </div>\n                <div class=\"form-group discount-note-cont mb-3\">\n                    <div class=\"form-group mb-3 mt-1\">\n                        <label for=\"discount-note\" class=\"form-label\">${ __html('Note') }</label>\n                        <input id=\"discount-note\" type=\"text\" class=\"form-control\" maxlength=\"25\" autocomplete=\"off\" placeholder=\"${ __html('') }\">\n                        <p class=\"form-text\">${ __html('Example: •happy hour promo.') }</p>\n                    </div>\n                </div> \n            </div>`;\n\n            pmodal.querySelector(\".modal-body\").innerHTML = modalHTml;\n\n            setTimeout( () => pmodal.querySelector(\"#discount-type\").focus(), 100 );\n\n            // discount modal listeners\n            onChange('#discount-availability', (e) => {\n                \n                // discount-availability\n                console.log(e.currentTarget.value);\n\n                switch(e.currentTarget.value){\n\n                    case 'admin':\n                        document.querySelector('#discount-weekly').classList.add('d-none');\n                        document.querySelector('#discount-hourly').classList.add('d-none');\n                    break;\n                    case 'always':\n                        document.querySelector('#discount-weekly').classList.add('d-none');\n                        document.querySelector('#discount-hourly').classList.add('d-none');\n                    break;\n                    case 'hourly':\n                        document.querySelector('#discount-weekly').classList.add('d-none');\n                        document.querySelector('#discount-hourly').classList.remove('d-none');\n                    break;\n                    case 'weekly':\n                        document.querySelector('#discount-weekly').classList.remove('d-none');\n                        document.querySelector('#discount-hourly').classList.remove('d-none');\n                    break;\n                };\n            });\n\n            // percent number only\n            onlyNumbers('#discount-percent', [8]);\n\n            // value number only\n            onlyNumbers('#discount-value', [8, 46]);\n\n            // time from number only\n            onlyNumbers('#discount-hour-from', [8, 58]);\n            \n            // time to number only\n            onlyNumbers('#discount-hour-to', [8, 58]);\n\n            // discount type\n            onChange('#discount-type', (e) => {\n                \n                // discount-availability\n                console.log(e.currentTarget.value);\n\n                document.querySelector('.discount-never-cont').classList.add('d-none');\n                document.querySelector('.discount-hint-cont').classList.remove('d-none');\n                document.querySelector('.discount-availability-cont').classList.remove('d-none');\n                document.querySelector('.discount-hint-cont').classList.remove('d-none');\n\n                switch(e.currentTarget.value){\n\n                    case 'percent':\n                        document.querySelector('#discount-percent-cont').classList.remove('d-none');\n                        document.querySelector('#discount-value-cont').classList.add('d-none');\n                    break;\n                    case 'value':\n                        document.querySelector('#discount-percent-cont').classList.add('d-none');\n                        document.querySelector('#discount-value-cont').classList.remove('d-none');\n                    break;\n                    case 'never':\n                        document.querySelector('#discount-percent-cont').classList.add('d-none');\n                        document.querySelector('#discount-value-cont').classList.add('d-none');\n                        document.querySelector('.discount-never-cont').classList.remove('d-none');\n                        document.querySelector('.discount-availability-cont').classList.add('d-none');\n                        document.querySelector('.discount-hint-cont').classList.add('d-none');\n                    break;\n                };\n            });\n\n            this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n\n                let obj = {}, allow = true;\n\n                document.querySelector(\".form-cont\").classList.add(\"was-validated\"); \n                document.querySelector(\"#discount-percent\").setCustomValidity(\"\");\n                document.querySelector(\"#discount-hour-from\").setCustomValidity(\"\");\n                document.querySelector(\"#discount-hour-to\").setCustomValidity(\"\");\n\n                // get discount list\n                let discounts = document.querySelector(\".discount-blocks\").dataset.data;\n                if(!discounts){ \n\n                    discounts = [];\n                }else{\n\n                    discounts = JSON.parse(decodeURIComponent(discounts))\n                }\n\n                // discount note\n                obj.note = document.querySelector(\"#discount-note\").value;\n\n                // discount type\n                obj.type = document.querySelector(\"#discount-type\").value;\n\n                if(obj.type == 'percent'){\n\n                    // get value\n                    obj.percent = document.querySelector(\"#discount-percent\").value;\n                    \n                    // validate\n                    if(obj.percent==\"\"){\n\n                        document.querySelector(\"#discount-percent\").setCustomValidity(\"Percent field can not be empty.\");\n                        allow = false;\n                        // alert('Percent field can not be empty.'); \n                        // return false; \n                    }\n\n                }else if(obj.type == 'value'){\n\n                    // get value\n                    obj.value = document.querySelector(\"#discount-value\").value;\n\n                    // validate\n                    if(obj.value==\"\"){\n\n                        document.querySelector(\"#discount-value\").setCustomValidity(\"Value field can not be empty.\");\n                        allow = false;\n                        // alert('Value field can not be empty.'); \n                        // return false; \n                    }\n                }else if(obj.type == 'value'){\n\n                    // get value\n                    obj.value = \"-\";\n                }\n\n                // discount availability\n                obj.availability = document.querySelector(\"#discount-availability\").value;\n\n                if(obj.availability == 'always') {\n\n                }else if(obj.availability == 'admin') {\n\n                }else if(obj.availability == 'hourly') {\n                    \n                    // iterate available hours\n                    obj.hours = { from: document.querySelector(\"#discount-hour-from\").value, to: document.querySelector(\"#discount-hour-to\").value };\n\n                    // validate\n                    if(obj.hours.from.length<2) {\n\n                        document.querySelector(\"#discount-hour-from\").setCustomValidity(\"Wrong time format\");\n                        allow = false;\n                    }\n\n                    // validate\n                    if(obj.hours.to.length<2) {\n\n                        document.querySelector(\"#discount-hour-to\").setCustomValidity(\"Wrong time format\");\n                        allow = false;\n                    }\n                   \n                }else if(obj.availability == 'weekly') {\n\n                    // iterate available hours\n                    obj.hours = { from: document.querySelector(\"#discount-hour-from\").value, to: document.querySelector(\"#discount-hour-to\").value };\n                    \n                    // validate\n                    if(obj.hours.from.length<2) {\n\n                        document.querySelector(\"#discount-hour-from\").setCustomValidity(\"Wrong time format\");\n                        allow = false;\n                    }\n\n                    // validate\n                    if(obj.hours.to.length<2) {\n\n                        document.querySelector(\"#discount-hour-to\").setCustomValidity(\"Wrong time format\");\n                        allow = false;\n                    }\n\n                    // iterate available weeks\n                    obj.dow = [];\n                    for(let el of document.querySelectorAll('#discount-weekly input')) {\n                        obj.dow.push(el.checked)\n                    }\n                }\n\n                if(!allow){ alert('Please enter all fields correctly.'); return; }\n                \n                discounts.push(obj);\n\n                document.querySelector(\".discount-blocks\").dataset.data = encodeURIComponent(JSON.stringify(discounts));\n\n                this.renderDiscounts();\n\n                pmodalCont.hide();\n\n                setTimeout(() => this.initListeners('partial'), 10);\n            }\n        },\n\n        saveProduct: (e) => {\n            \n            e.preventDefault();\n\n            let data = {};\n\n            // iterate through input fields\n            for( let inp of document.querySelectorAll('.inp') ){\n\n                data[inp.id.replace(\"p-\",\"\")] = inp.value.trim();\n            }\n\n            // map categories\n            data[\"cats\"] = [];\n            for( let cat of document.querySelectorAll('#p-cats ul li') ){\n\n                data[\"cats\"].push(cat.innerHTML.replace('<a>×</a>','').trim());\n            }\n             \n            // link uploaded images\n            data[\"img\"] = [];\n            for( let img of document.querySelectorAll('.p-img') ){\n\n                let tf = !img.getAttribute('src').includes(\"placeholder\") ? true : false;\n                data[\"img\"].push(tf);\n            }\n\n            // discount list\n            data[\"discounts\"] = JSON.parse(decodeURIComponent(document.querySelector('.discount-blocks').dataset.data));\n\n            // inventory\n            data[\"stock\"] = { inventory: this.state.response.product.stock.inventory };\n            data['stock']['sku'] = document.querySelector('#stock_sku').value;\n            data['stock']['management'] = document.querySelector('#stock_management').checked;\n            data['stock']['qty'] = document.querySelector('#stock_quantity').value; \n            data['stock']['low_threshold'] = document.querySelector('#stock_low_threshold').value;\n            \n            // status\n            data[\"status\"] = document.querySelector('input[name=\"p-status\"]:checked').value;\n   \n            // map mix and match\n            data[\"variations\"] = [];\n            let block_index = 0;\n            for( let block of document.querySelectorAll('.variation-blocks .var-block') ){\n\n                let option_index = 0;\n                for( let option of block.querySelectorAll('.offer-pricef li') ){\n\n                    if(typeof(data[\"variations\"][block_index]) === 'undefined')\n                    data[\"variations\"][block_index] = \n                    { \n                        'title': block.getAttribute('data-title'),\n                        'type': block.getAttribute('data-type'),\n                        'required': block.getAttribute('data-required'),\n                        'data': []\n                    };\n                    \n                    data[\"variations\"][block_index]['data'][option_index] = \n                    {\n                        'title': option.getAttribute('data-title'),\n                        'price': option.getAttribute('data-price'),\n                        'cond': option.getAttribute('data-cond')\n                    };\n                    option_index++;\n                }\n                block_index++;\n            }\n\n            // inventory table\n            // [...document.querySelectorAll('.inventory-history tr td')].forEach(row => {\n\n            //     row.\n            // });\n            // console.log(data);\n        \n            let id = getProductId();\n            let sid = spaceID();\n\n            showLoader();\n\n            // send data\n            fetch('https://api-v1.kenzap.cloud/', {\n                method: 'post',\n                headers: H(),\n                body: JSON.stringify({\n                    query: {\n                        product: {\n                            type:       'update',\n                            key:        'ecommerce-product',\n                            id:         id,         \n                            sid:        sid,\n                            data:       data\n                        }\n                    }\n                }) \n            })\n            .then(response => response.json())\n            .then(response => {\n\n                if (response.success){\n\n                    // upload desc images\n                    this.uploadImages();\n                    \n                }else{\n\n                    parseApiError(response);\n                }\n            })\n            .catch(error => { parseApiError(error); });\n        },\n\n        openImage: (e) => {\n\n            e.preventDefault();\n            simulateClick(document.querySelector(\".aif-\"+e.currentTarget.dataset.index));\n        },\n\n        previewImage: (e) => {\n\n            e.preventDefault();\n\n            let input = e.currentTarget;\n\n            if (input.files && input.files[0]) {\n\n                // check image type\n                if(input.files[0].type != 'image/jpeg' && input.files[0].type != 'image/jpg' && input.files[0].type != 'image/png'){\n\n                    toast( __html(\"Please provide image in JPEG format\") );\n                    return;\n                }\n          \n                // check image size\n                if(input.files[0].size > 5000000){\n\n                    toast( __html(\"Please provide image less than 5 MB in size!\") );\n                    return;\n                }\n\n                let index = input.dataset.index;\n                let reader = new FileReader();\n                reader.onload = function(e) {\n                  \n                    document.querySelector('.images-'+index).setAttribute('src', e.currentTarget.result);\n                }\n                reader.readAsDataURL(input.files[0]);\n\n                e.currentTarget.parentElement.querySelector('.remove').classList.remove(\"hd\");\n            }\n        },\n\n        removeImage: (e) => {\n\n            let index = e.currentTarget.parentElement.dataset.index;\n            document.querySelector('.aif-' + index).value = '';\n            document.querySelector('.images-'+index).setAttribute('src', 'https://account.kenzap.com/images/placeholder.jpg');\n            e.currentTarget.classList.add(\"hd\");\n\n            // $(this).addClass(\"hd\");\n            // $(\".aif-\"+$(this).parent().data(\"index\")).val('');\n            // $(\".images-\"+$(this).parent().data(\"index\")).attr('src','https://account.kenzap.com/images/placeholder.jpg');\n            // $(this).addClass(\"hd\");\n        },\n\n        modalSuccessBtn: (e) => {\n            \n            this.listeners.modalSuccessBtnFunc(e);\n        },\n\n        stockManagement: (e) => {\n\n            for(let el of document.querySelectorAll('.stock-cont')){\n                e.currentTarget.checked ? el.classList.remove('d-none') : el.classList.add('d-none');\n                e.currentTarget.value = e.currentTarget.checked ? \"1\" : \"0\";\n            }\n\n        },\n\n        modalSuccessBtnFunc: null\n    }\n\n    structMixBlock = (data) => {\n\n        let html = `\n        <div class=\"mb-4 var-block mw\" data-title=\"${ data.title }\" data-type=\"${ data.type }\" data-required=\"${ data.required }\" data-index=\"${ data.index }\" >\n            <label for=\"offer-pricef\" class=\"form-label pb-2\"><span class=\"title\">${ data.title }</span>\n                &nbsp;&nbsp;\n                <svg class=\"bi bi-pencil-fill edit-block ms-3\" title=\"edit block\" data-index=\"${ data.index }\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n                    <path d=\"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z\"/>\n                </svg>\n                <svg class=\"bi bi-trash remove-block ms-3\" title=\"edit block\" data-index=\"${ data.index }\"  xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#ff0079\" viewBox=\"0 0 16 16\">\n                    <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"></path>\\\n                    <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"></path>\n                </svg>\n            </label>\n            <div class=\"list-wrapper\">\n                <ul class=\"d-flex flex-column-reverse offer-pricef\" >\n                \n                </ul>\n            </div>\n            <p class=\"form-text\"><a class=\"add-mix\" href=\"#\">${ __html('+ add option') }</a> ${ __html('to differentiate price offering.') }</p>\n            <div class=\"add-mix-ctn d-none\"><a class=\"add-mix\" href=\"#\">${ __html('+ add option') }</a></div>\n        </div>`;\n    \n        return html;\n    }\n\n    structMixRow = (data) => {\n\n        return `\n        <li data-title=\"${ data.title }\" data-price=\"${ data.price }\" data-cond=\"\" class=\"pt-2 pb-2\"><div class=\"form-check\"><label class=\"form-check-label form-label\"><input class=\"${ data.type } form-check-input\" type=\"${ data.type }\" checked=\"\" data-ft=\"${ data.title }\">${ data.title } &nbsp;&nbsp;&nbsp; ${ priceFormat(this, data.price) }</label></div>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#ff0079\" class=\"remove-option bi bi-x-circle\" viewBox=\"0 0 16 16\">\\\n                <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\n                <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\n            </svg>\n        </li>`;\n    }\n\n    loadImages = (product) => {\n\n        let d = document;\n        let lang = 'en';\n        let offer_id = '0';\n        let id = getProductId();\n        let sid = spaceID();\n        let t = '';\n        for(let i=0;i<5;i++){\n     \n          let img = (product.img !== undefined && product.img[i] == 'true') ? 'https://preview.kenzap.cloud/S'+spaceID()+'/_site/images/product-'+product.id+'-'+(i+1)+'-100x100.jpeg?'+product.updated:'https://account.kenzap.com/images/placeholder.jpg';\n          t+=`\\\n          <div class=\"p-img-cont float-start\">\\\n            <p data-index=\"${i}\">\\\n              <img class=\"p-img images-${i}\" data-index=\"${i}\" width=\"100\" height=\"100\" src=\"${img}\" />\\\n              <span class=\"remove hd\" title=\"${ __html('Remove') }\">×</span>\\\n            </p>\\\n            <input type=\"file\" name=\"img[]\" data-type=\"search\" data-index=\"${i}\" class=\"file aif-${i} d-none\">\\\n          </div>`;\n        }\n        \n        d.querySelector(\".ic\").innerHTML = t;\n    \n        // new image listener\n        onClick('.p-img-cont img', this.listeners.openImage);\n\n        // new remove listener\n        onClick('.p-img-cont .remove', this.listeners.removeImage);\n\n        // image preview listener\n        onChange('.p-img-cont .file', this.listeners.previewImage);\n    \n        // iterate all images\n        for(let fi=0; fi<5; fi++){\n    \n            // async load image to verify if it exists on CDN \n            let image_url = CDN+'/S'+sid+'/product-'+id+'-'+(parseInt(fi)+1)+'-250.jpeg?'+product.updated;\n            setTimeout(function(img, sel, _fi){\n        \n                let allow = true;\n                if(typeof(product.img)!==\"undefined\"){ if(!product.img[_fi]) allow = false; }\n                if(allow){\n\n                    let i = new Image();\n                    i.onload = function(){\n                        d.querySelector(sel+_fi).setAttribute('src', img);\n                        d.querySelector(sel+_fi).parentElement.querySelector('.remove').classList.remove('hd');\n                    };\n                    i.src=img;\n                }\n            }, 300, image_url, \".images-\", fi );\n        }\n    }\n\n    // general method for image upload\n    uploadImages = () => {\n\n        if( document.querySelector(\".imgupnote\") ) document.querySelector(\".imgupnote\").remove();\n\n        let fi = 0;\n        for( let fileEl of document.querySelectorAll(\".file\") ){\n\n            fi += 1;\n\n            let id = getProductId();\n            let sid = spaceID();\n\n            let file = fileEl.files[0];\n            if(typeof(file) === \"undefined\") continue;\n\n            // TODO add global sizes setting \n            let fd = new FormData();\n            // let sizes = document.querySelector(\"body\").dataset.sizes;\n            let sizes = '1000|500|250|100x100';\n\n            fd.append('id', id);\n            fd.append('sid', sid);\n            fd.append('pid', id);\n            fd.append('key', 'image');\n            fd.append('sizes', sizes);\n            // fd.append('field', file);\n            fd.append('file', file);\n            fd.append('slug', 'product-'+id+'-'+fi);\n            fd.append('token', getCookie('kenzap_token'));\n\n            // clear input file so that its not updated again\n            file.value = '';\n\n            this.state.ajaxQueue+=1;\n\n            fetch(\"https://api-v1.kenzap.cloud/upload/\",{\n                body: fd,\n                method: \"post\"\n            })\n            .then(response => response.json())\n            .then(response => {\n\n                this.state.ajaxQueue -= 1;\n                if(response.success && this.state.ajaxQueue == 0){\n\n                    toast( __html(\"Product updated\") );\n\n                    // hide UI loader\n                    hideLoader();\n                }\n            });\n        }\n        \n        // image upload notice\n        if(this.state.ajaxQueue == 0){\n\n            toast( __html(\"Product updated\") );\n\n            hideLoader();\n        }\n    }\n\n    // render discounts\n    renderDiscounts = () => {\n\n        let discounts = document.querySelector('.discount-blocks').dataset.data;\n        let dow = [__html('Monday'), __html('Tuesday'), __html('Wednesday'), __html('Thursday'), __html('Friday'), __html('Saturday'), __html('Sunday')];\n        \n        discounts = JSON.parse(decodeURIComponent(discounts));\n\n        let html = '';\n        discounts.forEach((el, index) => {\n\n            let dv = el.type == 'value' ? priceFormat(this, el.value) : el.percent + '% (' + priceFormat(this, (makeNumber(document.querySelector(\"#p-price\").value) * ((100-el.percent)/100))) + ')';\n\n            let time = '';\n            switch(el.availability){\n\n                case 'admin': time = __html('Admin') + ' ' + dv; break;\n                case 'always': time = __html('Always') + ' ' + dv; break;\n                case 'hourly': time = el.hours.from + '-' + el.hours.to + ' ' + dv; break;\n                case 'weekly': el.dow.forEach((day, index) => { time += day == true ? dow[index] + ' ' : ''; }); time += '<b>' + el.hours.from + '-' + el.hours.to + '</b> ' + dv; break;\n            }\n\n            if(el.type==\"never\") time = __html('Avoid discount calculation for this product.');\n\n            html +=`\n            <li class=\"form-text mb-2\" >\n                ${ time }\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#ff0079\" class=\"remove-discount bi bi-x-circle\" data-index=${ index } viewBox=\"0 0 16 16\"><path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"></path><path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"></path></svg>\n            </li>`;\n\n        });\n\n        if(html == ''){\n            document.querySelector('.discount-list').classList.add('d-none');\n        }else{\n            document.querySelector('.discount-list').classList.remove('d-none');\n        }\n\n        document.querySelector('.discount-blocks ul').innerHTML = html; \n\n        // remove discount listener\n        onClick('.remove-discount', this.listeners.removeDiscount);\n    }\n}\n\nnew ProductEdit();"],"names":["getProductId","urlParams","URLSearchParams","window","location","search","id","get","getPageNumber","page","parseInt","priceFormat","_this","price","makeNumber","Math","round","parseFloat","toFixed","state","settings","currency_symb_loc","currency_symb","onlyNumbers","sel","chars","document","querySelector","push","querySelectorAll","forEach","el","addEventListener","e","key","toLowerCase","console","log","length","isNumber","which","includes","preventDefault","loadAddon","dep","version","cb","url","URL","getCookie","pathname","getElementById","call","t","split","slice","js","createElement","setAttribute","onload","onreadystatechange","readyState","body","appendChild","head","getElementsByTagName","css","rel","type","href","initFooter","left","__html","right","innerHTML","simpleTags","__","element","Error","DOMParent","DOMList","DOMInput","dataAttribute","arrayOfList","DOMCreate","ul","input","firstElementChild","lastElementChild","DOMRender","currentValue","index","trim","li","onDelete","onKeyUp","event","text","value","keyCode","replace","filter","getAttribute","map","toString","HTMLContent","__attr","inventoryTable","response","product","stock","inventory","remove","row","i","title","amount","stock_unit","attr","join","currentTarget","dataset","action","confirm","removeInventoryRow","assigned","modal","modalCont","bootstrap","Modal","classList","add","addToInventory","obj","sid","spaceID","fetch","method","headers","H","JSON","stringify","query","data","then","json","success","hide","parseApiError","error","loadInventory","limit","s","fields","offset","field","sortby","order","_id","item","alert","isNaN","show","toast","loadInventoryPrice","ids","inventory_price","price_total","inv","price_per_unit","ProductEdit","showLoader","user","token","locale","source","hideLoader","initHeader","initListeners","render","loadImages","addons","product_edit","src","d","initBreadcrumbs","link","sdesc","ldesc","encodeURIComponent","discounts","renderDiscounts","m","variations","vr","structMixBlock","n","vrd","structMixRow","management","sku","qty","low_threshold","checked","status","pcats","cats","onClick","listeners","saveProduct","modalSuccessBtn","addDiscountBlock","addMixBlock","editBlock","removeBlock","addMixOption","removeOption","stockManagement","amb","setTimeout","simulateClick","c","parentNode","modal_title","required","modal_btn","modal_cancel_btn","pmodal","pmodalCont","modalHTml","focus","modalSuccessBtnFunc","mtitle","mtype","mrequired","insertAdjacentHTML","block_el","modalHTML","mprice","parentElement","removeDiscount","parse","decodeURIComponent","splice","availability","onChange","allow","setCustomValidity","note","percent","hours","from","to","dow","inp","cat","img","tf","block_index","block","option_index","option","uploadImages","openImage","previewImage","files","size","reader","FileReader","result","readAsDataURL","removeImage","html","undefined","updated","fi","image_url","CDN","_fi","Image","fileEl","file","fd","FormData","sizes","append","ajaxQueue","dv","time","day","getData"],"mappings":"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"}