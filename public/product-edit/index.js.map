{"version":3,"file":"index.js","sources":["../../node_modules/@kenzap/k-cloud/index.js","../../src/_/_helpers.js","../../src/_/_ui.js","../../src/_/_cnt_product_edit.js","../../src/product-edit/index.js"],"sourcesContent":["/**\n * @name initHeader\n * @description Initiates Kenzap Cloud extension header and related scripts. Verifies user sessions, handles SSO, does cloud space navigation, initializes i18n localization. \n * @param {object} response\n */\nexport const initHeader = (response) => {\n\n    // cache header from backend\n    if(response.header) localStorage.setItem('header', response.header);\n  \n    // load header to html if not present\n    if(!document.querySelector(\"#k-script\")){\n  \n        let child = document.createElement('div');\n        child.innerHTML = localStorage.getItem('header');\n        child = child.firstChild;\n        document.body.prepend(child);\n  \n        // run header scripts\n        Function(document.querySelector(\"#k-script\").innerHTML).call('test');\n    }\n  \n    // load locales if present\n    if(response.locale) window.i18n.init(response.locale); \n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nexport const __init = (locale) => {\n\n    if(typeof locale !== 'object' || locale === null) return;\n\n    if(typeof window.i18n === 'undefined') window.i18n = {};\n\n    if(typeof window.i18n.state === 'undefined') window.i18n.state = { locale: {} };\n   \n    window.i18n.state.locale = locale;\n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nexport const __ = (text, ...p) => {\n\n    let match = (input, pa) => {\n\n        pa.forEach((p, i) => { input = input.replace('%'+(i+1)+'$', p); }); \n        \n        return input;\n    }\n\n    if(typeof window.i18n === 'undefined') return match(text, p);\n    if(window.i18n.state.locale.values[text] === undefined) return match(text, p);\n\n    return match(window.i18n.state.locale.values[text], p);\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const attr = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&#39;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities and does translation\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __attr = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    text = __(text, ...p);\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&#39;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/*\n * Removes special characters `<`, `>`, `\"`, `'` from the link.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const src = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&#39;',\n            '\"': '&quot;'\n        } [tag]));\n    \n}\n\n/*\n * Converts special characters `<`, `>`, `\"`, `'` from the link and does translation\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __src = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    text = __(text, ...p);\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&#39;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const html = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&#39;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities and does translations\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __html = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    text = __(text, ...p);\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&#39;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/**\n * @name showLoader\n * @description Initiates full screen three dots loader.\n */\nexport const showLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'block';\n}\n\n/**\n * @name hideLoader\n * @description Removes full screen three dots loader.\n */\nexport const hideLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'none';\n}\n\n/**\n * @name initFooter\n * @description Removes full screen three dots loader.\n * @param {string} left - Text or html code to be present on the left bottom side of screen\n * @param {string} right - Text or html code to be present on the left bottom side of screen\n */\nexport const initFooter = (left, right) => {\n\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n/**\n * @name link\n * @description Handles Cloud navigation links between extensions and its pages. Takes care of custom url parameters.\n * @param {string} slug - Any inbound link\n * \n * @returns {string} link - Returns original link with kenzp cloud space ID identifier.\n */\nexport const link = (slug) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let sid = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    let postfix = slug.indexOf('?') == -1 ? '?sid='+sid : '&sid='+sid;\n\n    return slug + postfix;\n}\n\n/**\n * @name getSiteId\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\nexport const getSiteId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name spaceID\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\n export const spaceID = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name setCookie\n * @description Set cookie by its name to all .kenzap.cloud subdomains\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {string} days - Number of days when cookie expires.\n */\n export const setCookie = (name, value, days) => {\n\n    let expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \";expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (escape(value) || \"\") + expires + \";path=/;domain=.kenzap.cloud\"; \n}\n\n/**\n * @name getCookie\n * @description Read cookie by its name.\n * @param {string} cname - Cookie name.\n * \n * @returns {string} value - Cookie value.\n */\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n/**\n * @name checkHeader\n * @description This function tracks UI updates, creates header version checksum and compares it after every page reload\n * @param {object} object - API response.\n */\n export const checkHeader = () => {\n\n    let version = (localStorage.hasOwnProperty('header') && localStorage.hasOwnProperty('header-version')) ? localStorage.getItem('header-version') : 0;\n    let check = window.location.hostname + '/' + spaceID() + '/' + getCookie('locale');\n    if(check != getCookie('check')){ version = 0; console.log('refresh'); }\n    \n    setCookie('check', check, 5);\n\n    return version\n}\n\n/**\n * @name headers\n * @description Default headers object for all Kenzap Cloud fetch queries. \n * @param {object} headers\n */\n export const headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n    'Kenzap-Locale': getCookie('locale') ? getCookie('locale') : \"en\",\n    'Kenzap-Header': checkHeader(),\n    'Kenzap-Token': getCookie('kenzap_token'),\n    'Kenzap-Sid': spaceID(),\n}\n\n/**\n * @name parseApiError\n * @description Set default logics for different API Error responses.\n * @param {object} object - API response.\n */\n export const parseApiError = (data) => {\n\n    // outout to frontend console\n    console.log(data);\n\n    // unstructured failure\n    if(isNaN(data.code)){\n    \n        // structure failure data\n        let log = data;\n        try{ log = JSON.stringify(log); }catch(e){ }\n\n        let params = new URLSearchParams();\n        params.append(\"cmd\", \"report\");\n        params.append(\"sid\", spaceID());\n        params.append(\"token\", getCookie('kenzap_token'));\n        params.append(\"data\", log);\n        \n        // report error\n        fetch('https://api-v1.kenzap.cloud/error/', { method: 'post', headers: { 'Accept': 'application/json', 'Content-type': 'application/x-www-form-urlencoded', }, body: params });\n\n        alert('Can not connect to Kenzap Cloud');  \n        return;\n    }\n    \n    // handle cloud error codes\n    switch(data.code){\n\n        // unauthorized\n        case 401:\n\n            // dev mode\n            if(window.location.href.indexOf('localhost')!=-1){ \n\n                alert(data.reason); \n                return; \n            }\n\n            // production mode\n            location.href=\"https://auth.kenzap.com/?app=65432108792785&redirect=\"+window.location.href; break;\n        \n        // something else\n        default:\n\n            alert(data.reason); \n            break;\n    }\n}\n\n/**\n * @name initBreadcrumbs\n * @description Render ui breadcrumbs.\n * @param {array} data - List of link objects containing link text and url. If url is missing then renders breadcrumb as static text. Requires html holder with .bc class.\n */\nexport const initBreadcrumbs = (data) => {\n\n    let html = '<ol class=\"breadcrumb mt-2 mb-0\">';\n    for(let bc of data){\n        \n        if(typeof(bc.link) === 'undefined'){\n\n            html += `<li class=\"breadcrumb-item\">${ bc.text }</li>`;\n        }else{\n\n            html += `<li class=\"breadcrumb-item\"><a href=\"${ bc.link }\">${ bc.text }</a></li>`;\n        }\n    }\n    html += '</ol>';\n    \n    document.querySelector(\".bc\").innerHTML = html;\n}\n\n/**\n * @name onClick\n * @description One row click event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onClick = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n/**\n * @name onKeyUp\n * @description One row key up event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onKeyUp = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('keyup', fn, true);\n        e.addEventListener('keyup', fn, true);\n    }\n}\n\n/**\n * @name onChange\n * @description One row change event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onChange = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('change', fn, true);\n        e.addEventListener('change', fn, true);\n    }\n}\n\n/**\n * @name loadScript\n * @description Asynchronous script loader function.\n * @param {string} url - HTML selector, id, class, etc.\n * @param {string} cb - callback function fired immediately after script is loaded.\n */\n export const loadScript = (url, cb) => {\n\n    if (!Array.from(document.querySelectorAll('script')).some(elm => elm.src == url)) {\n      let script = document.createElement('script')\n      script.onload = cb\n      script.src = url\n      document.getElementsByTagName('head')[0].appendChild(script)\n    }\n}\n\n/**\n * @name simulateClick\n * @description Trigger on click event without user interaction.\n * @param {string} elem - HTML selector, id, class, etc.\n */\n export const simulateClick = (elem) => {\n\n\t// create our event (with options)\n\tlet evt = new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tview: window\n\t});\n\n\t// if cancelled, don't dispatch the event\n\t!elem.dispatchEvent(evt);\n};\n\n/**\n * Create a web friendly URL slug from a string.\n *\n * Requires XRegExp (http://xregexp.com) with unicode add-ons for UTF-8 support.\n *\n * Although supported, transliteration is discouraged because\n *     1) most web browsers support UTF-8 characters in URLs\n *     2) transliteration causes a loss of information\n *\n * @author Sean Murphy <sean@iamseanmurphy.com>\n * @copyright Copyright 2012 Sean Murphy. All rights reserved.\n * @license http://creativecommons.org/publicdomain/zero/1.0/\n *\n * @param string s\n * @param object opt\n * @return string\n */\n export const slugify = (s, opt) => {\n\n\ts = String(s);\n\topt = Object(opt);\n\t\n\tvar defaults = {\n\t\t'delimiter': '-',\n\t\t'limit': undefined,\n\t\t'lowercase': true,\n\t\t'replacements': {},\n\t\t'transliterate': (typeof(XRegExp) === 'undefined') ? true : false\n\t};\n\t\n\t// Merge options\n\tfor (var k in defaults) {\n\t\tif (!opt.hasOwnProperty(k)) {\n\t\t\topt[k] = defaults[k];\n\t\t}\n\t}\n\t\n\tvar char_map = {\n\t\t// Latin\n\t\t'À': 'A', 'Á': 'A', 'Â': 'A', 'Ã': 'A', 'Ä': 'A', 'Å': 'A', 'Æ': 'AE', 'Ç': 'C', \n\t\t'È': 'E', 'É': 'E', 'Ê': 'E', 'Ë': 'E', 'Ì': 'I', 'Í': 'I', 'Î': 'I', 'Ï': 'I', \n\t\t'Ð': 'D', 'Ñ': 'N', 'Ò': 'O', 'Ó': 'O', 'Ô': 'O', 'Õ': 'O', 'Ö': 'O', 'Å': 'O', \n\t\t'Ø': 'O', 'Ù': 'U', 'Ú': 'U', 'Û': 'U', 'Ü': 'U', 'Å°': 'U', 'Ý': 'Y', 'Þ': 'TH', \n\t\t'ß': 'ss', \n\t\t'à': 'a', 'á': 'a', 'â': 'a', 'ã': 'a', 'ä': 'a', 'å': 'a', 'æ': 'ae', 'ç': 'c', \n\t\t'è': 'e', 'é': 'e', 'ê': 'e', 'ë': 'e', 'ì': 'i', 'í': 'i', 'î': 'i', 'ï': 'i', \n\t\t'ð': 'd', 'ñ': 'n', 'ò': 'o', 'ó': 'o', 'ô': 'o', 'õ': 'o', 'ö': 'o', 'Å': 'o', \n\t\t'ø': 'o', 'ù': 'u', 'ú': 'u', 'û': 'u', 'ü': 'u', 'Å±': 'u', 'ý': 'y', 'þ': 'th', \n\t\t'ÿ': 'y',\n\n\t\t// Latin symbols\n\t\t'©': '(c)',\n\n\t\t// Greek\n\t\t'Α': 'A', 'Β': 'B', 'Γ': 'G', 'Δ': 'D', 'Ε': 'E', 'Ζ': 'Z', 'Η': 'H', 'Θ': '8',\n\t\t'Ι': 'I', 'Κ': 'K', 'Λ': 'L', 'Μ': 'M', 'Ν': 'N', 'Ξ': '3', 'Ο': 'O', 'Π': 'P',\n\t\t'Ρ': 'R', 'Σ': 'S', 'Τ': 'T', 'Υ': 'Y', 'Φ': 'F', 'Χ': 'X', 'Ψ': 'PS', 'Ω': 'W',\n\t\t'Î': 'A', 'Î': 'E', 'Î': 'I', 'Î': 'O', 'Î': 'Y', 'Î': 'H', 'Î': 'W', 'Îª': 'I',\n\t\t'Î«': 'Y',\n\t\t'α': 'a', 'β': 'b', 'γ': 'g', 'δ': 'd', 'ε': 'e', 'ζ': 'z', 'η': 'h', 'θ': '8',\n\t\t'ι': 'i', 'κ': 'k', 'λ': 'l', 'μ': 'm', 'ν': 'n', 'ξ': '3', 'ο': 'o', 'π': 'p',\n\t\t'ρ': 'r', 'σ': 's', 'τ': 't', 'υ': 'y', 'φ': 'f', 'χ': 'x', 'ψ': 'ps', 'ω': 'w',\n\t\t'Î¬': 'a', 'Î­': 'e', 'Î¯': 'i', 'Ï': 'o', 'Ï': 'y', 'Î®': 'h', 'Ï': 'w', 'ς': 's',\n\t\t'Ï': 'i', 'Î°': 'y', 'Ï': 'y', 'Î': 'i',\n\n\t\t// Turkish\n\t\t'Å': 'S', 'Ä°': 'I', 'Ç': 'C', 'Ü': 'U', 'Ö': 'O', 'Ä': 'G',\n\t\t'Å': 's', 'Ä±': 'i', 'ç': 'c', 'ü': 'u', 'ö': 'o', 'Ä': 'g', \n\n\t\t// Russian\n\t\t'Ð': 'A', 'Ð': 'B', 'Ð': 'V', 'Ð': 'G', 'Ð': 'D', 'Ð': 'E', 'Ð': 'Yo', 'Ð': 'Zh',\n\t\t'Ð': 'Z', 'Ð': 'I', 'Ð': 'J', 'Ð': 'K', 'Ð': 'L', 'Ð': 'M', 'Ð': 'N', 'Ð': 'O',\n\t\t'Ð': 'P', 'Ð ': 'R', 'Ð¡': 'S', 'Ð¢': 'T', 'Ð£': 'U', 'Ð¤': 'F', 'Ð¥': 'H', 'Ð¦': 'C',\n\t\t'Ð§': 'Ch', 'Ð¨': 'Sh', 'Ð©': 'Sh', 'Ðª': '', 'Ð«': 'Y', 'Ð¬': '', 'Ð­': 'E', 'Ð®': 'Yu',\n\t\t'Ð¯': 'Ya',\n\t\t'Ð°': 'a', 'Ð±': 'b', 'Ð²': 'v', 'Ð³': 'g', 'Ð´': 'd', 'Ðµ': 'e', 'Ñ': 'yo', 'Ð¶': 'zh',\n\t\t'Ð·': 'z', 'Ð¸': 'i', 'Ð¹': 'j', 'Ðº': 'k', 'Ð»': 'l', 'Ð¼': 'm', 'Ð½': 'n', 'Ð¾': 'o',\n\t\t'Ð¿': 'p', 'Ñ': 'r', 'Ñ': 's', 'Ñ': 't', 'Ñ': 'u', 'Ñ': 'f', 'Ñ': 'h', 'Ñ': 'c',\n\t\t'Ñ': 'ch', 'Ñ': 'sh', 'Ñ': 'sh', 'Ñ': '', 'Ñ': 'y', 'Ñ': '', 'Ñ': 'e', 'Ñ': 'yu',\n\t\t'Ñ': 'ya',\n\n\t\t// Ukrainian\n\t\t'Ð': 'Ye', 'Ð': 'I', 'Ð': 'Yi', 'Ò': 'G',\n\t\t'Ñ': 'ye', 'Ñ': 'i', 'Ñ': 'yi', 'Ò': 'g',\n\n\t\t// Czech\n\t\t'Ä': 'C', 'Ä': 'D', 'Ä': 'E', 'Å': 'N', 'Å': 'R', 'Š': 'S', 'Å¤': 'T', 'Å®': 'U', \n\t\t'Å½': 'Z', \n\t\t'Ä': 'c', 'Ä': 'd', 'Ä': 'e', 'Å': 'n', 'Å': 'r', 'š': 's', 'Å¥': 't', 'Å¯': 'u',\n\t\t'Å¾': 'z', \n\n\t\t// Polish\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'e', 'Å': 'L', 'Å': 'N', 'Ó': 'o', 'Å': 'S', 'Å¹': 'Z', \n\t\t'Å»': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Å': 'l', 'Å': 'n', 'ó': 'o', 'Å': 's', 'Åº': 'z',\n\t\t'Å¼': 'z',\n\n\t\t// Latvian\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'E', 'Ä¢': 'G', 'Äª': 'i', 'Ä¶': 'k', 'Ä»': 'L', 'Å': 'N', \n\t\t'Š': 'S', 'Åª': 'u', 'Å½': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Ä£': 'g', 'Ä«': 'i', 'Ä·': 'k', 'Ä¼': 'l', 'Å': 'n',\n\t\t'š': 's', 'Å«': 'u', 'Å¾': 'z'\n\t};\n\t\n\t// Make custom replacements\n\tfor (var k in opt.replacements) {\n\t\ts = s.replace(RegExp(k, 'g'), opt.replacements[k]);\n\t}\n\t\n\t// Transliterate characters to ASCII\n\tif (opt.transliterate) {\n\t\tfor (var k in char_map) {\n\t\t\ts = s.replace(RegExp(k, 'g'), char_map[k]);\n\t\t}\n\t}\n\t\n\t// Replace non-alphanumeric characters with our delimiter\n\tvar alnum = (typeof(XRegExp) === 'undefined') ? RegExp('[^a-z0-9]+', 'ig') : XRegExp('[^\\\\p{L}\\\\p{N}]+', 'ig');\n\ts = s.replace(alnum, opt.delimiter);\n\t\n\t// Remove duplicate delimiters\n\ts = s.replace(RegExp('[' + opt.delimiter + ']{2,}', 'g'), opt.delimiter);\n\t\n\t// Truncate slug to max. characters\n\ts = s.substring(0, opt.limit);\n\t\n\t// Remove delimiter from ends\n\ts = s.replace(RegExp('(^' + opt.delimiter + '|' + opt.delimiter + '$)', 'g'), '');\n\t\n\treturn opt.lowercase ? s.toLowerCase() : s;\n}\n\n/**\n * @name toast\n * @description Triggers toast notification. Adds toast html to the page if missing.\n * @param {string} text - Toast notification.\n */\n export const toast = (text) => {\n\n    // only add once\n    if(!document.querySelector(\".toast\")){\n\n        let html = `\n        <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n            <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n                <div class=\"d-flex\">\n                    <div class=\"toast-body\"></div>\n                    <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n                </div>\n            </div>\n        </div>`;\n        if(document.querySelector('body > div')) document.querySelector('body > div').insertAdjacentHTML('afterend', html);\n    }\n\n    let toast = new bootstrap.Toast(document.querySelector('.toast'));\n    document.querySelector('.toast .toast-body').innerHTML = text;  \n    toast.show();\n}","import { getCookie, getSiteId, simulateClick, headers, parseApiError, __html } from '@kenzap/k-cloud';\n\n/* \ntexts to localize\n__('required')\n__('Size')\n__('Small')\n__('Regular')\n__('Large')\n__('Subtotal')\n__('Discount by %')\n__('Discount by value')\n__('Grand Total')\n*/\n\nexport const mt = (val) => {\n\n    return (\"\"+val).length < 2 ? \"0\"+val : val;\n}\n\nexport const getProductId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('id') ? urlParams.get('id') : \"\";\n    return id;\n}\n\nexport const getProductIdFromLink = () => {\n    \n    let url = new URL(window.location.href);\n    let id = url.pathname.trim().split('/').slice(-2)[0];\n    return id;\n}\n\nexport const replaceQueryParam = (param, newval, search) => {\n\n    let regex = new RegExp(\"([?;&])\" + param + \"[^&;]*[;&]?\");\n    let query = search.replace(regex, \"$1\").replace(/&$/, '');\n\n    return (query.length > 2 ? query + \"&\" : \"?\") + (newval ? param + \"=\" + newval : '');\n}\n\nexport const getPageNumberOld = () => {\n\n    let url = window.location.href.split('/');\n    let page = url[url.length-1];\n    let pageN = 1;\n    if(page.indexOf('page')==0){\n      pageN = page.replace('page', '').replace('#', '');\n    }\n    // console.log(pageN);\n    return parseInt(pageN);\n}\n\nexport const getPageNumber = () => {\n\n    let urlParams = new URLSearchParams(window.location.search);\n    let page = urlParams.get('page') ? urlParams.get('page') : 1;\n\n    return parseInt(page);\n}\n\nexport const getPagination = (__, meta, cb) => {\n\n    if(typeof(meta) === 'undefined'){ document.querySelector(\"#listing_info\").innerHTML = __('no records to display'); return; }\n\n    let offset = meta.limit+meta.offset;\n    if(offset>meta.total_records) offset = meta.total_records;\n\n    document.querySelector(\"#listing_info\").innerHTML = __(\"Showing %1$ to %2$ of %3$ entries\", (1+meta.offset), (offset), meta.total_records);\n    //  \"Showing \"+(1+meta.offset)+\" to \"+(offset)+\" of \"+meta.total_records+\" entries\";\n\n    let pbc = Math.ceil(meta.total_records / meta.limit);\n    document.querySelector(\"#listing_paginate\").style.display = (pbc < 2) ? \"none\" : \"block\";\n\n    let page = getPageNumber(); \n    let html = '<ul class=\"pagination d-flex justify-content-end pagination-flat mb-0\">';\n    html += '<li class=\"paginate_button page-item previous\" id=\"listing_previous\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"prev\" data-page=\"0\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&laquo;</span></li>';\n    let i = 0;\n    while(i<pbc){\n\n        i++; \n        if(((i >= page-3) && (i <= page)) || ((i <= page+3) && (i >=page))){\n\n            html += '<li class=\"paginate_button page-item '+((page==i)?'active':'')+'\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"page\" data-page=\"'+i+'\" tabindex=\"0\" class=\"page-link\">'+(page==i?i:i)+'</a></li>';      \n        }\n    }  \n    html += '<li class=\"paginate_button page-item next\" id=\"order-listing_next\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"next\" data-page=\"2\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&raquo;</span></a></li>';\n    html += '</ul>'\n\n    document.querySelector(\"#listing_paginate\").innerHTML = html;\n\n    let page_link = document.querySelectorAll(\".page-link\");\n    for (const l of page_link) {\n        \n        l.addEventListener('click', function(e) {\n\n            let p = parseInt(getPageNumber());\n            let ps = p;\n            switch(l.dataset.type){ \n                case 'prev': p-=1; if(p<1) p = 1; break;\n                case 'page': p=l.dataset.page; break;\n                case 'next': p+=1; if(p>pbc) p = pbc; break;\n            }\n            \n            // update url\n            if (window.history.replaceState) {\n\n                // let url = window.location.href.split('/page');\n                // let urlF = (url[0]+'/page'+p).replace('//page', '/page');\n\n                let str = window.location.search;\n                str = replaceQueryParam('page', p, str);\n                // window.location = window.location.pathname + str\n\n                // prevents browser from storing history with each change:\n                window.history.replaceState(\"kenzap-cloud\", document.title, window.location.pathname + str);\n            }\n\n            // only refresh if page differs\n            if(ps!=p) cb();\n            \n            e.preventDefault();\n            return false;\n        });\n    }\n}\n\nexport const formatStatus = (__, st) => {\n\n    st = parseInt(st); \n    switch(st){ \n      case 0: return '<div class=\"badge bg-warning text-dark fw-light\">' + __('Draft') + '</div>';\n      case 1: return '<div class=\"badge bg-primary fw-light\">' + __('Published') + '</div>';\n      case 3: return '<div class=\"badge bg-secondary fw-light\">' + __('Unpublished') + '</div>';\n      default: return '<div class=\"badge bg-secondary fw-light\">' + __('Drafts') + '</div>';\n    }\n}\n\n/**\n    * Render price\n    * @public\n    */\n export const priceFormat = function(_this, price) {\n\n    price = makeNumber(price);\n\n    price = (Math.round(parseFloat(price) * 100)/100).toFixed(2);\n    \n    switch(_this.state.settings.currency_symb_loc){\n        case 'left': price = _this.state.settings.currency_symb + price; break;\n        case 'right': price = price + _this.state.settings.currency_symb; break;\n    }\n\n    return price;\n}\n\nexport const makeNumber = function(price) {\n\n    price = price ? price : 0;\n    price = parseFloat(price);\n    price = Math.round(price * 100) / 100;\n    return price;\n}\n\nexport const formatTime = (__, timestamp) => {\n\t\n    const d = new Date(parseInt(timestamp) * 1000);\n    return d.toLocaleDateString();\n\n    let a = new Date(timestamp * 1000);\n    let months = [__('Jan'), __('Feb'), __('Mar'), __('Apr'), __('May'), __('Jun'), __('Jul'), __('Aug'), __('Sep'), __('Oct'), __('Nov'), __('Dec')];\n    let year = a.getFullYear();\n    let month = months[a.getMonth()];\n    let date = a.getDate();\n    let hour = a.getHours();\n    let min = a.getMinutes();\n    let sec = a.getSeconds();\n    let time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\n// numbers only with allowed exceptions\nexport const onlyNumbers = (sel, chars) => {\n\n    if(!document.querySelector(sel)) return;\n    \n    document.querySelector(sel).addEventListener('keypress', (e) => {\n\n        // console.log(e.which);\n\n        if((!chars.includes(e.which) && isNaN(String.fromCharCode(e.which))) || e.which == 32 || (document.querySelector(sel).value.includes(String.fromCharCode(e.which)) && chars.includes(e.which))){\n\n            // stop character from entering input\n            e.preventDefault(); \n            return false;\n        }\n    });\n}\n\n// nums only validation\nexport const numsOnly = (e, max) => {\n\n    // Only ASCII charactar in that range allowed \n    var ASCIICode = (e.which) ? e.which : e.keyCode \n    if (ASCIICode > 31 && ASCIICode != 46 && (ASCIICode < 48 || ASCIICode > 57)) \n    return false; \n\n    if(parseFloat(e.target.value)>max) \n    return false; \n\n    let dec = e.target.value.split('.');\n    if(dec.length>1)\n    if(dec[1].length>1)\n        return false;\n    \n    return true; \n}\n\nexport const onClick = (sel, fn) => {\n\n    // console.log('onClick');\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n// time elapsed since creation \nexport const timeConverterAgo = (__, now, time) => {\n\n    now = parseInt(now);\n    time = parseInt(time);\n\n    // parse as elapsed time\n    let past = now - time;\n    if(past < 60) return __('moments ago');\n    if(past < 3600) return parseInt(past / 60) + ' ' + __('minutes ago');\n    if(past < 86400) return parseInt(past / 60 / 60) + ' ' + __('hours ago');\n\n    // process as normal date\n    var a = new Date(time * 1000);\n    var months = [ __('Jan'), __('Feb'), __('Mar'), __('Apr'), __('May'), __('Jun'), __('Jul'), __('Aug'), __('Sep'), __('Oct'), __('Nov'), __('Dec') ];\n    var year = a.getFullYear();\n    var month = months[a.getMonth()];\n    var date = a.getDate();\n    var hour = a.getHours();\n    var min = a.getMinutes();\n    var sec = a.getSeconds();\n    var time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\nexport const parseVariations = (_this, product) => {\n\n    let html_vars = '';\n    if(typeof(product.variations !== 'undefined'))\n    for(let v in product.variations){\n\n        // variation type\n        let type = '';\t\n        if(product.variations[v].type=='checkbox') type = 'check';\n        if(product.variations[v].type=='radio')    type = 'radio';\n\n        // struct variation\n        html_vars += '\\\n        <b>' + __html(product.variations[v].title) + (product.variations[v].required == '1' ? ' <span class=\"tag\">'+__html('required')+'</span>':'')+'</b>\\\n        <div class=\"kp-'+type+'\" >';\n\n        // variation labels\n        for(let d in product.variations[v].data){\n\n            let checked = false;\n            // for public qr feed\n            // if(typeof(cart.state.product.variations[v]) !== 'undefined' && typeof(cart.state.product.variations[v].list) !== 'undefined' && typeof(cart.state.product.variations[v].list[\"_\"+d]) !== 'undefined'){ checked = true; }\n            \n            // verify variation price validity\n            product.variations[v].data[d]['price'] = makeNumber(product.variations[v].data[d]['price']);\n\n            switch(type){\n                case 'check':\n\n                html_vars += '\\\n                    <label>\\\n                        <input type=\"checkbox\" data-required=\"'+product.variations[v].required+'\" data-indexv=\"'+v+'\" data-index=\"'+d+'\" data-title=\"'+product.variations[v].data[d]['title']+'\" data-titlev=\"'+__(product.variations[v].title)+'\" data-price=\"'+product.variations[v].data[d]['price']+'\" '+(checked?'checked=\"checked\"':'')+'>\\\n                        <div class=\"checkbox\">\\\n                            <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\">\\\n                                <path d=\"M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z\"></path>\\\n                                <polyline points=\"4 11 8 15 16 6\"></polyline>\\\n                            </svg>\\\n                        </div>\\\n                        <span>'+__html(product.variations[v].data[d]['title'])+'</span>\\\n                        <div class=\"price\">+ '+priceFormat(_this, product.variations[v].data[d]['price'])+'</div>\\\n                    </label>';\n                \n                break;\n                case 'radio':\n\n                html_vars += '\\\n                    <label>\\\n                        <input type=\"radio\" data-required=\"'+product.variations[v].required+'\" data-indexv=\"'+v+'\" name=\"radio'+v+'\" data-index=\"'+d+'\" data-title=\"'+product.variations[v].data[d]['title']+'\" data-titlev=\"'+__(product.variations[v].title)+'\" data-price=\"'+product.variations[v].data[d]['price']+'\" '+(checked?'checked=\"checked\"':'')+' />\\\n                        <span>'+__html(product.variations[v].data[d]['title'])+'</span>\\\n                        <div class=\"price\">+ '+priceFormat(_this, product.variations[v].data[d]['price'])+'</div>\\\n                    </label>';\n                \n                break;\n            }\n        }\n\n        html_vars += '</div>';\n    }\n\n    return html_vars;\n}\n\nexport const escape = (htmlStr) => {\n\n    return htmlStr.replace(/&/g, \"&amp;\")\n          .replace(/</g, \"&lt;\")\n          .replace(/>/g, \"&gt;\")\n          .replace(/\"/g, \"&quot;\")\n          .replace(/'/g, \"&#39;\");        \n \n}\n\nexport const unescape = (htmlStr) => {\n\n    htmlStr = htmlStr.replace(/&lt;/g , \"<\");\t \n    htmlStr = htmlStr.replace(/&gt;/g , \">\");     \n    htmlStr = htmlStr.replace(/&quot;/g , \"\\\"\");  \n    htmlStr = htmlStr.replace(/&#39;/g , \"\\'\");   \n    htmlStr = htmlStr.replace(/&amp;/g , \"&\");\n    return htmlStr;\n}\n\nexport const ecommerceUpdates = (_this, source, cb) => {\n\n    // do API query\n    fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n        method: 'post',\n        headers: headers,\n        body: JSON.stringify({\n            query: {\n                updates: {\n                    type:       'updates',\n                    source:     source,\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if(response.success){\n\n            // do callback\n            cb(response);\n            \n            // parse notifications\n            renderNotifications(_this, response.messages);\n            \n        }else{\n\n\n        }\n    })\n    .catch(error => { // parseApiError(error); \n    });\n}\n\nexport const isMobile = () => {\n\n    const nav = navigator.userAgent.toLowerCase();\n    return (\n        nav.match(/iphone/i) || nav.match(/ipod/i) || nav.match(/ipad/i) || nav.match(/android/i)\n    );\n}\n\n// play notification sound. Ex.: when new order received\nexport const playSound = (_this, max) => {\n \n    // if(!max) max = _this.state.playSound.max_times;\n\n    _this.state.playSound.n = 0;\n\n    if(_this.state.playSound.timer) clearInterval(_this.state.playSound.timer);\n\n    if(_this.state.playSound.allowed) _this.state.playSound.audio.play();\n\n    // console.log(\"playing \" + _this.state.playSound.allowed);\n\n    try{\n        if(_this.state.playSound.allowed && isMobile()) window.navigator.vibrate(200);\n    }catch{\n\n    }\n\n    if(max==1) return;\n\n    _this.state.playSound.timer = setInterval(() => {\n\n        if(!_this.state.playSound.allowed) return;\n         \n        _this.state.playSound.audio.play();\n\n        if(_this.state.playSound.n > max){ clearInterval(_this.state.playSound.timer) }\n\n        _this.state.playSound.n += 1;\n\n    }, 5000);\n\n    // console.log('playSound');\n}\n\nexport const renderNotifications = (_this, messages) => {\n\n    let html = '';\n\n    let play = false;\n\n    // html\n    messages.forEach(msg => {\n\n        if(!_this.state.playSound.nids.includes(msg._id)){ _this.state.playSound.nids.push(msg._id); play = true; }\n\n        if(!document.querySelector('#contents .container [data-id=\"'+msg._id+'\"]')){\n        \n            html += `\n\n            <div class=\"alert alert-${ msg.color } alert-dismissible fade show\" role=\"alert\" data-id=\"${ msg._id }\">\n                <div class=\"d-flex align-items-center\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-exclamation-square flex-shrink-0 me-2\" viewBox=\"0 0 16 16\">\n                        <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\n                        <path d=\"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z\"/>\n                    </svg>\n                    <div>\n                    ${ msg.msg }\n                    </div>\n                </div>\n                <button type=\"button\" class=\"btn-close btn-dismiss-notify\" data-bs-dismiss=\"alert\" aria-label=\"Close\" data-id=\"${ msg._id }\"></button>\n            </div>`;\n        }\n    });\n\n    // play sound\n    if(play){ \n        // console.log('notify play sound'); \n        playSound(_this, 1); _this.getData(); \n    }\n\n    if(document.querySelector('#contents .container')) document.querySelector('#contents .container').insertAdjacentHTML(\"afterbegin\", html);\n\n    // listeners\n    onClick('.btn-dismiss-notify', (e) => {\n\n        // do API query\n        fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n            method: 'post',\n            headers: headers,\n            body: JSON.stringify({\n                query: {\n                    updates: {\n                        type:       'dismiss',\n                        id:         e.currentTarget.dataset.id,\n                    }\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            if(response.success){\n\n\n\n            }else{\n\n\n            }\n        })\n        .catch(error => { // parseApiError(error); \n        });\n    });\n\n    // order open listener\n    if(document.querySelector('.order-details')) for( let el of document.querySelectorAll('.order-details') ){\n\n        if(el.dataset.assigned == \"1\") return;\n\n        el.dataset.assigned = 1;\n\n        el.addEventListener('click', (e) => {\n\n            let el = document.querySelector(\".view-order[data-id='\"+e.currentTarget.dataset.id+\"']\");\n\n            simulateClick(el);\n\n        }, true);\n    }\n}\n\n/*\n* Load additional JS or CSS depencies\n*\n* @param    dep       dependecy. Ex.: hiebee.min.js \n* @param    cb        function to call after script is loaded (optional)       \n* @return \t{Boolen} \tresult status \n* \n*/\nexport const loadAddon = (dep, version, cb) => {\n\n    \n    const url = new URL(dep);\n\n    if(getCookie('debug')) dep = 'http://localhost:3000' + url.pathname;\n    \n    console.log(dep);\n\n    // dependency already loaded, skip\n    if(document.getElementById(dep)){ if(typeof cb === 'function') cb.call(); return; }\n\n    // detect dependency type\n    let t = dep.split('.').slice(-1)[0];\n    // console.log(dep+'loadAddon'+t);\n    switch(t){\n      case 'js':\n        \n        let js = document.createElement(\"script\");\n        js.setAttribute(\"src\", dep);\n        js.id = dep;\n        js.onload = js.onreadystatechange = function() {\n \n          if(!this.readyState || this.readyState == 'complete')\n            if(typeof cb === 'function') cb.call();\n        };\n        document.body.appendChild(js);\n        \n      break;\n      case 'css':\n\n        var head  = document.getElementsByTagName('head')[0];\n        var css  = document.createElement('link');\n        css.id   = dep;\n        css.rel  = 'stylesheet';\n        css.type = 'text/css';\n        css.href = dep;\n        head.appendChild(css);\n\n      break;\n    }\n}\n\nexport const getProductsById = (_this, products, cb) => {\n\n    // do API query\n    const response_raw = fetch('https://api-v1.kenzap.cloud/', {\n        method: 'post',\n        headers: headers,\n        body: JSON.stringify({\n            query: {\n                products: {\n                    type:       'find',\n                    fields:     '*',\n                    key:        'ecommerce-product',\n                    id:         products,\n                    sortby:     {\n                        field: 'created',\n                        order: 'DESC'\n                    }\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if (response.success) {\n\n            response.products.forEach((product, i) => {\n\n                _this.state.orderSingle.items.push({\n                    cats: [],\n                    id: product._id,\n                    index: i,\n                    note: \"\",\n                    price: product.price,\n                    qty: 1,\n                    sdesc: __html(product.sdesc),\n                    title: __html(product.title),\n                    total: product.price,\n                    type: \"new\",\n                    variations: []\n                });\n            });\n\n            cb(_this);\n        }\n    })\n    .catch(error => { console.log(error); parseApiError(error); });\n}\n\nexport let Base64={_keyStr:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",encode:function(e){var t=\"\";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t=\"\";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");while(f<e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/\\r\\n/g,\"\\n\");var t=\"\";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t=\"\";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}}\n\nexport const getCurrencies = () => {\n\n    // length 164\n    return [\n        {\"name\":\"Afghan Afghani\",\"code\":\"AFA\",\"symbol\":\"؋\"},\n        {\"name\":\"Albanian Lek\",\"code\":\"ALL\",\"symbol\":\"Lek\"},\n        {\"name\":\"Algerian Dinar\",\"code\":\"DZD\",\"symbol\":\"دج\"},\n        {\"name\":\"Angolan Kwanza\",\"code\":\"AOA\",\"symbol\":\"Kz\"},\n        {\"name\":\"Argentine Peso\",\"code\":\"ARS\",\"symbol\":\"$\"},\n        {\"name\":\"Armenian Dram\",\"code\":\"AMD\",\"symbol\":\"֏\"},\n        {\"name\":\"Aruban Florin\",\"code\":\"AWG\",\"symbol\":\"ƒ\"},\n        {\"name\":\"Australian Dollar\",\"code\":\"AUD\",\"symbol\":\"$\"},\n        {\"name\":\"Azerbaijani Manat\",\"code\":\"AZN\",\"symbol\":\"m\"},\n        {\"name\":\"Bahamian Dollar\",\"code\":\"BSD\",\"symbol\":\"B$\"},\n        {\"name\":\"Bahraini Dinar\",\"code\":\"BHD\",\"symbol\":\".د.ب\"},\n        {\"name\":\"Bangladeshi Taka\",\"code\":\"BDT\",\"symbol\":\"৳\"},\n        {\"name\":\"Barbadian Dollar\",\"code\":\"BBD\",\"symbol\":\"Bds$\"},\n        {\"name\":\"Belarusian Ruble\",\"code\":\"BYR\",\"symbol\":\"Br\"},\n        {\"name\":\"Belgian Franc\",\"code\":\"BEF\",\"symbol\":\"fr\"},\n        {\"name\":\"Belize Dollar\",\"code\":\"BZD\",\"symbol\":\"$\"},\n        {\"name\":\"Bermudan Dollar\",\"code\":\"BMD\",\"symbol\":\"$\"},\n        {\"name\":\"Bhutanese Ngultrum\",\"code\":\"BTN\",\"symbol\":\"Nu.\"},\n        {\"name\":\"Bitcoin\",\"code\":\"BTC\",\"symbol\":\"฿\"},\n        {\"name\":\"Bolivian Boliviano\",\"code\":\"BOB\",\"symbol\":\"Bs.\"},\n        {\"name\":\"Bosnia-Herzegovina Convertible Mark\",\"code\":\"BAM\",\"symbol\":\"KM\"},\n        {\"name\":\"Botswanan Pula\",\"code\":\"BWP\",\"symbol\":\"P\"},\n        {\"name\":\"Brazilian Real\",\"code\":\"BRL\",\"symbol\":\"R$\"},\n        {\"name\":\"British Pound Sterling\",\"code\":\"GBP\",\"symbol\":\"£\"},\n        {\"name\":\"Brunei Dollar\",\"code\":\"BND\",\"symbol\":\"B$\"},\n        {\"name\":\"Bulgarian Lev\",\"code\":\"BGN\",\"symbol\":\"Лв.\"},\n        {\"name\":\"Burundian Franc\",\"code\":\"BIF\",\"symbol\":\"FBu\"},\n        {\"name\":\"Cambodian Riel\",\"code\":\"KHR\",\"symbol\":\"KHR\"},\n        {\"name\":\"Canadian Dollar\",\"code\":\"CAD\",\"symbol\":\"$\"},\n        {\"name\":\"Cape Verdean Escudo\",\"code\":\"CVE\",\"symbol\":\"$\"},\n        {\"name\":\"Cayman Islands Dollar\",\"code\":\"KYD\",\"symbol\":\"$\"},\n        {\"name\":\"CFA Franc BCEAO\",\"code\":\"XOF\",\"symbol\":\"CFA\"},\n        {\"name\":\"CFA Franc BEAC\",\"code\":\"XAF\",\"symbol\":\"FCFA\"},\n        {\"name\":\"CFP Franc\",\"code\":\"XPF\",\"symbol\":\"₣\"},\n        {\"name\":\"Chilean Peso\",\"code\":\"CLP\",\"symbol\":\"$\"},\n        {\"name\":\"Chinese Yuan\",\"code\":\"CNY\",\"symbol\":\"¥\"},\n        {\"name\":\"Colombian Peso\",\"code\":\"COP\",\"symbol\":\"$\"},\n        {\"name\":\"Comorian Franc\",\"code\":\"KMF\",\"symbol\":\"CF\"},\n        {\"name\":\"Congolese Franc\",\"code\":\"CDF\",\"symbol\":\"FC\"},\n        {\"name\":\"Costa Rican Colón\",\"code\":\"CRC\",\"symbol\":\"₡\"},\n        {\"name\":\"Croatian Kuna\",\"code\":\"HRK\",\"symbol\":\"kn\"},\n        {\"name\":\"Cuban Convertible Peso\",\"code\":\"CUC\",\"symbol\":\"$, CUC\"},\n        {\"name\":\"Czech Republic Koruna\",\"code\":\"CZK\",\"symbol\":\"Kč\"},\n        {\"name\":\"Danish Krone\",\"code\":\"DKK\",\"symbol\":\"Kr.\"},\n        {\"name\":\"Djiboutian Franc\",\"code\":\"DJF\",\"symbol\":\"Fdj\"},\n        {\"name\":\"Dominican Peso\",\"code\":\"DOP\",\"symbol\":\"$\"},\n        {\"name\":\"East Caribbean Dollar\",\"code\":\"XCD\",\"symbol\":\"$\"},\n        {\"name\":\"Egyptian Pound\",\"code\":\"EGP\",\"symbol\":\"ج.م\"},\n        {\"name\":\"Eritrean Nakfa\",\"code\":\"ERN\",\"symbol\":\"Nfk\"},\n        {\"name\":\"Estonian Kroon\",\"code\":\"EEK\",\"symbol\":\"kr\"},\n        {\"name\":\"Ethiopian Birr\",\"code\":\"ETB\",\"symbol\":\"Nkf\"},\n        {\"name\":\"Euro\",\"code\":\"EUR\",\"symbol\":\"€\"},\n        {\"name\":\"Falkland Islands Pound\",\"code\":\"FKP\",\"symbol\":\"£\"},\n        {\"name\":\"Fijian Dollar\",\"code\":\"FJD\",\"symbol\":\"FJ$\"},\n        {\"name\":\"Gambian Dalasi\",\"code\":\"GMD\",\"symbol\":\"D\"},\n        {\"name\":\"Georgian Lari\",\"code\":\"GEL\",\"symbol\":\"ლ\"},\n        {\"name\":\"German Mark\",\"code\":\"DEM\",\"symbol\":\"DM\"},\n        {\"name\":\"Ghanaian Cedi\",\"code\":\"GHS\",\"symbol\":\"GH₵\"},\n        {\"name\":\"Gibraltar Pound\",\"code\":\"GIP\",\"symbol\":\"£\"},\n        {\"name\":\"Greek Drachma\",\"code\":\"GRD\",\"symbol\":\"₯, Δρχ, Δρ\"},\n        {\"name\":\"Guatemalan Quetzal\",\"code\":\"GTQ\",\"symbol\":\"Q\"},\n        {\"name\":\"Guinean Franc\",\"code\":\"GNF\",\"symbol\":\"FG\"},\n        {\"name\":\"Guyanaese Dollar\",\"code\":\"GYD\",\"symbol\":\"$\"},\n        {\"name\":\"Haitian Gourde\",\"code\":\"HTG\",\"symbol\":\"G\"},\n        {\"name\":\"Honduran Lempira\",\"code\":\"HNL\",\"symbol\":\"L\"},\n        {\"name\":\"Hong Kong Dollar\",\"code\":\"HKD\",\"symbol\":\"$\"},\n        {\"name\":\"Hungarian Forint\",\"code\":\"HUF\",\"symbol\":\"Ft\"},\n        {\"name\":\"Icelandic króna\",\"code\":\"ISK\",\"symbol\":\"kr\"},\n        {\"name\":\"Indian Rupee\",\"code\":\"INR\",\"symbol\":\"₹\"},\n        {\"name\":\"Indonesian Rupiah\",\"code\":\"IDR\",\"symbol\":\"Rp\"},\n        {\"name\":\"Iranian Rial\",\"code\":\"IRR\",\"symbol\":\"﷼\"},\n        {\"name\":\"Iraqi Dinar\",\"code\":\"IQD\",\"symbol\":\"د.ع\"},\n        {\"name\":\"Israeli New Sheqel\",\"code\":\"ILS\",\"symbol\":\"₪\"},\n        {\"name\":\"Italian Lira\",\"code\":\"ITL\",\"symbol\":\"L,£\"},\n        {\"name\":\"Jamaican Dollar\",\"code\":\"JMD\",\"symbol\":\"J$\"},\n        {\"name\":\"Japanese Yen\",\"code\":\"JPY\",\"symbol\":\"¥\"},\n        {\"name\":\"Jordanian Dinar\",\"code\":\"JOD\",\"symbol\":\"ا.د\"},\n        {\"name\":\"Kazakhstani Tenge\",\"code\":\"KZT\",\"symbol\":\"лв\"},\n        {\"name\":\"Kenyan Shilling\",\"code\":\"KES\",\"symbol\":\"KSh\"},\n        {\"name\":\"Kuwaiti Dinar\",\"code\":\"KWD\",\"symbol\":\"ك.د\"},\n        {\"name\":\"Kyrgystani Som\",\"code\":\"KGS\",\"symbol\":\"лв\"},\n        {\"name\":\"Laotian Kip\",\"code\":\"LAK\",\"symbol\":\"₭\"},\n        {\"name\":\"Latvian Lats\",\"code\":\"LVL\",\"symbol\":\"Ls\"},\n        {\"name\":\"Lebanese Pound\",\"code\":\"LBP\",\"symbol\":\"£\"},\n        {\"name\":\"Lesotho Loti\",\"code\":\"LSL\",\"symbol\":\"L\"},\n        {\"name\":\"Liberian Dollar\",\"code\":\"LRD\",\"symbol\":\"$\"},\n        {\"name\":\"Libyan Dinar\",\"code\":\"LYD\",\"symbol\":\"د.ل\"},\n        {\"name\":\"Lithuanian Litas\",\"code\":\"LTL\",\"symbol\":\"Lt\"},\n        {\"name\":\"Macanese Pataca\",\"code\":\"MOP\",\"symbol\":\"$\"},\n        {\"name\":\"Macedonian Denar\",\"code\":\"MKD\",\"symbol\":\"ден\"},\n        {\"name\":\"Malagasy Ariary\",\"code\":\"MGA\",\"symbol\":\"Ar\"},\n        {\"name\":\"Malawian Kwacha\",\"code\":\"MWK\",\"symbol\":\"MK\"},\n        {\"name\":\"Malaysian Ringgit\",\"code\":\"MYR\",\"symbol\":\"RM\"},\n        {\"name\":\"Maldivian Rufiyaa\",\"code\":\"MVR\",\"symbol\":\"Rf\"},\n        {\"name\":\"Mauritanian Ouguiya\",\"code\":\"MRO\",\"symbol\":\"MRU\"},\n        {\"name\":\"Mauritian Rupee\",\"code\":\"MUR\",\"symbol\":\"₨\"},\n        {\"name\":\"Mexican Peso\",\"code\":\"MXN\",\"symbol\":\"$\"},\n        {\"name\":\"Moldovan Leu\",\"code\":\"MDL\",\"symbol\":\"L\"},\n        {\"name\":\"Mongolian Tugrik\",\"code\":\"MNT\",\"symbol\":\"₮\"},\n        {\"name\":\"Moroccan Dirham\",\"code\":\"MAD\",\"symbol\":\"MAD\"},\n        {\"name\":\"Mozambican Metical\",\"code\":\"MZM\",\"symbol\":\"MT\"},\n        {\"name\":\"Myanmar Kyat\",\"code\":\"MMK\",\"symbol\":\"K\"},\n        {\"name\":\"Namibian Dollar\",\"code\":\"NAD\",\"symbol\":\"$\"},\n        {\"name\":\"Nepalese Rupee\",\"code\":\"NPR\",\"symbol\":\"₨\"},\n        {\"name\":\"Netherlands Antillean Guilder\",\"code\":\"ANG\",\"symbol\":\"ƒ\"},\n        {\"name\":\"New Taiwan Dollar\",\"code\":\"TWD\",\"symbol\":\"$\"},\n        {\"name\":\"New Zealand Dollar\",\"code\":\"NZD\",\"symbol\":\"$\"},\n        {\"name\":\"Nicaraguan Córdoba\",\"code\":\"NIO\",\"symbol\":\"C$\"},\n        {\"name\":\"Nigerian Naira\",\"code\":\"NGN\",\"symbol\":\"₦\"},\n        {\"name\":\"North Korean Won\",\"code\":\"KPW\",\"symbol\":\"₩\"},\n        {\"name\":\"Norwegian Krone\",\"code\":\"NOK\",\"symbol\":\"kr\"},\n        {\"name\":\"Omani Rial\",\"code\":\"OMR\",\"symbol\":\".ع.ر\"},\n        {\"name\":\"Pakistani Rupee\",\"code\":\"PKR\",\"symbol\":\"₨\"},\n        {\"name\":\"Panamanian Balboa\",\"code\":\"PAB\",\"symbol\":\"B/.\"},\n        {\"name\":\"Papua New Guinean Kina\",\"code\":\"PGK\",\"symbol\":\"K\"},\n        {\"name\":\"Paraguayan Guarani\",\"code\":\"PYG\",\"symbol\":\"₲\"},\n        {\"name\":\"Peruvian Nuevo Sol\",\"code\":\"PEN\",\"symbol\":\"S/.\"},\n        {\"name\":\"Philippine Peso\",\"code\":\"PHP\",\"symbol\":\"₱\"},\n        {\"name\":\"Polish Zloty\",\"code\":\"PLN\",\"symbol\":\"zł\"},\n        {\"name\":\"Qatari Rial\",\"code\":\"QAR\",\"symbol\":\"ق.ر\"},\n        {\"name\":\"Romanian Leu\",\"code\":\"RON\",\"symbol\":\"lei\"},\n        {\"name\":\"Russian Ruble\",\"code\":\"RUB\",\"symbol\":\"₽\"},\n        {\"name\":\"Rwandan Franc\",\"code\":\"RWF\",\"symbol\":\"FRw\"},\n        {\"name\":\"Salvadoran Colón\",\"code\":\"SVC\",\"symbol\":\"₡\"},\n        {\"name\":\"Samoan Tala\",\"code\":\"WST\",\"symbol\":\"SAT\"},\n        {\"name\":\"Saudi Riyal\",\"code\":\"SAR\",\"symbol\":\"﷼\"},\n        {\"name\":\"Serbian Dinar\",\"code\":\"RSD\",\"symbol\":\"din\"},\n        {\"name\":\"Seychellois Rupee\",\"code\":\"SCR\",\"symbol\":\"SRe\"},\n        {\"name\":\"Sierra Leonean Leone\",\"code\":\"SLL\",\"symbol\":\"Le\"},\n        {\"name\":\"Singapore Dollar\",\"code\":\"SGD\",\"symbol\":\"$\"},\n        {\"name\":\"Slovak Koruna\",\"code\":\"SKK\",\"symbol\":\"Sk\"},\n        {\"name\":\"Solomon Islands Dollar\",\"code\":\"SBD\",\"symbol\":\"Si$\"},\n        {\"name\":\"Somali Shilling\",\"code\":\"SOS\",\"symbol\":\"Sh.so.\"},\n        {\"name\":\"South African Rand\",\"code\":\"ZAR\",\"symbol\":\"R\"},\n        {\"name\":\"South Korean Won\",\"code\":\"KRW\",\"symbol\":\"₩\"},\n        {\"name\":\"Special Drawing Rights\",\"code\":\"XDR\",\"symbol\":\"SDR\"},\n        {\"name\":\"Sri Lankan Rupee\",\"code\":\"LKR\",\"symbol\":\"Rs\"},\n        {\"name\":\"St. Helena Pound\",\"code\":\"SHP\",\"symbol\":\"£\"},\n        {\"name\":\"Sudanese Pound\",\"code\":\"SDG\",\"symbol\":\".س.ج\"},\n        {\"name\":\"Surinamese Dollar\",\"code\":\"SRD\",\"symbol\":\"$\"},\n        {\"name\":\"Swazi Lilangeni\",\"code\":\"SZL\",\"symbol\":\"E\"},\n        {\"name\":\"Swedish Krona\",\"code\":\"SEK\",\"symbol\":\"kr\"},\n        {\"name\":\"Swiss Franc\",\"code\":\"CHF\",\"symbol\":\"CHf\"},\n        {\"name\":\"Syrian Pound\",\"code\":\"SYP\",\"symbol\":\"LS\"},\n        {\"name\":\"São Tomé and Príncipe Dobra\",\"code\":\"STD\",\"symbol\":\"Db\"},\n        {\"name\":\"Tajikistani Somoni\",\"code\":\"TJS\",\"symbol\":\"SM\"},\n        {\"name\":\"Tanzanian Shilling\",\"code\":\"TZS\",\"symbol\":\"TSh\"},\n        {\"name\":\"Thai Baht\",\"code\":\"THB\",\"symbol\":\"฿\"},\n        {\"name\":\"Tongan Pa'anga\",\"code\":\"TOP\",\"symbol\":\"$\"},\n        {\"name\":\"Trinidad & Tobago Dollar\",\"code\":\"TTD\",\"symbol\":\"$\"},\n        {\"name\":\"Tunisian Dinar\",\"code\":\"TND\",\"symbol\":\"ت.د\"},\n        {\"name\":\"Turkish Lira\",\"code\":\"TRY\",\"symbol\":\"₺\"},\n        {\"name\":\"Turkmenistani Manat\",\"code\":\"TMT\",\"symbol\":\"T\"},\n        {\"name\":\"Ugandan Shilling\",\"code\":\"UGX\",\"symbol\":\"USh\"},\n        {\"name\":\"Ukrainian Hryvnia\",\"code\":\"UAH\",\"symbol\":\"₴\"},\n        {\"name\":\"United Arab Emirates Dirham\",\"code\":\"AED\",\"symbol\":\"إ.د\"},\n        {\"name\":\"Uruguayan Peso\",\"code\":\"UYU\",\"symbol\":\"$\"},\n        {\"name\":\"US Dollar\",\"code\":\"USD\",\"symbol\":\"$\"},\n        {\"name\":\"Uzbekistan Som\",\"code\":\"UZS\",\"symbol\":\"лв\"},\n        {\"name\":\"Vanuatu Vatu\",\"code\":\"VUV\",\"symbol\":\"VT\"},\n        {\"name\":\"Venezuelan  Bolívar\",\"code\":\"VEF\",\"symbol\":\"Bs\"},\n        {\"name\":\"Vietnamese Dong\",\"code\":\"VND\",\"symbol\":\"₫\"},\n        {\"name\":\"Yemeni Rial\",\"code\":\"YER\",\"symbol\":\"﷼\"},\n        {\"name\":\"Zambian Kwacha\",\"code\":\"ZMK\",\"symbol\":\"ZK\"}\n    ];\n}","// categories input tags\nexport const simpleTags = (__, element) => {\n\n    if (!element) {\n        throw new Error(\"DOM Element is undifined! Please choose HTML target element.\")\n    }\n\n    let DOMParent = element\n    let DOMList\n    let DOMInput\n    let dataAttribute\n    let arrayOfList\n\n    function DOMCreate() {\n        \n        let ul = document.createElement(\"ul\")\n        let input = document.createElement(\"input\")\n\n        input.setAttribute('placeholder', __('new category'));\n\n        DOMParent.appendChild(ul)\n        DOMParent.appendChild(input)\n\n        // first child is <ul>\n        DOMList = DOMParent.firstElementChild\n        // last child is <input>\n        DOMInput = DOMParent.lastElementChild\n    }\n\n    function DOMRender() {\n\n        // clear the entire <li> inside <ul>\n        DOMList.innerHTML = \"\"\n\n        // render each <li> to <ul>\n        arrayOfList.forEach((currentValue, index) => {\n\n            currentValue = currentValue.trim();\n\n            if (currentValue) {\n\n                let li = document.createElement(\"li\")\n                li.innerHTML = `${currentValue} <a>&times;</a>`\n                li.querySelector(\"a\").addEventListener(\"click\", function () {\n                    onDelete(index)\n                })\n\n                DOMList.appendChild(li)\n            }\n        })\n\n        setAttribute()\n    }\n\n    function onKeyUp() {\n\n        DOMInput.addEventListener(\"keyup\", function (event) {\n            let text = this.value.trim()\n\n            // check if ',' or 'enter' key was press\n            if (text.includes(\",\") || event.keyCode === 13) {\n                // check if empty text when ',' is remove\n                if (text.replace(\",\", \"\") !== \"\") {\n                    // push to array and remove ','\n                    arrayOfList.push(text.replace(\",\", \"\"))\n                }\n                // clear input\n                this.value = \"\"\n            }\n\n            DOMRender()\n        })\n    }\n\n    function onDelete(id) {\n\n        arrayOfList = arrayOfList.filter(function (currentValue, index) {\n            if (index === id) {\n                return false\n            }\n            return currentValue\n        })\n\n        DOMRender()\n    }\n\n    function getAttribute() {\n\n        dataAttribute = DOMParent.getAttribute(\"data-simple-tags\")\n        dataAttribute = dataAttribute.split(\",\")\n\n        // store array of data attribute in arrayOfList\n        arrayOfList = dataAttribute.map((currentValue) => {\n            return currentValue.trim()\n        })\n    }\n\n    function setAttribute() {\n        DOMParent.setAttribute(\"data-simple-tags\", arrayOfList.toString())\n    }\n\n    getAttribute()\n    DOMCreate()\n    DOMRender()\n    onKeyUp()\n}","// html product list loader\nexport const HTMLContent = (__) => {\n\nreturn `\n  <div class=\"container p-edit\">\n    <div class=\"d-flex justify-content-between bd-highlight mb-3\">\n        <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n        \n    </div>\n    <div class=\"row\">\n        <div class=\"col-lg-9 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n            <div class=\"sections\" id=\"sections\" role=\"tablist\" style=\"width:100%;\">\n\n                <div class=\"row\">\n                    <div class=\"col-12 grid-margin stretch-card\">\n                        <div class=\"card border-white shadow-sm p-sm-3\">\n                            <div class=\"card-body\">\n\n                                <div class=\"landing_status\"></div>\n                                <input type=\"hidden\" class=\"form-control\" id=\"landing-slug\" value=\"\">\n\n                                <h4 id=\"elan\" class=\"card-title mb-4\">${ __('Description') }</h4>\n\n                                <div id=\"placeholders\">\n\n                                    <div class=\"mb-3\">\n                                        <label class=\"banner-title-l form-label\" for=\"p-title\">${ __('Title') }</label>\n                                        <input type=\"text\" class=\"form-control inp\" id=\"p-title\" placeholder=\"${ __('Sushi set..') }\">\n                                        <p class=\"form-text\"> </p>\n                                    </div>\n\n                                    <div class=\"mb-3\">\n                                        <label class=\"banner-descshort-l form-label\" for=\"p-sdesc\">${ __('Short Description') }</label>\n                                        <textarea class=\"form-control inp\" id=\"p-sdesc\" placeholder=\"  \" maxlength=\"120\" rows=\"2\"></textarea>\n                                    </div>\n\n                                    <div class=\"mb-3\">\n                                        <label class=\"banner-descshort-l form-label\" for=\"desc\">${ __('Images') }</label>\n                                        <div class=\"clearfix\"></div>\n                                        <div class=\"ic\"></div>\n                                        <div class=\"clearfix\"></div>\n                                    </div>\n\n                                    <div class=\"mb-3\">\n                                        <div class=\"clearfix\"></div>\n                                        <div style=\"clear:both;margin-top:16px;\"></div>\n                                        <label class=\"banner-descshort-l form-label\" for=\"p-desc\">${ __('Description') }</label>\n                                        <textarea class=\"form-control inp\" id=\"p-ldesc\" placeholder=\" \" maxlength=\"2000\" rows=\"10\"></textarea>\n                                    </div>\n\n                                    <div class=\"mb-3 mw\">\n                                        <div class=\"list-wrapper\">\n                                            <ul class=\"d-flex flex-column-reverse features\"> </ul>\n                                        </div>\n                                        <p class=\"form-text\"> </p>\n                                    </div>\n\n                                    <div class=\"price_group mt-3 mb-3\">\n                                        <h4 class=\"card-title mb-3\">${ __('Price') }</h4>\n                                        <div class=\"price_group_base\">\n                                            <div class=\"mb-3\">\n                                                <div class=\"input-group\">\n                                                    <div id=\"p-price-c\">\n                                                        <label for=\"p-price\" class=\"form-label\">${ __('Default') } <span class=\"lang\"></span></label>\n                                                        <div class=\"input-group pe-3 mb-3\">\n                                                            <span id=\"p-price-symb\" class=\"input-group-text\">$</span>\n                                                            <input id=\"p-price\" type=\"text\" class=\"form-control inp\" placeholder=\"55.00\" autocomplete=\"off\">\n                                                        </div>\n                                                    </div>\n                                                    <div id=\"p-priced-c\" class=\"d-flex align-content-end flex-wrap\">\n                                                        <a class=\"btn btn-outline-secondary mb-3 add-discount\" href=\"#\" role=\"button\" id=\"btn-discount\" >\n                                                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus\" viewBox=\"0 0 16 16\"><path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/></svg>\n                                                            ${ __('discount') }\n                                                        </a>\n                                                        <div class=\"d-none\">\n                                                            <label for=\"p-priced pe-3 mb-3\" class=\"form-label\">${ __('Discounted') } <span class=\"lang\"></span></label>\n                                                            <input id=\"p-priced\" type=\"text\" class=\"form-control\" placeholder=\"45.00\" autocomplete=\"off\">\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                \n                                                <div class=\"discount-blocks mw\">\n                                                    <label class=\"discount-list form-label\" for=\"discount-list \">${ __('Discount list') }</label>\n                                                    <ul class=\"mb-4\">\n                                               \n                                                    </ul>\n                                                </div>\n                                                <div class=\"add-mix-ctn text-left mt-3 mb-2\"><a class=\"add-mix-block\" href=\"#\" data-action=\"add\">${ __('+ add variation') }</a></div>\n                                            </div>\n\n                                            <div class=\"variation-blocks\">\n                        \n                                            </div>\n\n                                            <div style='margin:24px 0 48px;border-bottom:0px solid #ccc;'></div>\n\n                                            <div class=\"mb-3 mw\">\n                                                <h4 id=\"elan\" class=\"card-title\">${ __('Inventory') }</h4>\n                                                <label for=\"stock_sku\" class=\"form-label\"> <span class=\"lang\"></span></label>\n                                                <div class=\"input-group\">\n                                                    <input id=\"stock_sku\" type=\"text\" style=\"width:100%;\" class=\"form-control\" placeholder=\"\" maxlength=\"200\">\n                                                    <p class=\"form-text\">${ __('Product stock unit identification number or SKU.') }</p>\n                                                </div>\n                                            </div>\n\n                                            <div class=\"mb-3 mw\">\n                                                <div class=\"form-check\">\n                                                    <input id=\"stock_management\" class=\"form-check-input stock-management\" name=\"stock_management\" type=\"checkbox\" value=\"0\" data-type=\"checkbox\">\n                                                    <label class=\"form-check-label\" for=\"stock_management\">\n                                                        ${ __('Stock management') }\n                                                    </label>\n                                                </div>\n                                                <p class=\"form-text\">${ __('Enable stock management.') }</p>\n                                            </div>\n\n                                            <div class=\"mb-3 mw stock-cont\">\n                                                <label class=\"form-label\" for=\"stock_quantity\">${ __('Stock quantity') }</label>\n                                                <input id=\"stock_quantity\" type=\"text\" class=\"form-control\" placeholder=\"0\">\n                                                <p class=\"form-text\">${ __('Total number of products left.') }</p>\n                                            </div>\n\n                                            <div class=\"mb-3 mw stock-cont\">\n                                                <label class=\"form-label\" for=\"stock_low_threshold\">${ __('Low stock') }</label>\n                                                <input id=\"stock_low_threshold\" type=\"text\" class=\"form-control\" placeholder=\"0\">\n                                                <p class=\"form-text\">${ __('Low stock threshold.') }</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class=\"desc-repeater-cont\">\n\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n\n            </div>\n        </div>\n        <div class=\"col-lg-3 mt-3 mt-lg-0 grid-margin grid-margin-lg-0 grid-margin-md-0\">\n\n            <div class=\"row\">\n                <div class=\"col-12 grid-margin stretch-card\">\n                    <div class=\"card border-white shadow-sm p-sm-3\">\n                        <div class=\"card-body\">\n\n                            <h4 class=\"card-title\" style=\"display:none;\">${ __('General') }</h4>\n                            <div class=\"landing_status\"></div>\n                            <input type=\"hidden\" class=\"form-control\" id=\"landing-slug\" value=\"\">\n\n                            <h4 id=\"elan\" class=\"card-title mb-4\">${ __('Status') }</h4>\n                            <div id=\"status-cont\" class=\"mb-3\">\n\n                                <div class=\"col-sm-12\">\n                                    <div class=\"form-check\">\n                                        <label class=\"form-check-label status-publish form-label\">\n                                            <input type=\"radio\" class=\"form-check-input\" name=\"p-status\"\n                                                id=\"p-status1\" value=\"1\">\n                                                ${ __('Published') }\n                                        </label>\n                                    </div>\n                                </div>\n\n                                <div class=\"col-sm-12\">\n                                    <div class=\"form-check\">\n                                        <label class=\"form-check-label status-draft form-label\">\n                                            <input type=\"radio\" class=\"form-check-input\" name=\"p-status\"  id=\"p-status0\" value=\"0\">\n                                            ${ __('Draft') }\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <h4 id=\"elan\" class=\"card-title mb-4\">${ __('Categories') }</h4>\n                            <div id=\"p-cats\" class=\"simple-tags mb-4\" data-simple-tags=\"\"></div>\n                            <div class=\"clearfix\"> </div>\n\n                            <div class=\"d-grid gap-2\">\n                                <button class=\"btn btn-primary btn-save\" type=\"button\">${ __('Save') }</button>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n  </div>\n\n  <div class=\"modal p-modal\" tabindex=\"-1\">\n    <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h5 class=\"modal-title\"></h5>\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div class=\"modal-body\">\n\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-primary btn-modal\"></button>\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"></button>\n            </div>\n        </div>\n    </div>\n  </div>\n\n  <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n    <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\"\n        aria-atomic=\"true\" data-bs-delay=\"3000\">\n        <div class=\"d-flex\">\n            <div class=\"toast-body\"></div>\n            <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n        </div>\n    </div>\n  </div>\n  `;\n}","// js dependencies\nimport { headers, __html, __attr, showLoader, hideLoader, initHeader, initFooter, initBreadcrumbs, parseApiError, getCookie, onClick, onChange, simulateClick, spaceID, loadScript, toast, link } from '@kenzap/k-cloud';\nimport { getProductId, makeNumber, numsOnly, priceFormat, onlyNumbers, loadAddon } from \"../_/_helpers.js\"\nimport { simpleTags } from \"../_/_ui.js\"\nimport { HTMLContent } from \"../_/_cnt_product_edit.js\"\n\n// where everything happens\nconst _this = {\n\n    init: () => {\n        \n        _this.getData(); \n    },\n    state: {\n        ajaxQueue: 0,\n        settings: {}, // where all requested settings are cached\n    },\n    getData: () => {\n\n        // block ui during load\n        showLoader();\n\n        let id = getProductId();\n        let sid = spaceID();\n\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: headers,\n            body: JSON.stringify({\n                query: {\n                    user: {\n                        type:       'authenticate',\n                        fields:     ['avatar'],\n                        token:      getCookie('kenzap_token')\n                    },\n                    product: {\n                        type:       'find',\n                        key:        'ecommerce-product',\n                        id:         id,   \n                        fields:     ['_id', 'id', 'img', 'status', 'price', 'discounts', 'variations', 'title', 'sdesc', 'ldesc', 'stock', 'cats', 'updated']\n                    },\n                    settings: {\n                        type:       'get',\n                        key:        'ecommerce-settings',\n                        fields:     ['currency', 'currency_symb', 'currency_symb_loc', 'tax_calc', 'tax_auto_rate', 'tax_rate', 'tax_display', 'scripts_product_edit', 'addons'],\n                    },\n                    locale: {\n                        type:       'locale',\n                        source:      ['extension'],\n                        key:         'ecommerce',\n                    }\n                }\n            }) \n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // hide UI loader\n            hideLoader();\n\n            if (!response.success){ parseApiError(response); return; }\n\n            if (response.success){\n\n                _this.state.settings = response.settings;\n\n                // init header\n                initHeader(response);\n  \n                // get core html content \n                document.querySelector('#contents').innerHTML = HTMLContent(__);\n\n                // check product response\n                if (response.product.length == 0) {\n             \n                    // $(\".list\").html(/*html*/`<tr><td colspan=\"3\">No products to display. Please create one by clicking on the button above.</td></tr>`);\n                    // $( \"#loader\" ).fadeOut( \"fast\" );\n                    _this.initListeners('all');\n                    return;\n                }\n\n                // let st = parseInt(data.list[i].status);\n                let img = 'https://cdn.kenzap.com/loading.png';\n\n                // if(typeof(response.product[i].img) !== 'undefined' && response.product[i].img[0] == 'true') img = 'https://preview.kenzap.cloud/S1000452/_site/images/product-'+response.product[i].id+'-1-100x100.jpeg?1630925420';\n                \n                // bind frontend data\n                _this.renderPage(response.product);\n\n                // load images if any\n                _this.loadImages(response.product);\n\n                // init page listeners\n                _this.initListeners('all');\n\n                // footer note\n                initFooter(__html('Created by %1$Kenzap%2$. ❤️ Licensed %3$GPL3%4$.', '<a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">', '</a>', '<a class=\"text-muted\" href=\"https://github.com/kenzap/ecommerce\" target=\"_blank\">', '</a>'), '');\n\n                // load addons\n                if(response.settings.addons) if(response.settings.addons.product_edit) response.settings.addons.product_edit.forEach(obj => { loadAddon(obj.src, obj.version); })\n\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    },\n    renderPage: (product) => {\n\n        let d = document;\n\n        // initiate breadcrumbs\n        initBreadcrumbs(\n            [\n                { link: link('https://dashboard.kenzap.cloud'), text: __html('Dashboard') },\n                { link: link('/'), text: __html('E-commerce') },\n                { link: link('/product-list/'), text: __html('Product List') },\n                { text: __html('Product Edit') }\n            ]\n        );\n\n        // general section\n        d.querySelector(\"#p-title\").value = product.title;\n        d.querySelector(\"#p-sdesc\").value = product.sdesc;\n        d.querySelector(\"#p-ldesc\").value = product.ldesc;\n\n        // price section\n        d.querySelector(\"#p-price\").value = product.price; onlyNumbers('#p-price', [8, 46]);\n        // d.querySelector(\"#p-priced\").value = product.priced;\n        d.querySelector(\"#p-price-symb\").innerHTML = _this.state.settings['currency_symb'] ? _this.state.settings['currency_symb'] : \"\";\n\n        // discounts \n        document.querySelector(\".discount-blocks\").dataset.data = encodeURIComponent(JSON.stringify(product.discounts ? product.discounts : []));\n        _this.renderDiscounts();\n\n        // price variation section\n        // console.log(product.variations);\n        for(let m in product.variations){ \n\n            let vr = product.variations[m];\n            let data = []; data['title'] = vr['title']; data['type'] = vr['type']; data['required'] = vr['required']; data['index'] = m;\n  \n            d.querySelector(\".variation-blocks\").innerHTML += _this.structMixBlock(data);\n\n            for(let n in vr['data']){\n  \n              let vrd = vr['data'][n];\n              let data = []; \n              data['title'] = vrd['title'];\n              data['price'] = vrd['price'];\n              data['type'] = vr['type'];\n  \n              // console.log(data['title']);\n              d.querySelector(\".var-block[data-index='\"+m+\"'] .offer-pricef\").innerHTML += _this.structMixRow(data);\n            }\n        }\n\n        // inventory\n        if(!product['stock']) product['stock'] = {management: false, sku: \"\", qty: 0, low_threshold: 0};\n\n        for(let el of document.querySelectorAll('.stock-cont')){ product['stock']['management'] == true ? el.classList.remove('d-none') : el.classList.add('d-none'); }\n        document.querySelector('#stock_sku').value = product['stock']['sku'] ? product['stock']['sku'] : \"\";\n        document.querySelector('#stock_management').checked = product['stock']['management']; //  == \"1\" ? true: false;\n        document.querySelector('#stock_quantity').value = product['stock']['qty'] ? makeNumber(product['stock']['qty']) : 0;\n        document.querySelector('#stock_low_threshold').value = product['stock']['low_threshold'] ? makeNumber(product['stock']['low_threshold']) : 0;\n\n        // init status box\n        document.querySelector('#p-status'+product.status).checked = true;\n\n        // init categories\n        let pcats = document.querySelector('#p-cats');\n        if (product.cats) pcats.setAttribute('data-simple-tags', product.cats);\n        const tags = new simpleTags(__, pcats);\n        \n    },\n    initListeners: (type = 'partial') => {\n\n        // console.log('initListeners ');\n\n        // listeners that can be initiated only once\n        if(type == 'all'){\n\n            // product save button\n            onClick('.btn-save', _this.listeners.saveProduct);\n            \n            // modal success button\n            onClick('.p-modal .btn-primary', _this.listeners.modalSuccessBtn);\n        }\n\n        // add discount\n        onClick('.add-discount', _this.listeners.addDiscountBlock);\n\n        // add variation block\n        onClick('.add-mix-block', _this.listeners.addMixBlock);\n        \n        // edit variation block\n        onClick('.edit-block', _this.listeners.editBlock);\n\n        // remove variation block\n        onClick('.remove-block', _this.listeners.removeBlock);\n\n        // add variation option\n        onClick('.add-mix', _this.listeners.addMixOption);\n\n        // remove variation option\n        onClick('.remove-option', _this.listeners.removeOption);\n\n        // stock management enable disable\n        onClick('.stock-management', _this.listeners.stockManagement);\n    },\n    listeners: {\n\n        editBlock: (e) => {\n\n            e.preventDefault();\n\n            let amb = document.querySelector('.add-mix-block');\n            amb.dataset.action = 'edit';\n            amb.dataset.index = e.currentTarget.dataset.index;\n            setTimeout(() => simulateClick(amb), 10);\n\n            console.log('editBlock');\n        },\n\n        removeBlock: (e) => {\n\n            e.preventDefault();\n\n            let c = confirm(__html('Remove entire block?'));\n            if(c){ \n                e.currentTarget.parentNode.parentNode.remove();\n                // e.currentTarget.parentElement.parentElement.remove();\n             }\n\n            console.log('removeBlock');\n        },\n\n        addMixBlock: (e) => {\n\n            e.preventDefault();\n\n            let action = e.currentTarget.dataset.action; // $(this).attr('data-action');\n            let index = e.currentTarget.dataset.index; // $(this).attr('data-index');\n            e.currentTarget.dataset.action = 'add'; // $(this).attr('data-action', 'add');\n\n            console.log('index: ' + index);\n\n            // init defaults\n            let modal_title = __html('Add Variation Block');\n            let title = \"\";\n            let type = \"\";\n            let required = 0;\n            let modal_btn = __html('Add'), modal_cancel_btn = __html('Cancel');\n\n            // override defaults in editing mode\n            if(action == 'edit'){\n\n                modal_title = __html('Edit Variation Block');\n\n                title = document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.title;\n                type  = document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.type;\n                required = parseInt(document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.required);\n\n                modal_btn = __html('Save');\n                // console.log(variations);\n            }\n\n            let pmodal = document.querySelector(\".p-modal\");\n            let pmodalCont = new bootstrap.Modal(pmodal);\n            \n            pmodal.querySelector(\".modal-title\").innerHTML = modal_title;\n            pmodal.querySelector(\".btn-primary\").innerHTML = modal_btn;\n            pmodal.querySelector(\".btn-secondary\").innerHTML = modal_cancel_btn;\n\n            pmodalCont.show();\n\n            let modalHTml = `\n            <div class=\"form-cont\">\n                <div class=\"form-group mb-3\">\n                    <label for=\"mtitle\" class=\"form-label\">${ __html('Save') }</label>\n                    <input type=\"text\" class=\"form-control\" id=\"mtitle\" autocomplete=\"off\" placeholder=\"Rice type\" value=\"${ title }\">\n                </div>\n                <div class=\"form-group mb-3\">\n                    <label for=\"mtype\" class=\"form-label\">${ __html('Input type') }</label>\n                    <select id=\"mtype\" class=\"form-control \" >\n                        <option ${ type=='radio'?'selected=\"selected\"':'' } value=\"radio\">${ __html('Radio buttons') }</option>\n                        <option ${ type=='checkbox'?'selected=\"selected\"':'' } value=\"checkbox\">${ __html('Checkboxes') }</option>\n                    </select>\n                    <p class=\"form-text\">${ __html('Define how this renders on frontend.') }</p>\n                </div>\n                <div class=\"form-group mb-3\">\n                    <div class=\"form-check\">\n                        <label for=\"id=\"mtype\"\" class=\"form-check-label form-label\">\n                            <input id=\"mrequired\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Required') }\n                        </label>\n                    </div>\n                    <p class=\"form-text\">${ __html('Make this variation mandatory for users.') }</p>\n                </div>\n                <div class=\"form-group mb-3 dn\">\n                    <label for=\"mtype\" class=\"form-label\">${ __html('Minimum required') }</label>\n                    <select id=\"mtype\" class=\"form-control\" >\n                        <option value=\"1\">1</option>\n                        <option value=\"2\">2</option>\n                    </select>\n                </div>\n            </div>`;\n\n            pmodal.querySelector(\".modal-body\").innerHTML = modalHTml;\n\n            setTimeout( () => pmodal.querySelector(\"#mtitle\").focus(),100 );\n\n            _this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n\n                let mtitle = pmodal.querySelector(\".p-modal #mtitle\").value;\n                let mtype = pmodal.querySelector(\".p-modal #mtype\").value;\n                let mrequired = pmodal.querySelector(\".p-modal #mrequired:checked\");\n                mrequired = mrequired == null ? 0 : mrequired.value == \"1\" ? 1 : 0;\n            \n                if(mtitle.length<2){ alert(__html('Please provide longer title')); return; }\n\n                // add mix and match\n                let data = []; data['title'] = mtitle; data['type'] = mtype; data['required'] = mrequired; data['index'] = document.querySelectorAll(\".var-block\").length;\n                if(action == 'edit'){\n\n                    document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.title = mtitle;\n                    document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.type = mtype;\n                    document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.required = mrequired;\n                    document.querySelector(\".var-block[data-index='\"+index+\"'] .title\").innerHTML = mtitle;\n                }\n\n                if(action == 'add'){\n\n                    if(document.querySelector(\".variation-blocks .var-block\") == null){\n                        document.querySelector(\".variation-blocks\").innerHTML = _this.structMixBlock(data);\n                    }else{\n                        document.querySelector(\".variation-blocks .var-block:last-of-type\").insertAdjacentHTML('afterend', _this.structMixBlock(data));\n                    }\n                }\n\n                pmodalCont.hide();\n\n                setTimeout(() => _this.initListeners('partial'), 10);\n            }\n\n           //  console.log('addMixBlock');\n        },\n\n        addMixOption: (e) => {\n\n            let block_el = e.currentTarget;\n            e.preventDefault();\n\n            let pmodal = document.querySelector(\".p-modal\");\n            let pmodalCont = new bootstrap.Modal(pmodal);\n            \n            pmodalCont.show();\n\n            pmodal.querySelector(\".modal-title\").innerHTML = __html('Add Variation');\n            pmodal.querySelector(\".btn-primary\").innerHTML = __html('Add');\n            pmodal.querySelector(\".btn-secondary\").innerHTML = __html('Cancel');\n\n            let modalHTML = `\n            <div class=\"form-cont\">\n                <div class=\"form-group\">\n                    <label for=\"mtitle\" class=\"form-label\">${ __html('Title') }</label>\n                    <input type=\"text\" class=\"form-control\" id=\"mtitle\" autocomplete=\"off\" placeholder=\"${ __html('Brown rice') }\">\n                </div>\n                <div class=\"form-group mt-3\">\n                    <label for=\"mprice\" class=\"form-label\">${ __html('Price') }</label>\n                    <div class=\"input-group mb-3\">\n                        <span class=\"input-group-text\">$</span>\n                        <input id=\"mprice\" type=\"text\" class=\"form-control\" placeholder=\"0.00\" value=\"\" >\n                        <p class=\"form-text\">${ __html('You can change default currency under Dashboard &gt; Settings.') }</p>\n                    </div>\n                </div>\n            </div>`;\n\n            pmodal.querySelector(\".modal-body\").innerHTML = modalHTML;\n\n            setTimeout( () => pmodal.querySelector(\"#mtitle\").focus(),100 );\n\n            _this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n\n                // validate\n                let mtitle = pmodal.querySelector(\".p-modal #mtitle\").value;\n                let mprice = pmodal.querySelector(\".p-modal #mprice\").value;\n                if(mtitle.length<2){ alert(\"Please provide longer title\"); return; }\n\n                let data = []; data['title'] = mtitle; data['price'] = mprice; data['type'] = block_el.parentElement.parentElement.dataset.type;\n                let sel = \".var-block[data-index='\"+block_el.parentElement.parentElement.dataset.index+\"']\";\n                console.log(sel);\n                \n                if(document.querySelector(sel + \" .offer-pricef li\") == null){\n                    document.querySelector(sel + \" .offer-pricef\").innerHTML = _this.structMixRow(data);\n                }else{\n                    document.querySelector(sel + \" .offer-pricef li:last-of-type\").insertAdjacentHTML('afterend', _this.structMixRow(data));\n                }\n\n                pmodalCont.hide();\n\n                setTimeout(() => _this.initListeners('partial'), 10);\n            };\n        },\n\n        removeOption: (e) => {\n\n            e.preventDefault();\n            \n            if( confirm('Remove option?') ) e.currentTarget.parentElement.remove();\n        },\n\n        removeDiscount: (e) => {\n\n            e.preventDefault();\n            \n            if( confirm('Remove discount?') ){\n                 \n                e.currentTarget.parentElement.remove();\n\n                let discounts = JSON.parse(decodeURIComponent(document.querySelector('.discount-blocks').dataset.data));\n\n                discounts.splice(e.currentTarget.dataset.index, 1);\n\n                document.querySelector(\".discount-blocks\").dataset.data = encodeURIComponent(JSON.stringify(discounts));\n            }\n        },\n\n        addDiscountBlock: (e) => {\n\n            e.preventDefault();\n\n            let action = e.currentTarget.dataset.action; // $(this).attr('data-action');\n            let index = e.currentTarget.dataset.index; // $(this).attr('data-index');\n            e.currentTarget.dataset.action = 'add'; // $(this).attr('data-action', 'add');\n\n            // init defaults\n            let modal_title = __html('Add discount');\n            let title = \"\";\n            let type = \"\";\n            let availability = \"\";\n            let required = 0;\n            let modal_btn = __html('Add'), modal_cancel_btn = __html('Cancel');\n\n            // override defaults in editing mode\n            if(action == 'edit'){\n\n                modal_title = __html('Edit Variation Block');\n\n                title = document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.title;\n                type  = document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.type;\n                required = parseInt(document.querySelector(\".var-block[data-index='\"+index+\"']\").dataset.required);\n\n                modal_btn = __html('Save');\n                // console.log(variations);\n            }\n\n            let pmodal = document.querySelector(\".p-modal\");\n            let pmodalCont = new bootstrap.Modal(pmodal);\n            \n            pmodal.querySelector(\".modal-title\").innerHTML = modal_title;\n            pmodal.querySelector(\".btn-primary\").innerHTML = modal_btn;\n            pmodal.querySelector(\".btn-secondary\").innerHTML = modal_cancel_btn;\n\n            pmodalCont.show();\n\n            let modalHTml = `\n            <div class=\"form-cont\">\n                <div class=\"form-group mb-3\">\n                    <div class=\"row\">\n                        <div class=\"col-lg-6\">\n                            <label for=\"discount-type\" class=\"form-label\">${ __html('Type') }</label>\n                            <select id=\"discount-type\" class=\"form-control\" >\n                                <option ${ type=='percent'?'selected=\"selected\"':'' } value=\"percent\">${ __html('By percent') }</option>\n                                <option ${ type=='value'?'selected=\"selected\"':'' } value=\"value\">${ __html('By value') }</option>\n                                <option ${ type=='never'?'selected=\"selected\"':'' } value=\"never\">${ __html('never discount') }</option>\n                            </select>\n                        </div>\n                        <div id=\"discount-percent-cont\" class=\"col-lg-6\">\n                            <label for=\"discount-percent\" class=\"form-label\">${ __html('Percent %') }</label>\n                            <input type=\"text\" class=\"form-control\" id=\"discount-percent\" autocomplete=\"off\" placeholder=\"${ __html('5') }\">\n                        </div>\n                        <div id=\"discount-value-cont\" class=\"col-lg-6 d-none\">\n                            <label for=\"discount-value\" class=\"form-label\">${ __html('Value') }</label>\n                            <input type=\"text\" class=\"form-control\" id=\"discount-value\" autocomplete=\"off\" placeholder=\"${ __html('12.00') }\">\n                        </div>\n                    </div>\n                    <p class=\"form-text discount-hint-cont\">${ __html('Define how big is the discount (numeric value only).') }</p>\n                    <p class=\"form-text discount-never-cont d-none\">${ __html('Never apply general discount for this product') }</p>\n                </div>\n                <div class=\"discount-availability-cont form-group mb-3\">\n                    <label for=\"discount-availability\" class=\"form-label\">${ __html('Availability') }</label>\n                    <select id=\"discount-availability\" class=\"form-control \" >\n                        <option ${ availability=='admin'?'selected=\"selected\"':'' } value=\"admin\">${ __html('Admin') }</option>\n                        <option ${ availability=='always'?'selected=\"selected\"':'' } value=\"always\">${ __html('Always') }</option>\n                        <option ${ availability=='hourly'?'selected=\"selected\"':'' } value=\"hourly\">${ __html('Hourly') }</option>\n                        <option ${ availability=='weekly'?'selected=\"selected\"':'' } value=\"weekly\">${ __html('Weekly') }</option>\n                        <option class=\"d-none\" ${ availability=='monthly'?'selected=\"selected\"':'' } value=\"monthly\">${ __html('Monthly') }</option>\n                    </select>\n                    <p class=\"form-text\">${ __html('Restrict discount availability.') }</p>\n                </div>\n                <div id=\"discount-weekly\" class=\"discount-weekly-cont form-group mb-3 d-none\">\n                    <label for=\"mtype\" class=\"form-label\">${ __html('Days of week') }</label>\n                    <div class=\"form-check\">\n                        <label for=\"week-monday\" class=\"form-check-label form-label\">\n                            <input id=\"week-monday\" type=\"checkbox\" class=\"form-check-input \" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Monday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label for=\"week-tuesday\" class=\"form-check-label form-label\">\n                            <input id=\"week-tuesday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Tuesday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-wednesday\" class=\"form-check-label form-label\">\n                            <input id=\"week-wednesday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Wednesday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-thursday\" class=\"form-check-label form-label\">\n                            <input id=\"week-thursday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Thursday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-friday\" class=\"form-check-label form-label\">\n                            <input id=\"week-friday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Friday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-saturday\" class=\"form-check-label form-label\">\n                            <input id=\"week-saturday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Saturday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-sunday\" class=\"form-check-label form-label\">\n                            <input id=\"week-sunday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Sunday') }\n                        </label>\n                    </div>\n                    <p class=\"form-text\">${ __html('Days of the week when discount is available.') }</p>\n                </div>\n                <div id=\"discount-hourly\" class=\"form-group discount-hourly-cont mb-3 d-none\">\n                    <div class=\"row\">\n                        <div class=\"col-lg-6\">\n                            <div class=\"form-group mb-3 mt-1\">\n                                <label for=\"discount-hour-from\" class=\"form-label\">${ __html('From') }</label>\n                                <input id=\"discount-hour-from\" type=\"text\" class=\"form-control\" maxlength=\"5\" autocomplete=\"off\" placeholder=\"${ __html('12:00') }\">\n                            </div>\n                        </div>\n                        <div class=\"col-lg-6\">\n                            <div class=\"form-group mb-3 mt-1\">\n                                <label for=\"discount-hour-to\" class=\"form-label\">${ __html('To') }</label>\n                                <input id=\"discount-hour-to\" type=\"text\" class=\"form-control\" maxlength=\"5\" autocomplete=\"off\" placeholder=\"${ __html('17:00') }\">\n                            </div>\n                        </div>\n                    </div>\n                    <p class=\"form-text\">${ __html('Time range when discount is available.') }</p>\n                </div>\n                <div class=\"form-group discount-note-cont mb-3\">\n                    <div class=\"form-group mb-3 mt-1\">\n                        <label for=\"discount-note\" class=\"form-label\">${ __html('Note') }</label>\n                        <input id=\"discount-note\" type=\"text\" class=\"form-control\" maxlength=\"25\" autocomplete=\"off\" placeholder=\"${ __html('') }\">\n                        <p class=\"form-text\">${ __html('Example: •happy hour promo.') }</p>\n                    </div>\n                </div> \n            </div>`;\n\n            pmodal.querySelector(\".modal-body\").innerHTML = modalHTml;\n\n            setTimeout( () => pmodal.querySelector(\"#discount-type\").focus(), 100 );\n\n            // discount modal listeners\n            onChange('#discount-availability', (e) => {\n                \n                // discount-availability\n                console.log(e.currentTarget.value);\n\n                switch(e.currentTarget.value){\n\n                    case 'admin':\n                        document.querySelector('#discount-weekly').classList.add('d-none');\n                        document.querySelector('#discount-hourly').classList.add('d-none');\n                    break;\n                    case 'always':\n                        document.querySelector('#discount-weekly').classList.add('d-none');\n                        document.querySelector('#discount-hourly').classList.add('d-none');\n                    break;\n                    case 'hourly':\n                        document.querySelector('#discount-weekly').classList.add('d-none');\n                        document.querySelector('#discount-hourly').classList.remove('d-none');\n                    break;\n                    case 'weekly':\n                        document.querySelector('#discount-weekly').classList.remove('d-none');\n                        document.querySelector('#discount-hourly').classList.remove('d-none');\n                    break;\n                };\n            });\n\n            // percent number only\n            onlyNumbers('#discount-percent', [8]);\n\n            // value number only\n            onlyNumbers('#discount-value', [8, 46]);\n\n            // time from number only\n            onlyNumbers('#discount-hour-from', [8, 58]);\n            \n            // time to number only\n            onlyNumbers('#discount-hour-to', [8, 58]);\n\n            // discount type\n            onChange('#discount-type', (e) => {\n                \n                // discount-availability\n                console.log(e.currentTarget.value);\n\n                document.querySelector('.discount-never-cont').classList.add('d-none');\n                document.querySelector('.discount-hint-cont').classList.remove('d-none');\n                document.querySelector('.discount-availability-cont').classList.remove('d-none');\n                document.querySelector('.discount-hint-cont').classList.remove('d-none');\n\n                switch(e.currentTarget.value){\n\n                    case 'percent':\n                        document.querySelector('#discount-percent-cont').classList.remove('d-none');\n                        document.querySelector('#discount-value-cont').classList.add('d-none');\n                    break;\n                    case 'value':\n                        document.querySelector('#discount-percent-cont').classList.add('d-none');\n                        document.querySelector('#discount-value-cont').classList.remove('d-none');\n                    break;\n                    case 'never':\n                        document.querySelector('#discount-percent-cont').classList.add('d-none');\n                        document.querySelector('#discount-value-cont').classList.add('d-none');\n                        document.querySelector('.discount-never-cont').classList.remove('d-none');\n                        document.querySelector('.discount-availability-cont').classList.add('d-none');\n                        document.querySelector('.discount-hint-cont').classList.add('d-none');\n                    break;\n                };\n            });\n\n            _this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n\n                let obj = {}, allow = true;\n\n                document.querySelector(\".form-cont\").classList.add(\"was-validated\"); \n                document.querySelector(\"#discount-percent\").setCustomValidity(\"\");\n                document.querySelector(\"#discount-hour-from\").setCustomValidity(\"\");\n                document.querySelector(\"#discount-hour-to\").setCustomValidity(\"\");\n\n                // get discount list\n                let discounts = document.querySelector(\".discount-blocks\").dataset.data;\n                if(!discounts){ \n\n                    discounts = [];\n                }else{\n\n                    discounts = JSON.parse(decodeURIComponent(discounts))\n                }\n\n                // discount note\n                obj.note = document.querySelector(\"#discount-note\").value;\n\n                // discount type\n                obj.type = document.querySelector(\"#discount-type\").value;\n\n                if(obj.type == 'percent'){\n\n                    // get value\n                    obj.percent = document.querySelector(\"#discount-percent\").value;\n                    \n                    // validate\n                    if(obj.percent==\"\"){\n\n                        document.querySelector(\"#discount-percent\").setCustomValidity(\"Percent field can not be empty.\");\n                        allow = false;\n                        // alert('Percent field can not be empty.'); \n                        // return false; \n                    }\n\n                }else if(obj.type == 'value'){\n\n                    // get value\n                    obj.value = document.querySelector(\"#discount-value\").value;\n\n                    // validate\n                    if(obj.value==\"\"){\n\n                        document.querySelector(\"#discount-value\").setCustomValidity(\"Value field can not be empty.\");\n                        allow = false;\n                        // alert('Value field can not be empty.'); \n                        // return false; \n                    }\n                }else if(obj.type == 'value'){\n\n                    // get value\n                    obj.value = \"-\";\n                }\n\n                // discount availability\n                obj.availability = document.querySelector(\"#discount-availability\").value;\n\n                if(obj.availability == 'always') {\n\n                }else if(obj.availability == 'admin') {\n\n                }else if(obj.availability == 'hourly') {\n                    \n                    // iterate available hours\n                    obj.hours = { from: document.querySelector(\"#discount-hour-from\").value, to: document.querySelector(\"#discount-hour-to\").value };\n\n                    // validate\n                    if(obj.hours.from.length<2) {\n\n                        document.querySelector(\"#discount-hour-from\").setCustomValidity(\"Wrong time format\");\n                        allow = false;\n                    }\n\n                    // validate\n                    if(obj.hours.to.length<2) {\n\n                        document.querySelector(\"#discount-hour-to\").setCustomValidity(\"Wrong time format\");\n                        allow = false;\n                    }\n                   \n                }else if(obj.availability == 'weekly') {\n\n                    // iterate available hours\n                    obj.hours = { from: document.querySelector(\"#discount-hour-from\").value, to: document.querySelector(\"#discount-hour-to\").value };\n                    \n                    // validate\n                    if(obj.hours.from.length<2) {\n\n                        document.querySelector(\"#discount-hour-from\").setCustomValidity(\"Wrong time format\");\n                        allow = false;\n                    }\n\n                    // validate\n                    if(obj.hours.to.length<2) {\n\n                        document.querySelector(\"#discount-hour-to\").setCustomValidity(\"Wrong time format\");\n                        allow = false;\n                    }\n\n                    // iterate available weeks\n                    obj.dow = [];\n                    for(let el of document.querySelectorAll('#discount-weekly input')) {\n                        obj.dow.push(el.checked)\n                    }\n                }\n\n                if(!allow){ alert('Please enter all fields correctly.'); return; }\n                \n                discounts.push(obj);\n\n                document.querySelector(\".discount-blocks\").dataset.data = encodeURIComponent(JSON.stringify(discounts));\n\n                _this.renderDiscounts();\n\n                console.log(obj);\n\n                pmodalCont.hide();\n\n                setTimeout(() => _this.initListeners('partial'), 10);\n            }\n\n           //  console.log('addMixBlock');\n        },\n\n        saveProduct: (e) => {\n            \n            e.preventDefault();\n\n            let data = {};\n\n            // iterate through input fields\n            for( let inp of document.querySelectorAll('.inp') ){\n\n                data[inp.id.replace(\"p-\",\"\")] = inp.value.trim();\n            }\n\n            // map categories\n            data[\"cats\"] = [];\n            for( let cat of document.querySelectorAll('#p-cats ul li') ){\n\n                data[\"cats\"].push(cat.innerHTML.replace('<a>×</a>','').trim());\n            }\n             \n            // link uploaded images\n            data[\"img\"] = [];\n            for( let img of document.querySelectorAll('.p-img') ){\n\n                let tf = !img.getAttribute('src').includes(\"placeholder\") ? true : false;\n                data[\"img\"].push(tf);\n            }\n\n            // discount list\n            data[\"discounts\"] = JSON.parse(decodeURIComponent(document.querySelector('.discount-blocks').dataset.data));\n\n            // inventory\n            data[\"stock\"] = {};\n            data['stock']['sku'] = document.querySelector('#stock_sku').value;\n            data['stock']['management'] = document.querySelector('#stock_management').checked;\n            data['stock']['qty'] = document.querySelector('#stock_quantity').value; \n            data['stock']['low_threshold'] = document.querySelector('#stock_low_threshold').value;\n            \n            // status\n            data[\"status\"] = document.querySelector('input[name=\"p-status\"]:checked').value;\n   \n            // map mix and match\n            data[\"variations\"] = [];\n            let block_index = 0;\n            for( let block of document.querySelectorAll('.variation-blocks .var-block') ){\n\n                let option_index = 0;\n                for( let option of block.querySelectorAll('.offer-pricef li') ){\n\n                    if(typeof(data[\"variations\"][block_index]) === 'undefined')\n                    data[\"variations\"][block_index] = \n                    { \n                        'title': block.getAttribute('data-title'),\n                        'type': block.getAttribute('data-type'),\n                        'required': block.getAttribute('data-required'),\n                        'data': []\n                    };\n                    \n                    data[\"variations\"][block_index]['data'][option_index] = \n                    {\n                        'title': option.getAttribute('data-title'),\n                        'price': option.getAttribute('data-price'),\n                        'cond': option.getAttribute('data-cond')\n                    };\n                    option_index++;\n                }\n                block_index++;\n            }\n\n            // console.log(data);\n        \n            let id = getProductId();\n            let sid = spaceID();\n\n            showLoader();\n\n            // send data\n            fetch('https://api-v1.kenzap.cloud/', {\n                method: 'post',\n                headers: headers,\n                body: JSON.stringify({\n                    query: {\n                        product: {\n                            type:       'update',\n                            key:        'ecommerce-product',\n                            id:         id,         \n                            sid:        sid,\n                            data:       data\n                        }\n                    }\n                }) \n            })\n            .then(response => response.json())\n            .then(response => {\n\n                if (response.success){\n\n                    // upload desc images\n                    _this.uploadImages();\n                    \n                }else{\n\n                    parseApiError(response);\n                }\n                \n                console.log('Success:', response);\n            })\n            .catch(error => { parseApiError(error); });\n        },\n\n        openImage: (e) => {\n\n            e.preventDefault();\n            simulateClick(document.querySelector(\".aif-\"+e.currentTarget.dataset.index));\n        },\n\n        previewImage: (e) => {\n\n            e.preventDefault();\n\n            let input = e.currentTarget;\n\n            if (input.files && input.files[0]) {\n\n                // check image type\n                if(input.files[0].type != 'image/jpeg' && input.files[0].type != 'image/jpg' && input.files[0].type != 'image/png'){\n\n                    toast( __html(\"Please provide image in JPEG format\") );\n                    return;\n                }\n          \n                // check image size\n                if(input.files[0].size > 5000000){\n\n                    toast( __html(\"Please provide image less than 5 MB in size!\") );\n                    return;\n                }\n\n                let index = input.dataset.index;\n                let reader = new FileReader();\n                reader.onload = function(e) {\n                  \n                    // console.log('target '+e.currentTarget.result);\n                    document.querySelector('.images-'+index).setAttribute('src', e.currentTarget.result);\n                }\n                reader.readAsDataURL(input.files[0]);\n\n                e.currentTarget.parentElement.querySelector('.remove').classList.remove(\"hd\");\n            }\n        },\n\n        removeImage: (e) => {\n\n            let index = e.currentTarget.parentElement.dataset.index;\n            document.querySelector('.aif-' + index).value = '';\n            document.querySelector('.images-'+index).setAttribute('src', 'https://account.kenzap.com/images/placeholder.jpg');\n            e.currentTarget.classList.add(\"hd\");\n\n            // $(this).addClass(\"hd\");\n            // $(\".aif-\"+$(this).parent().data(\"index\")).val('');\n            // $(\".images-\"+$(this).parent().data(\"index\")).attr('src','https://account.kenzap.com/images/placeholder.jpg');\n            // $(this).addClass(\"hd\");\n        },\n\n        modalSuccessBtn: (e) => {\n            \n            console.log('calling modalSuccessBtnFunc');\n            _this.listeners.modalSuccessBtnFunc(e);\n        },\n\n        stockManagement: (e) => {\n\n            for(let el of document.querySelectorAll('.stock-cont')){\n                e.currentTarget.checked ? el.classList.remove('d-none') : el.classList.add('d-none');\n                e.currentTarget.value = e.currentTarget.checked ? \"1\" : \"0\";\n            }\n        },\n\n        modalSuccessBtnFunc: null\n    },\n\n    structMixBlock: (data) => {\n\n        let html = `\n        <div class=\"mb-4 var-block mw\" data-title=\"${ data.title }\" data-type=\"${ data.type }\" data-required=\"${ data.required }\" data-index=\"${ data.index }\" >\n            <label for=\"offer-pricef\" class=\"form-label pb-2\"><span class=\"title\">${ data.title }</span>\n                &nbsp;&nbsp;\n                <svg class=\"bi bi-pencil-fill edit-block ms-3\" title=\"edit block\" data-index=\"${ data.index }\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n                    <path d=\"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z\"/>\n                </svg>\n                <svg class=\"bi bi-trash remove-block ms-3\" title=\"edit block\" data-index=\"${ data.index }\"  xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#ff0079\" viewBox=\"0 0 16 16\">\n                    <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"></path>\\\n                    <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"></path>\n                </svg>\n            </label>\n            <div class=\"list-wrapper\">\n                <ul class=\"d-flex flex-column-reverse offer-pricef\" >\n                \n                </ul>\n            </div>\n            <p class=\"form-text\"><a class=\"add-mix\" href=\"#\">${ __html('+ add option') }</a> ${ __html('to differentiate price offering.') }</p>\n            <div class=\"add-mix-ctn d-none\"><a class=\"add-mix\" href=\"#\">${ __html('+ add option') }</a></div>\n        </div>`;\n    \n        return html;\n    },\n    structMixRow: (data) => {\n\n        return `\n        <li data-title=\"${ data.title }\" data-price=\"${ data.price }\" data-cond=\"\" class=\"pt-2 pb-2\"><div class=\"form-check\"><label class=\"form-check-label form-label\"><input class=\"${ data.type } form-check-input\" type=\"${ data.type }\" checked=\"\" data-ft=\"${ data.title }\">${ data.title } &nbsp;&nbsp;&nbsp; ${ priceFormat(_this, data.price) }</label></div>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#ff0079\" class=\"remove-option bi bi-x-circle\" viewBox=\"0 0 16 16\">\\\n                <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\n                <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\n            </svg>\n        </li>`;\n    },\n    loadImages: (product) => {\n\n        let d = document;\n        let lang = 'en';\n        let offer_id = '0';\n        let id = getProductId();\n        let sid = spaceID();\n        let t = '';\n        for(let i=0;i<5;i++){\n     \n          let img = (product.img !== undefined && product.img[i] == 'true') ? 'https://preview.kenzap.cloud/S'+spaceID()+'/_site/images/product-'+product.id+'-'+(i+1)+'-100x100.jpeg?'+product.updated:'https://account.kenzap.com/images/placeholder.jpg';\n          t+=`\\\n          <div class=\"p-img-cont float-start\">\\\n            <p data-index=\"${i}\">\\\n              <img class=\"p-img images-${i}\" data-index=\"${i}\" width=\"100\" height=\"100\" src=\"${img}\" />\\\n              <span class=\"remove hd\" title=\"${ __html('Remove') }\">×</span>\\\n            </p>\\\n            <input type=\"file\" name=\"img[]\" data-type=\"search\" data-index=\"${i}\" class=\"file aif-${i} d-none\">\\\n          </div>`;\n        }\n        \n        d.querySelector(\".ic\").innerHTML = t;\n    \n        // new image listener\n        onClick('.p-img-cont img', _this.listeners.openImage);\n\n        // new remove listener\n        onClick('.p-img-cont .remove', _this.listeners.removeImage);\n\n        // image preview listener\n        onChange('.p-img-cont .file', _this.listeners.previewImage);\n    \n        // iterate all images\n        for(let fi=0; fi<5; fi++){\n    \n            // async load image to verify if it exists on CDN \n            let image_url = CDN+'/S'+sid+'/product-'+id+'-'+(parseInt(fi)+1)+'-250.jpeg?'+product.updated;\n            setTimeout(function(img, sel, _fi){\n        \n                let allow = true;\n                if(typeof(product.img)!==\"undefined\"){ if(!product.img[_fi]) allow = false; }\n                if(allow){\n\n                    let i = new Image();\n                    i.onload = function(){\n                        d.querySelector(sel+_fi).setAttribute('src', img);\n                        d.querySelector(sel+_fi).parentElement.querySelector('.remove').classList.remove('hd');\n                    };\n                    i.src=img;\n                }\n            }, 300, image_url, \".images-\", fi );\n        }\n    },\n    // general method for image upload\n    uploadImages: () => {\n\n        if( document.querySelector(\".imgupnote\") ) document.querySelector(\".imgupnote\").remove();\n\n        let fi = 0;\n        for( let fileEl of document.querySelectorAll(\".file\") ){\n\n            fi += 1;\n\n            let id = getProductId();\n            let sid = spaceID();\n\n            // console.log(file);\n            let file = fileEl.files[0];\n            if(typeof(file) === \"undefined\") continue;\n\n            // TODO add global sizes setting \n            let fd = new FormData();\n            // let sizes = document.querySelector(\"body\").dataset.sizes;\n            let sizes = '1000|500|250|100x100';\n\n            fd.append('id', id);\n            fd.append('sid', sid);\n            fd.append('pid', id);\n            fd.append('key', 'image');\n            fd.append('sizes', sizes);\n            // fd.append('field', file);\n            fd.append('file', file);\n            fd.append('slug', 'product-'+id+'-'+fi);\n            fd.append('token', getCookie('kenzap_token'));\n\n            // clear input file so that its not updated again\n            file.value = '';\n\n            _this.state.ajaxQueue+=1;\n\n            fetch(\"https://api-v1.kenzap.cloud/upload/\",{\n                body: fd,\n                method: \"post\"\n            })\n            .then(response => response.json())\n            .then(response => {\n\n                _this.state.ajaxQueue -= 1;\n                if(response.success && _this.state.ajaxQueue == 0){\n\n                    toast( __html(\"Product updated\") );\n\n                    // hide UI loader\n                    hideLoader();\n                }\n            });\n        }\n        \n        // image upload notice\n        if(_this.state.ajaxQueue == 0){\n\n            toast( __html(\"Product updated\") );\n\n            hideLoader();\n        }\n    },\n    // render discounts\n    renderDiscounts: () => {\n\n        let discounts = document.querySelector('.discount-blocks').dataset.data;\n        let dow = [__html('Monday'), __html('Tuesday'), __html('Wednesday'), __html('Thursday'), __html('Friday'), __html('Saturday'), __html('Sunday')];\n        \n        discounts = JSON.parse(decodeURIComponent(discounts));\n\n        let html = '';\n        discounts.forEach((el, index) => {\n\n            let dv = el.type == 'value' ? priceFormat(_this, el.value) : el.percent + '% (' + priceFormat(_this, (makeNumber(document.querySelector(\"#p-price\").value) * ((100-el.percent)/100))) + ')';\n\n            let time = '';\n            switch(el.availability){\n\n                case 'admin': time = __html('Admin') + ' ' + dv; break;\n                case 'always': time = __html('Always') + ' ' + dv; break;\n                case 'hourly': time = el.hours.from + '-' + el.hours.to + ' ' + dv; break;\n                case 'weekly': el.dow.forEach((day, index) => { time += day == true ? dow[index] + ' ' : ''; }); time += '<b>' + el.hours.from + '-' + el.hours.to + '</b> ' + dv; break;\n            }\n\n            if(el.type==\"never\") time = __html('Avoid discount calculation for this product.');\n\n            html +=`\n            <li class=\"form-text mb-2\" >\n                ${ time }\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#ff0079\" class=\"remove-discount bi bi-x-circle\" data-index=${ index } viewBox=\"0 0 16 16\"><path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"></path><path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"></path></svg>\n            </li>`;\n\n        });\n\n        if(html == ''){\n            document.querySelector('.discount-list').classList.add('d-none');\n        }else{\n            document.querySelector('.discount-list').classList.remove('d-none');\n        }\n\n        document.querySelector('.discount-blocks ul').innerHTML = html; \n\n        // remove discount listener\n        onClick('.remove-discount', _this.listeners.removeDiscount);\n    }\n}\n\n_this.init();"],"names":["__","getProductId","urlParams","URLSearchParams","window","location","search","id","get","priceFormat","_this","price","makeNumber","Math","round","parseFloat","toFixed","state","settings","currency_symb_loc","currency_symb","onlyNumbers","sel","chars","document","querySelector","addEventListener","e","includes","which","isNaN","String","fromCharCode","value","preventDefault","loadAddon","dep","version","cb","url","URL","getCookie","pathname","console","log","getElementById","call","t","split","slice","js","createElement","setAttribute","onload","onreadystatechange","readyState","body","appendChild","head","getElementsByTagName","css","rel","type","href","simpleTags","element","Error","DOMParent","DOMList","DOMInput","dataAttribute","arrayOfList","DOMCreate","ul","input","firstElementChild","lastElementChild","DOMRender","innerHTML","forEach","currentValue","index","trim","li","onDelete","onKeyUp","event","text","keyCode","replace","push","filter","getAttribute","map","toString","HTMLContent","init","getData","ajaxQueue","showLoader","spaceID","fetch","method","headers","JSON","stringify","query","user","fields","token","product","key","locale","source","then","response","json","hideLoader","success","parseApiError","initHeader","length","initListeners","renderPage","loadImages","initFooter","__html","addons","product_edit","obj","src","error","d","initBreadcrumbs","link","title","sdesc","ldesc","dataset","data","encodeURIComponent","discounts","renderDiscounts","m","variations","vr","structMixBlock","n","vrd","structMixRow","management","sku","qty","low_threshold","querySelectorAll","el","classList","remove","add","checked","status","pcats","cats","onClick","listeners","saveProduct","modalSuccessBtn","addDiscountBlock","addMixBlock","editBlock","removeBlock","addMixOption","removeOption","stockManagement","amb","action","currentTarget","setTimeout","simulateClick","c","confirm","parentNode","modal_title","required","modal_btn","modal_cancel_btn","parseInt","pmodal","pmodalCont","bootstrap","Modal","show","modalHTml","focus","modalSuccessBtnFunc","mtitle","mtype","mrequired","alert","insertAdjacentHTML","hide","block_el","modalHTML","mprice","parentElement","removeDiscount","parse","decodeURIComponent","splice","availability","onChange","allow","setCustomValidity","note","percent","hours","from","to","dow","inp","cat","img","tf","block_index","block","option_index","option","sid","uploadImages","openImage","previewImage","files","toast","size","reader","FileReader","result","readAsDataURL","removeImage","html","i","undefined","updated","fi","image_url","CDN","_fi","Image","fileEl","file","fd","FormData","sizes","append","dv","time","day"],"mappings":"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"}